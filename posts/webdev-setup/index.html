<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Windows下Web开发环境搭建 - 头头博客</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#fff"><meta name="application-name" content="头头博客"><meta name="msapplication-TileImage" content="/asset/favicon144.png"><meta name="msapplication-TileColor" content="#fff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="头头博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="96x96" href="/asset/favicon96.png"><link rel="apple-touch-icon" sizes="144x144" href="/asset/favicon144.png"><link rel="apple-touch-icon" sizes="192x192" href="/asset/favicon192.png"><meta name="description" content="虽然Web程序大多运行在Linux服务器上，从兼容性角度来说，当然是在与服务器一致的环境下开发最好。但是我本地的机器是Windows系统，实在要用Linux的时候是采用虚拟机的方式。在虚拟机里面写代码着实麻烦，因此还是决定在Windows下搭建一套Web开发环境，方便测试。 我选择的Web开发组件是WNMP（Windows+Nginx+MySQL+PHP）。"><meta property="og:type" content="blog"><meta property="og:title" content="Windows下Web开发环境搭建"><meta property="og:url" content="https://blog.tootal.xyz/posts/webdev-setup/"><meta property="og:site_name" content="头头博客"><meta property="og:description" content="虽然Web程序大多运行在Linux服务器上，从兼容性角度来说，当然是在与服务器一致的环境下开发最好。但是我本地的机器是Windows系统，实在要用Linux的时候是采用虚拟机的方式。在虚拟机里面写代码着实麻烦，因此还是决定在Windows下搭建一套Web开发环境，方便测试。 我选择的Web开发组件是WNMP（Windows+Nginx+MySQL+PHP）。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.tootal.xyz/asset/webdev-setup.cover.webp"><meta property="article:published_time" content="2019-08-22T13:34:19.000Z"><meta property="article:modified_time" content="2019-08-22T13:34:19.000Z"><meta property="article:author" content="黄智权"><meta property="article:tag" content="Web"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/asset/webdev-setup.cover.webp"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tootal.xyz/posts/webdev-setup/"},"headline":"头头博客","image":[],"datePublished":"2019-08-22T13:34:19.000Z","dateModified":"2019-08-22T13:34:19.000Z","author":{"@type":"Person","name":"黄智权"},"description":"虽然Web程序大多运行在Linux服务器上，从兼容性角度来说，当然是在与服务器一致的环境下开发最好。但是我本地的机器是Windows系统，实在要用Linux的时候是采用虚拟机的方式。在虚拟机里面写代码着实麻烦，因此还是决定在Windows下搭建一套Web开发环境，方便测试。 我选择的Web开发组件是WNMP（Windows+Nginx+MySQL+PHP）。"}</script><link rel="canonical" href="https://blog.tootal.xyz/posts/webdev-setup/"><link rel="icon" href="/asset/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?a0752fdc3e7a9d538e1cb45af25201a4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="头头博客" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">头头博客</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">存档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" target="_blank" rel="noopener" href="https://note.tootal.xyz">笔记</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="View on GitHub" href="https://github.com/tootal/tootal.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/asset/webdev-setup.cover.webp" alt="Windows下Web开发环境搭建"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-08-22T13:34:19.000Z" title="2019-08-22T13:34:19.000Z">2019-08-22</time>发表</span><span class="level-item"><time dateTime="2019-08-22T13:34:19.000Z" title="2019-08-22T13:34:19.000Z">2019-08-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/">大学课程</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/Web%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">Web程序设计</a></span><span class="level-item">26 分钟读完 (大约3921个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span><span class="level-item"><a target="_blank" rel="noopener" href="https://github.com/tootal/blog/edit/master/source/_posts/webdev-setup.md"><i class="far fa-edit"></i></a></span></div></div><h1 class="title is-3 is-size-4-mobile">Windows下Web开发环境搭建</h1><div class="content"><p>虽然Web程序大多运行在Linux服务器上，从兼容性角度来说，当然是在与服务器一致的环境下开发最好。但是我本地的机器是Windows系统，实在要用Linux的时候是采用虚拟机的方式。在虚拟机里面写代码着实麻烦，因此还是决定在Windows下搭建一套Web开发环境，方便测试。</p>
<p>我选择的Web开发组件是WNMP（Windows+Nginx+MySQL+PHP）。</p>
<a id="more"></a>
<h2 id="Nginx下载安装启动">Nginx下载安装启动<a class="header-anchor" href="#Nginx下载安装启动">#</a></h2>
<p><a target="_blank" rel="noopener" href="http://nginx.org/">Nginx</a> (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。目前我主要使用它的HTTP代理功能。在<a target="_blank" rel="noopener" href="http://nginx.org/en/download.html">下载页面</a>可以选择需要的版本下载，用于测试可以选择Mainline version，当前的最新版本是1.19.0。我直接使用<a target="_blank" rel="noopener" href="https://scoop.sh/">Scoop</a>安装。</p>
<p>安装好后在命令行窗口运行：<code>start nginx</code>。（注意直接运行<code>nginx</code>可能导致命令行无法退出）</p>
<p>如果出现以下错误信息：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">nginx: [<span class="title">alert</span>] <span class="title">could</span> <span class="title">not</span> <span class="title">open</span> <span class="title">error</span> <span class="title">log</span> <span class="title">file</span>: <span class="title">CreateFile</span>() &quot;<span class="title">logs</span>/<span class="title">error.log</span>&quot; <span class="title">failed</span> </span></span><br><span class="line"><span class="function">(3: <span class="title">The</span> <span class="title">system</span> <span class="title">cannot</span> <span class="title">find</span> <span class="title">the</span> <span class="title">path</span> <span class="title">specified</span>)  </span></span><br><span class="line"><span class="function">2020/06/14 21:39:05 [<span class="title">emerg</span>] 1444#13520: <span class="title">CreateFile</span>() &quot;<span class="title">C</span>:\<span class="title">Users</span>\<span class="title">awesome</span>/<span class="title">conf</span>/<span class="title">nginx.conf</span>&quot; <span class="title">failed</span> </span></span><br><span class="line"><span class="function">(3: <span class="title">The</span> <span class="title">system</span> <span class="title">cannot</span> <span class="title">find</span> <span class="title">the</span> <span class="title">path</span> <span class="title">specified</span>)   </span></span><br></pre></td></tr></table></figure>
<p>说明当前路径不对，需要到安装目录下运行，我这里是[C:\Users\awesome\scoop\apps\nginx\current](file:///C:/Users/awesome/scoop/apps/nginx/current)，或者利用<code>-p</code>选项指定安装路径也可以。允许通过防火墙后，就运行成功了。注意命令行界面是没有显示的。可以打开浏览器，访问<a target="_blank" rel="noopener" href="http://localhost/">http://localhost/</a>，如果出现以下画面就说明安装成功了。</p>
<p><img src="/asset/20200614214232884_15842.webp" alt=""></p>
<p>如果要停止Nginx，可以输入<code>nginx -s stop</code>，官网的简短的<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/beginners_guide.html">使用说明</a>可以参考一下。</p>
<h2 id="将Nginx注册成系统服务">将Nginx注册成系统服务<a class="header-anchor" href="#将Nginx注册成系统服务">#</a></h2>
<p>如果想让Nginx自动运行，最好的办法是把它注册成系统服务。我这里使用了<a target="_blank" rel="noopener" href="https://github.com/winsw/winsw">winsw</a>这个小工具。在<a target="_blank" rel="noopener" href="https://github.com/winsw/winsw/releases">下载页面</a>选择合适的版本下载，我选的是<a target="_blank" rel="noopener" href="https://github.com/winsw/winsw/releases/download/v2.9.0/WinSW.NET461.exe">WinSW.NET461.exe</a>，可以同时下载一份配置文件<a target="_blank" rel="noopener" href="https://github.com/winsw/winsw/releases/download/v2.9.0/sample-minimal.xml">sample-minimal.xml</a>。</p>
<p>下载好后，参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/defonds/article/details/7906005">这篇博客</a>进行配置。我就简单记录一下我的配置过程。将WinSW.NET461.exe复制一份到[nginx.exe所在目录](file:///C:/Users/awesome/scoop/apps/nginx/current)，重命名为nginx-server.exe，在同目录下创建配置文件nginx-server.xml，内容如下：（<a target="_blank" rel="noopener" href="https://github.com/winsw/winsw/blob/master/doc/xmlConfigFile.md">配置文档</a>）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>nginx<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nginx<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>nginx [engine x] is an HTTP and reverse proxy server, a mail proxy server, and a generic TCP/UDP proxy server, originally written by Igor Sysoev. <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executable</span>&gt;</span>C:\Users\awesome\scoop\apps\nginx\current\nginx.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">startarguments</span>&gt;</span>-p C:\Users\awesome\scoop\apps\nginx\current<span class="tag">&lt;/<span class="name">startarguments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stoparguments</span>&gt;</span>-p C:\Users\awesome\scoop\apps\nginx\current -s stop<span class="tag">&lt;/<span class="name">stoparguments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在当前目录下<strong>以管理员权限</strong>打开命令提示符运行以下命令安装服务：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">awesome</span>\<span class="title">scoop</span>\<span class="title">apps</span>\<span class="title">nginx</span>\<span class="title">current</span>&gt;<span class="title">nginx</span>-<span class="title">server.exe</span> <span class="title">install</span></span></span><br><span class="line"><span class="function">2020-06-14 22:00:46,957 <span class="title">INFO</span>  - <span class="title">Installing</span> <span class="title">the</span> <span class="title">service</span> <span class="title">with</span> <span class="title">id</span> &#x27;<span class="title">nginx</span>&#x27;     </span></span><br></pre></td></tr></table></figure>
<p>在命令行下可以使用sc命令查询服务情况（注意该命令在PowerShell下需要改为sc.exe）：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">awesome</span>\<span class="title">scoop</span>\<span class="title">apps</span>\<span class="title">nginx</span>\<span class="title">current</span>&gt;<span class="title">sc</span> <span class="title">query</span> <span class="title">nginx</span>   </span></span><br><span class="line"><span class="function"><span class="title">SERVICE_NAME</span>: <span class="title">nginx</span>                                                                                                             <span class="title">TYPE</span>               : 10  <span class="title">WIN32_OWN_PROCESS</span> </span></span><br><span class="line"><span class="function"><span class="title">STATE</span>              : 1  <span class="title">STOPPED</span></span></span><br><span class="line"><span class="function"><span class="title">WIN32_EXIT_CODE</span>    : 1077  (0<span class="title">x435</span>)</span></span><br><span class="line"><span class="function"><span class="title">SERVICE_EXIT_CODE</span>  : 0  (0<span class="title">x0</span>)</span></span><br><span class="line"><span class="function"><span class="title">CHECKPOINT</span>         : 0<span class="title">x0</span></span></span><br><span class="line"><span class="function"><span class="title">WAIT_HINT</span>          : 0<span class="title">x0</span>  </span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/sc-query">sc query命令文档</a></p>
<p>可以看到目前Nginx服务是关闭的，如果之前运行的nginx.exe还在运行可以在任务管理器中结束任务。此时应该是无法访问localhost的了。接下来使用服务运行nginx。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">awesome</span>\<span class="title">scoop</span>\<span class="title">apps</span>\<span class="title">nginx</span>\<span class="title">current</span>&gt;<span class="title">net</span> <span class="title">start</span> <span class="title">nginx</span></span></span><br><span class="line"><span class="function"><span class="title">nginx</span> 服务正在启动 .  </span></span><br><span class="line"><span class="function"><span class="title">nginx</span> 服务已经启动成功。 </span></span><br></pre></td></tr></table></figure>
<p>或者直接使用sc命令：<code>sc start nginx</code>。这两个命令有略微的区别，sc命令会马上退出，此时nginx在等待启动，而net命令则会等到服务启动完成后再退出。</p>
<p>以后系统开机会自动运行Nginx服务，如果想取消可以使用<code>sc config nginx start= demand</code>命令改为手动运行。</p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/sc-config">sc config命令文档</a>，注意等号后面的空格是比不可少的，参考<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/sc-config#remarks">这里</a>。</p>
<h2 id="配置Nginx作为静态服务器">配置Nginx作为静态服务器<a class="header-anchor" href="#配置Nginx作为静态服务器">#</a></h2>
<p>假设现在写了一个简单的html文件，如何让nginx代理我的文件而不是默认的<code>Welcome to Nginx！</code>文件呢？下面记录几种方法：</p>
<p>假设HTML文件内容如下（来自<a target="_blank" rel="noopener" href="https://getbootstrap.com/docs/4.5/getting-started/introduction/#starter-template">Bootstrap</a>）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Required meta tags --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Bootstrap CSS --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Optional JavaScript --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.5.1.slim.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>保存到如下路径：[C:\Users\awesome\Documents\Projects\www\index.html](file:///C:/Users/awesome/Documents/Projects/www/index.html)，双击html文件，可以正常打开（使用file协议）。在Nginx安装目录附近找一下，可以找到Nginx的HTML文件的[默认位置](file:///C:/Users/awesome/scoop/persist/nginx/html)，把里面的html文件替换即可。</p>
<p>这时候打开localhost出现的就是新创建的HTML文件了。</p>
<p><img src="/asset/20200614225450450_9422.webp" alt=""></p>
<p>如果不想更改文件夹位置，可以选择更改Nginx的配置，在[conf文件夹](file:///C:/Users/awesome/scoop/apps/nginx/current/conf)下有一个文件名为<code>nginx.conf</code>的文件。内容大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    ...</span><br><span class="line">    server &#123;</span><br><span class="line">        ...</span><br><span class="line">        location &#x2F; &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中root指定的就是网站根目录对应的路径。<a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html?&amp;_ga=2.77077269.1296545611.1592147608-197645587.1592147608#root">root指令文档</a>。其他配置可以参考<a target="_blank" rel="noopener" href="https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/">Configuring NGINX and NGINX Plus as a Web Server</a>。</p>
<p>注意：Windows下路径中的<code>\</code>需要转义。我这里改成：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    ...</span><br><span class="line">    server &#123;</span><br><span class="line">        ...</span><br><span class="line">        location &#x2F; &#123;</span><br><span class="line">            #root   html;</span><br><span class="line">            root C:\\Users\\awesome\\Documents\\Projects\\www;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了验证改动生效了，我把标题改成了<code>Hello, new world!</code>。重新启动nginx服务（可以先停止、再启动），打开localhost即可查看效果。</p>
<p><img src="/asset/20200614234424065_3762.webp" alt=""></p>
<p>如果想再添加一个服务器，可以参考：<a target="_blank" rel="noopener" href="https://docs.nginx.com/nginx/admin-guide/web-server/web-server/#virtual-server">Setting Up Virtual Servers</a>。</p>
<p>实际上，重新加载配置是不需要重新启动Nginx服务的，可以使用<code>nginx -s reload </code>来<a target="_blank" rel="noopener" href="https://docs.nginx.com/nginx/admin-guide/basic-functionality/managing-configuration-files/#reloading-configuration">重新加载</a>配置文件。（如果用服务方式启动，不要使用这种方式）</p>
<p>注意：<code>start nginx</code>和<code>net start nginx</code>两种启动方式不要混用，否则会启动多个nginx实例，造成冲突。</p>
<h2 id="PHP下载安装运行">PHP下载安装运行<a class="header-anchor" href="#PHP下载安装运行">#</a></h2>
<p>PHP即“超文本预处理器”，是一种通用开源脚本语言。PHP是在服务器端执行的脚本语言，与C语言类似，是常用的网站编程语言。PHP独特的语法混合了C、Java、Perl以及 PHP 自创的语法。利于学习，使用广泛，主要适用于Web开发领域。</p>
<p>打开<a target="_blank" rel="noopener" href="https://windows.php.net/download">PHP的下载页面</a>，一般可以选择Non Thread Safe（nts）版本。解压安装好后，在[安装目录下](file:///C:/Users/awesome/scoop/apps/php/current)以管理员权限打开命令提示符，输入命令运行服务：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">awesome</span>\<span class="title">scoop</span>\<span class="title">apps</span>\<span class="title">php</span>\<span class="title">current</span>&gt;<span class="title">php</span>-<span class="title">cgi.exe</span> -<span class="title">b</span> <span class="title">localhost</span>:9000</span></span><br></pre></td></tr></table></figure>
<p>运行之后同样没有信息显示，按Ctrl+C可以退出。</p>
<h2 id="Nginx配合PHP">Nginx配合PHP<a class="header-anchor" href="#Nginx配合PHP">#</a></h2>
<p>为了验证php服务运行正常，配置一下Nginx，使得它能解析php文件。同样打开nginx.conf，找到下面这段配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#location ~ \.php$ &#123;</span><br><span class="line">#    root           html;</span><br><span class="line">#    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">#    fastcgi_index  index.php;</span><br><span class="line">#    fastcgi_param  SCRIPT_FILENAME  &#x2F;scripts$fastcgi_script_name;</span><br><span class="line">#    include        fastcgi_params;</span><br><span class="line">#&#125;</span><br></pre></td></tr></table></figure>
<p>改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    root C:\\Users\\awesome\\Documents\\Projects\\www;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>大概解释一下原理吧。<a target="_blank" rel="noopener" href="https://docs.nginx.com/nginx/admin-guide/web-server/web-server/#configuring-locations">location指令</a>用来定位，<code>~</code>表示后面的字符串是一个正则表达式，<code>\.php$</code>匹配所有以<code>.php</code>结尾的字符串，因此当网址以<code>.php</code>结尾时，就会启用下面的配置。前面提到nginx是一个代理服务器，因此它还可以把请求转发到别的服务上，参考<a target="_blank" rel="noopener" href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/#passing-a-request-to-a-proxied-server">Passing a Request to a Proxied Server</a>。这里的fastcgi_pass就是其中一种。通常这些服务还需要读取一些其他信息如HTTP请求头、HTTP参数等，这些信息通过参数传递，定义在fastcgi_params文件中，感兴趣可以查看一下Nginx传递了哪些参数。参考<a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_fastcgi_module.html?&amp;_ga=2.80082711.1296545611.1592147608-197645587.1592147608#variables">这里</a>。<code>$document_root</code>等变量是Nginx内置的变量，指向root的地址，其他变量参考<a target="_blank" rel="noopener" href="https://nginx.org/en/docs/http/ngx_http_core_module.html?&amp;_ga=2.76485781.1296545611.1592147608-197645587.1592147608#variables">这里</a>。</p>
<p>为了方便测试，在首页添加一个链接到info.php。</p>
<p>index.html更改内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, new world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;info.php&quot;</span>&gt;</span>PHP Info<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>同目录下新建info.php，内容：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> phpinfo(); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>显示效果：</p>
<p><img src="/asset/20200615081958300_27651.webp" alt=""></p>
<p><img src="/asset/20200615082022414_11747.webp" alt=""></p>
<p>说明PHP运行成功。</p>
<h2 id="将PHP配置成系统服务">将PHP配置成系统服务<a class="header-anchor" href="#将PHP配置成系统服务">#</a></h2>
<p>把PHP配置成系统服务可以参考<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5f355f89804a">这里</a>。同样简单记录一下我的配置方法。先下载<a target="_blank" rel="noopener" href="https://github.com/kohsuke/winsw/releases">winsw</a>和<a target="_blank" rel="noopener" href="https://github.com/78/xxfpm">xxfpm</a>  （winsw记得同时下载配置文件，xxfpm下载源代码即可）</p>
<p>将下载的xxfpm.exe 和 pthreadGC2.dll 扔进php-cgi.exe所在的目录，同样添加winsw的程序（php-server.exe）和配置文件（php-server.xml）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>php<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>PHP<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">PHP is a popular general-purpose scripting language that is especially suited to web development.</span><br><span class="line">Fast, flexible and pragmatic, PHP powers everything from your blog to the most popular websites in the world.</span><br><span class="line"><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executable</span>&gt;</span>C:\Users\awesome\scoop\apps\php\current\xxfpm.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>&quot;C:\Users\awesome\scoop\apps\php\current\php-cgi.exe&quot;<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>-n<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>1<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>-i<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>127.0.0.1<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>-p<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">startargument</span>&gt;</span>9000<span class="tag">&lt;/<span class="name">startargument</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">stopexecutable</span>&gt;</span>taskkill<span class="tag">&lt;/<span class="name">stopexecutable</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">stopargument</span>&gt;</span>/F<span class="tag">&lt;/<span class="name">stopargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">stopargument</span>&gt;</span>/IM<span class="tag">&lt;/<span class="name">stopargument</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">stopargument</span>&gt;</span>xxfpm.exe<span class="tag">&lt;/<span class="name">stopargument</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>放置好后大概这个效果：</p>
<p><img src="/asset/20200615082629264_15097.webp" alt=""></p>
<p><strong>以管理员权限</strong>运行cmd：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">awesome</span>\<span class="title">scoop</span>\<span class="title">apps</span>\<span class="title">php</span>\<span class="title">current</span>&gt;<span class="title">php</span>-<span class="title">server.exe</span> <span class="title">install</span></span></span><br><span class="line"><span class="function">2020-06-15 08:26:49,876 <span class="title">INFO</span>  - <span class="title">Installing</span> <span class="title">the</span> <span class="title">service</span> <span class="title">with</span> <span class="title">id</span> &#x27;<span class="title">php</span>&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="用PowerShell查询服务">用PowerShell查询服务<a class="header-anchor" href="#用PowerShell查询服务">#</a></h2>
<p>默认情况下sc命令在PowerShell是不起作用的。</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; <span class="built_in">Get-Alias</span> <span class="literal">-name</span> <span class="built_in">sc</span></span><br><span class="line">CommandType     Name          </span><br><span class="line">-----------     ----   </span><br><span class="line">Alias           <span class="built_in">sc</span> -&gt; <span class="built_in">Set-Content</span>                                  </span><br></pre></td></tr></table></figure>
<p>可以看到sc是Set-Content的别名。一种简单的方法是使用sc.exe</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; sc.exe query nginx</span><br><span class="line">SERVICE_NAME: nginx                                                                                                             <span class="built_in">TYPE</span>               : <span class="number">10</span>  WIN32_OWN_PROCESS</span><br><span class="line">STATE              : <span class="number">1</span>  STOPPED</span><br><span class="line">WIN32_EXIT_CODE    : <span class="number">0</span>  (<span class="number">0</span>x0)</span><br><span class="line">SERVICE_EXIT_CODE  : <span class="number">0</span>  (<span class="number">0</span>x0)</span><br><span class="line">CHECKPOINT         : <span class="number">0</span>x0</span><br><span class="line">WAIT_HINT          : <span class="number">0</span>x0       </span><br></pre></td></tr></table></figure>
<p>可惜的是sc别名是只读的，没法更改。</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; <span class="built_in">Set-Alias</span> <span class="literal">-Name</span> <span class="built_in">sc</span> <span class="literal">-Value</span> sc.exe</span><br><span class="line"><span class="built_in">Set-Alias</span> : 别名不可写入，因为别名 <span class="built_in">sc</span> 为只读别名或常量，无法写入。</span><br><span class="line">所在位置 行:<span class="number">1</span> 字符: <span class="number">1</span> </span><br><span class="line">+ <span class="built_in">Set-Alias</span> <span class="literal">-Name</span> <span class="built_in">sc</span> <span class="literal">-Value</span> sc.exe</span><br><span class="line">+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">+ CategoryInfo          : WriteError: (<span class="built_in">sc</span>:String) [<span class="built_in">Set-Alias</span>], SessionStateUnauthorizedAccessException </span><br><span class="line">+ FullyQualifiedErrorId : AliasNotWritable,Microsoft.PowerShell.Commands.SetAliasCommand</span><br></pre></td></tr></table></figure>
<p>查询PHP服务是否正确安装：</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; sc.exe query php</span><br><span class="line">SERVICE_NAME: php                                                                                                               <span class="built_in">TYPE</span>               : <span class="number">10</span>  WIN32_OWN_PROCESS</span><br><span class="line">STATE              : <span class="number">1</span>  STOPPED</span><br><span class="line">WIN32_EXIT_CODE    : <span class="number">1077</span>  (<span class="number">0</span>x435)</span><br><span class="line">SERVICE_EXIT_CODE  : <span class="number">0</span>  (<span class="number">0</span>x0)</span><br><span class="line">CHECKPOINT         : <span class="number">0</span>x0</span><br><span class="line">WAIT_HINT          : <span class="number">0</span>x0     </span><br></pre></td></tr></table></figure>
<p>启动PHP服务，注意之前启动的要先关闭。</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; sudo net <span class="built_in">start</span> php</span><br><span class="line">php 服务正在启动 . </span><br><span class="line">php 服务已经启动成功。 </span><br></pre></td></tr></table></figure>
<p>我这里使用了scoop提供的sudo命令，它可以暂时提升为管理员权限，如果没有这个命令可以再打开一个管理员权限的窗口。</p>
<h2 id="MySQL安装配置">MySQL安装配置<a class="header-anchor" href="#MySQL安装配置">#</a></h2>
<p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p>
<p>可以在<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/">下载页面</a>选择合适的版本下载安装，如果只需要命令行界面的话可以下载<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">ZIP包</a>，我同样使用Scoop命令行安装。由于MySQL自带了配置服务，因此安装非常简单，参考以下配置过程：</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; sudo mysqld -<span class="literal">-install</span> mysql -<span class="literal">-defaults</span><span class="operator">-file</span>=<span class="string">&quot;C:\Users\awesome\scoop\apps\mysql\current\my.ini&quot;</span></span><br><span class="line">Service successfully installed.</span><br><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; sudo net <span class="built_in">start</span> mysql</span><br><span class="line">mysql 服务正在启动 .  </span><br><span class="line">mysql 服务已经启动成功。</span><br><span class="line"><span class="built_in">PS</span> C:\Users\awesome&gt; mysql</span><br><span class="line">Welcome to the MySQL monitor.  Commands <span class="keyword">end</span> with ; or \g.</span><br><span class="line">Your MySQL connection id is <span class="number">8</span></span><br><span class="line">Server version: <span class="number">8.0</span>.<span class="number">20</span> MySQL Community Server - GPL</span><br><span class="line">Copyright (c) <span class="number">2000</span>, <span class="number">2020</span>, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line"><span class="built_in">Type</span> <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> help. <span class="built_in">Type</span> <span class="string">&#x27;\c&#x27;</span> to <span class="built_in">clear</span> the current input statement.</span><br><span class="line">mysql&gt; SHOW DATABASES;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line"><span class="number">4</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.01</span> sec)    </span><br></pre></td></tr></table></figure>
<p>如果安装服务失败，可以尝试删除之前的安装文件，如Scoop的persist。</p>
<h2 id="PHP连接MySQL">PHP连接MySQL<a class="header-anchor" href="#PHP连接MySQL">#</a></h2>
<p>首先启用PHP扩展。</p>
<p>打开[PHP安装目录](file:///C:/Users/awesome/scoop/apps/php/current)，首先需要设置一下<a target="_blank" rel="noopener" href="https://www.php.net/configuration.file">PHP的配置文件</a>。找到<code>php.ini-development</code>文件，将它复制一份改名为<code>php.ini</code>。更改以下几个地方：</p>
<p>启用扩展目录：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; Directory in which the loadable extensions (modules) reside.</span></span><br><span class="line"><span class="comment">; http://php.net/extension-dir</span></span><br><span class="line"><span class="comment">;extension_dir = &quot;./&quot;</span></span><br><span class="line"><span class="comment">; On windows:</span></span><br><span class="line"><span class="attr">extension_dir</span> = <span class="string">&quot;ext&quot;</span></span><br></pre></td></tr></table></figure>
<p>设置时区：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Date]</span></span><br><span class="line"><span class="comment">; Defines the default timezone used by the date functions</span></span><br><span class="line"><span class="comment">; http://php.net/date.timezone</span></span><br><span class="line"><span class="attr">date.timezone</span> = Asia/Shanghai</span><br></pre></td></tr></table></figure>
<p>之后需要启用扩展可以在对应的模块取消注释或添加即可。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;;;;;;;;;;;;;;;;;;;;;;</span></span><br><span class="line"><span class="comment">; Dynamic Extensions ;</span></span><br><span class="line"><span class="comment">;;;;;;;;;;;;;;;;;;;;;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; If you wish to have an extension loaded automatically, use the following</span></span><br><span class="line"><span class="comment">; syntax:</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;   extension=modulename</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">; For example:</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;   extension=mysqli</span></span><br></pre></td></tr></table></figure>
<h2 id="安装使用phpMyAdmin">安装使用phpMyAdmin<a class="header-anchor" href="#安装使用phpMyAdmin">#</a></h2>
<p>为了验证PHP与MySQL的正确安装配合，安装phpMyAdmin进行测试。同时方便对数据库进行管理。phpMyAdmin是一个非常受欢迎的基于web的MySQL数据库管理工具。它能够创建和删除数据库，创建/删除/修改表格，删除/编辑/新增字段，执行SQL脚本等。在<a target="_blank" rel="noopener" href="https://www.phpmyadmin.net/">官网</a>下载即可。下载完成后解压，文件夹放到Nginx代理目录下。在index.html中添加一个入口：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;info.php&quot;</span>&gt;</span>PHP Info<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;phpMyAdmin-5.0.2-all-languages/&quot;</span>&gt;</span>phpMyAdmin<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/asset/20200615091024411_6210.webp" alt=""></p>
<p>这时候如果直接访问可能会出现403 Forbidden错误，这是因为默认的首页文件是index.html或index.htm，而phpMyAdmin提供的首页文件是index.php。我们可以改一下nginx的配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F; &#123;</span><br><span class="line">    #root   html;</span><br><span class="line">    root C:\\Users\\awesome\\Documents\\Projects\\www;</span><br><span class="line">    index  index.html index.htm index.php;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重启一下Nginx，就可以访问了。</p>
<p><img src="/asset/20200615091954048_15547.webp" alt=""></p>
<p>根据提示，在php.ini配置文件中启用mysqli扩展。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;extension=mbstring</span></span><br><span class="line"><span class="comment">;extension=exif      ; Must be after mbstring as it depends on it</span></span><br><span class="line"><span class="attr">extension</span>=mysqli</span><br><span class="line"><span class="comment">;extension=oci8_12c  ; Use with Oracle Database 12c Instant Client</span></span><br><span class="line"><span class="comment">;extension=odbc</span></span><br></pre></td></tr></table></figure>
<p>重新启动php服务：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\awesome&gt; sudo <span class="built_in">net</span> stop php</span><br><span class="line">php 服务正在停止.</span><br><span class="line">php 服务已成功停止。</span><br><span class="line"></span><br><span class="line">PS C:\Users\awesome&gt; sudo <span class="built_in">net</span> <span class="built_in">start</span> php</span><br><span class="line">php 服务正在启动 .</span><br><span class="line">php 服务已经启动成功。   </span><br></pre></td></tr></table></figure>
<p>此时就能正常启动了。</p>
<p><img src="/asset/20200615092303332_31879.webp" alt=""></p>
<p>默认是禁止空密码登录的，也可以启用。在phpMyAdmin根目录下找到config.sample.inc.php，复制为config.inc.php。</p>
<p><img src="/asset/20200615092641553_20205.webp" alt=""></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cfg</span>[<span class="string">&#x27;Servers&#x27;</span>][<span class="variable">$i</span>][<span class="string">&#x27;AllowNoPassword&#x27;</span>] = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>修改好后就可以直接用root账号登录了，密码不用输入即可。</p>
<p><img src="/asset/20200615092903752_5647.webp" alt=""></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Windows下Web开发环境搭建</p><p><a href="https://blog.tootal.xyz/posts/webdev-setup/">https://blog.tootal.xyz/posts/webdev-setup/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>黄智权</p></div></div><div class="level-item is-narrow"><div><h6>本文发布于</h6><p>2019-08-22</p></div></div><div class="level-item is-narrow"><div><h6>本文更新于</h6><p>2019-08-22</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Web/">Web</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="http://afdian.net/@tootal" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/asset/alipay.webp" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/asset/wechat_pay.webp" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/why-blog/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">为什么要写博客？</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/java-review/"><span class="level-item">2019 Java 复习题</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo@1.2.0/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'tootal-6g2y019v6b37e4be',
      region: 'ap-guangzhou',
      path: "'/posts/webdev-setup/'",
      katex: {
        delimiters: 
        [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false}
        ],
        throwOnError: false
      }
    });</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Nginx下载安装启动"><span class="level-left"><span class="level-item">Nginx下载安装启动</span></span></a></li><li><a class="level is-mobile" href="#将Nginx注册成系统服务"><span class="level-left"><span class="level-item">将Nginx注册成系统服务</span></span></a></li><li><a class="level is-mobile" href="#配置Nginx作为静态服务器"><span class="level-left"><span class="level-item">配置Nginx作为静态服务器</span></span></a></li><li><a class="level is-mobile" href="#PHP下载安装运行"><span class="level-left"><span class="level-item">PHP下载安装运行</span></span></a></li><li><a class="level is-mobile" href="#Nginx配合PHP"><span class="level-left"><span class="level-item">Nginx配合PHP</span></span></a></li><li><a class="level is-mobile" href="#将PHP配置成系统服务"><span class="level-left"><span class="level-item">将PHP配置成系统服务</span></span></a></li><li><a class="level is-mobile" href="#用PowerShell查询服务"><span class="level-left"><span class="level-item">用PowerShell查询服务</span></span></a></li><li><a class="level is-mobile" href="#MySQL安装配置"><span class="level-left"><span class="level-item">MySQL安装配置</span></span></a></li><li><a class="level is-mobile" href="#PHP连接MySQL"><span class="level-left"><span class="level-item">PHP连接MySQL</span></span></a></li><li><a class="level is-mobile" href="#安装使用phpMyAdmin"><span class="level-left"><span class="level-item">安装使用phpMyAdmin</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">头头博客</a><p class="is-size-7"><span>&copy; 2021 黄智权</span><span>&nbsp;&nbsp; 由 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>&nbsp;&&nbsp;<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a> 驱动</span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span><br><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">赣ICP备20007667号-1</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="View on GitHub" href="https://github.com/tootal/tootal.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/mhchem.js" defer></script><script>
    var katex_config = {
      delimiters: 
      [
        {left: "$$", right: "$$", display: true},
        {left: "$", right: "$", display: false}
      ],
      strict: false,
      throwOnError: false
    };
    window.addEventListener("load", function() {
      document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
        renderMathInElement(element, katex_config);
      });
      document.querySelectorAll('#toc .level-item').forEach(function(element) {
        renderMathInElement(element, katex_config);
      });
    });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>