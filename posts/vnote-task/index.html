<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>给VNote添加任务系统 - 头头博客</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#fff"><meta name="application-name" content="头头博客"><meta name="msapplication-TileImage" content="/asset/favicon144.png"><meta name="msapplication-TileColor" content="#fff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="头头博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="96x96" href="/asset/favicon96.png"><link rel="apple-touch-icon" sizes="144x144" href="/asset/favicon144.png"><link rel="apple-touch-icon" sizes="192x192" href="/asset/favicon192.png"><meta name="description" content="VNote是一款专为Markdown设计的Vim风格笔记应用程序。目前使用已经两年多了，平时用来记录、摘抄都挺方便的。略有不方便的地方就是VNote不能方便地运行一些外部工具，例如：  通过Git进行笔记的版本控制 将多个终端的笔记通过坚果云进行同步 将写好的Markdown文档通过Hexo渲染预览并发布 调用外部编辑器如Typora或是VS Code进行进一步编辑  在本文中，我将为VNote设"><meta property="og:type" content="blog"><meta property="og:title" content="给VNote添加任务系统"><meta property="og:url" content="https://blog.tootal.xyz/posts/vnote-task/"><meta property="og:site_name" content="头头博客"><meta property="og:description" content="VNote是一款专为Markdown设计的Vim风格笔记应用程序。目前使用已经两年多了，平时用来记录、摘抄都挺方便的。略有不方便的地方就是VNote不能方便地运行一些外部工具，例如：  通过Git进行笔记的版本控制 将多个终端的笔记通过坚果云进行同步 将写好的Markdown文档通过Hexo渲染预览并发布 调用外部编辑器如Typora或是VS Code进行进一步编辑  在本文中，我将为VNote设"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.tootal.xyz/asset/vnote-task.cover.png"><meta property="article:published_time" content="2021-01-28T14:09:41.000Z"><meta property="article:modified_time" content="2021-01-29T07:40:16.000Z"><meta property="article:author" content="黄智权"><meta property="article:tag" content="C++"><meta property="article:tag" content="Qt"><meta property="article:tag" content="VNote"><meta property="article:tag" content="技术"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/asset/vnote-task.cover.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tootal.xyz/posts/vnote-task/"},"headline":"头头博客","image":["https://blog.tootal.xyz/asset/vnote-task.cover.png"],"datePublished":"2021-01-28T14:09:41.000Z","dateModified":"2021-01-29T07:40:16.000Z","author":{"@type":"Person","name":"黄智权"},"description":"VNote是一款专为Markdown设计的Vim风格笔记应用程序。目前使用已经两年多了，平时用来记录、摘抄都挺方便的。略有不方便的地方就是VNote不能方便地运行一些外部工具，例如：  通过Git进行笔记的版本控制 将多个终端的笔记通过坚果云进行同步 将写好的Markdown文档通过Hexo渲染预览并发布 调用外部编辑器如Typora或是VS Code进行进一步编辑  在本文中，我将为VNote设"}</script><link rel="canonical" href="https://blog.tootal.xyz/posts/vnote-task/"><link rel="icon" href="/asset/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?a0752fdc3e7a9d538e1cb45af25201a4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="头头博客" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">头头博客</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">存档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" target="_blank" rel="noopener" href="https://note.tootal.xyz">笔记</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="View on GitHub" href="https://github.com/tootal/tootal.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/asset/vnote-task.cover.png" alt="给VNote添加任务系统"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-28T14:09:41.000Z" title="2021-01-28T14:09:41.000Z">2021-01-28</time>发表</span><span class="level-item"><time dateTime="2021-01-29T07:40:16.000Z" title="2021-01-29T07:40:16.000Z">2021-01-29</time>更新</span><span class="level-item">1 小时读完 (大约10366个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span><span class="level-item"><a target="_blank" rel="noopener" href="https://github.com/tootal/blog/edit/master/source/_posts/vnote-task.md"><i class="far fa-edit"></i></a></span></div></div><h1 class="title is-3 is-size-4-mobile">给VNote添加任务系统</h1><div class="content"><p><a target="_blank" rel="noopener" href="https://vnotex.github.io/vnote/zh_cn/">VNote</a>是一款专为Markdown设计的Vim风格笔记应用程序。目前使用已经两年多了，平时用来记录、摘抄都挺方便的。略有不方便的地方就是VNote不能方便地运行一些外部工具，例如：</p>
<ul>
<li>通过<a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a>进行笔记的版本控制</li>
<li>将多个终端的笔记通过<a target="_blank" rel="noopener" href="https://help.jianguoyun.com/?p=2064">坚果云</a>进行同步</li>
<li>将写好的Markdown文档通过<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a>渲染预览并发布</li>
<li>调用外部编辑器如<a target="_blank" rel="noopener" href="https://typora.io/">Typora</a>或是<a target="_blank" rel="noopener" href="https://code.visualstudio.com/">VS Code</a>进行进一步编辑</li>
</ul>
<p>在本文中，我将为VNote设计实现一个任务系统来运行外部工具，从而解决上面这些问题。</p>
<a id="more"></a>
<p>这些常用的功能大多可以通过运行命令行工具来完成，鉴于它们的常用性，有必要将其集成在VNote内部，这样无需在需要调用外部工具时输入命令行，或是编写代码。在 <a target="_blank" rel="noopener" href="https://github.com/vnotex/vnote/releases/tag/v2.10">VNote 2.10</a> 版本中，添加了调用Git的功能。但局限性较大，无法进行扩展。</p>
<h2 id="相关介绍">相关介绍<a class="header-anchor" href="#相关介绍">#</a></h2>
<p>目前许多文本编辑器或是IDE都有执行外部命令的功能，它们的可配置性较高。例如VSCode的<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/tasks">Tasks</a> 、Sublime Text的<a target="_blank" rel="noopener" href="https://www.sublimetext.com/docs/3/build_systems.html">Build Systems</a> 、IntelliJ IDEA的<a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/idea/2020.3/settings-tools-external-tools.html">External Tools</a> 、Qt Creator的<a target="_blank" rel="noopener" href="https://doc.qt.io/qtcreator/creator-editor-external.html">External Tools</a> 以及Visual Studio的<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/visualstudio/ide/managing-external-tools?f1url=%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(VS.ExternalTools)%26rd%3Dtrue&amp;view=vs-2019">External tools</a> 。VNote的任务系统主要参考的是VSCode的<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/tasks">Tasks</a> ，并结合了其它实现的一些优点。由于VNote <a target="_blank" rel="noopener" href="https://github.com/vnotex/vnote/tree/vnote2.0">v2版本代码</a>不再维护，且v3版本已处于beta阶段，因此任务系统首先考虑在v3版本添加。此外，由于内容较多，下面列出的一些功能仅仅是设计阶段的一些想法，并未完全实现。尚未实现的功能均有所标注。</p>
<p>要知道运行什么任务、如何运行，必须进行配置。综合来看，目前的配置方式主要分为两大类：编写配置文件、图形化配置界面。其中VSCode采用的是<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/tasks-appendix">.vscode/tasks.json</a>配置文件，Sublime Text采用的是<a target="_blank" rel="noopener" href="https://www.sublimetext.com/docs/3/build_systems.html#options">name.sublime-build</a>配置文件，均为类似JSON格式的配置文件。配置文件示例如下所示：</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#taskconfig-VSCode配置文件">
                        VSCode配置文件
                    </a>
                   </li><li class="tab ">
                    <a href="#taskconfig-Sublime Text配置文件">
                        Sublime Text配置文件
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="taskconfig-VSCode配置文件" class="tab-content "><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// See https://go.microsoft.com/fwlink/?LinkId=733558</span></span><br><span class="line">    <span class="comment">// for the documentation about the tasks.json format</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;2.0.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Run tests&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;shell&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;./scripts/test.sh&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;windows&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;.\\scripts\\test.cmd&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;presentation&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;reveal&quot;</span>: <span class="string">&quot;always&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;panel&quot;</span>: <span class="string">&quot;new&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="taskconfig-Sublime Text配置文件" class="tab-content is-hidden"><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;shell_cmd&quot;</span>: <span class="string">&quot;g++ \&quot;$&#123;file&#125;\&quot; -o \&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;file_regex&quot;</span>: <span class="string">&quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;working_dir&quot;</span>: <span class="string">&quot;$&#123;file_path&#125;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;selector&quot;</span>: <span class="string">&quot;source.c++&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;variants&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Run&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shell_cmd&quot;</span>: <span class="string">&quot;g++ \&quot;$&#123;file&#125;\&quot; -o \&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\&quot; &amp;&amp; \&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<p>其余IDE大多采用图形化配置，如下图所示。</p>
<div class="justified-gallery my-3"> <p><img src="/asset/20210127163819794_16451.png" alt="Visual Studio的External Tools"><br>
<img src="/asset/20210127164032786_2913.png" alt="IntelliJ IDEA的External Tools"><br>
<img src="/asset/20210127164143272_23092.png" alt="Qt Creator的External Tools"></p>
 </div>
<p>考虑到目前VNote也是主要采用JSON格式的配置文件，因此任务系统也通过JSON文件进行配置。后续会考虑在设置里添加图形化配置方式。</p>
<h2 id="下载开发版本">下载开发版本<a class="header-anchor" href="#下载开发版本">#</a></h2>
<p>目前任务系统仍然处于开发过程中，可以<a target="_blank" rel="noopener" href="https://github.com/tootal/vnote/tree/feat-task">在此</a>查看相关代码。</p>
<p>通过下面的按钮可以下载包含任务系统功能的测试版本：</p>
<p class="buttons are-large"> <a class=" button  is-primary" target="_blank" rel="noopener" href="https://github.com/tootal/vnote/releases/download/continuous-build/vnote-win-x64.zip"><i class="fab 
                            fa-windows mr-2"></i><span>Windows x64</span></a><a class=" button  is-info" target="_blank" rel="noopener" href="https://github.com/tootal/vnote/releases/download/continuous-build/vnote-win-x86.zip"><i class="fab 
                            fa-windows mr-2"></i><span>Windows x86</span></a><a class=" button  is-dark" target="_blank" rel="noopener" href="https://github.com/tootal/vnote/releases/download/continuous-build/vnote-mac-x64.dmg"><i class="fab 
                            fa-apple mr-2"></i><span>macOS</span></a><a class=" button  is-warning" target="_blank" rel="noopener" href="https://github.com/tootal/vnote/releases/download/continuous-build/vnote-linux-x64.AppImage"><i class="fab 
                            fa-linux mr-2"></i><span>Linux</span></a> </p>
<p>如果你对VSCode Task熟悉，想知道它们之间有什么区别，可以直接查看<a href="#VS-Code-Task">对比VSCode Task</a>。</p>
<h2 id="快速上手">快速上手<a class="header-anchor" href="#快速上手">#</a></h2>
<h3 id="Hello-World">Hello World<a class="header-anchor" href="#Hello-World">#</a></h3>
<p>一个最简单的示例莫过于在屏幕上输出<code>helloworld</code>了。通过右上角的设置菜单打开用户配置文件夹。</p>
<p><img src="/asset/20210130205350994_4518.png" alt=""></p>
<p>在<code>tasks</code>文件夹内新建一个<code>hello.json</code>文件，输入如下内容。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;echo helloworld&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>保存文件后，可以发现主菜单多了一个<code>hello</code>菜单项，点击该菜单项即可运行上述任务。</p>
<p><img src="/asset/20210130233534445_30193.png" alt=""></p>
<p>运行任务时会自动弹出下方的输出面板，在输出面板可以查看任务运行过程中的输出信息。如果你看到了<code>helloworld</code>显示在下方的输出面板中，说明任务运行成功了。在默认情况下，VNote会把命令传递给系统默认的命令解释器（Windows平台使用<code>PowerShell.exe</code>，Linux和macOS平台使用<code>/bin/bash</code>）执行，并接收输出的结果显示在输出面板上。对于支持的所有配置项及其含义，请参考<a href="#%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE">任务配置</a>。</p>
<h3 id="自定义菜单项">自定义菜单项<a class="header-anchor" href="#自定义菜单项">#</a></h3>
<p>对于每个任务，VNote会自动在主界面生成一个菜单项与之对应，默认使用文件名或命令值作为菜单名称。通过<code>label</code>、<code>icon</code>以及<code>shortcut</code>可以指定任务的名称（Hello）、图标（<a target="_blank" rel="noopener" href="https://fontawesome.com/icons/tasks?style=solid">tasks-solid.svg</a>）以及快捷键（<code>Alt+H, T</code>）。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Hello&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;tasks-solid.svg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, T&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;echo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;Hello tasks!&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时主界面的菜单项会加上图标及快捷键。按快捷键<code>Alt+H, T</code>即可运行该任务。</p>
<div class="justified-gallery my-3"> <p><img src="/asset/20210131013045872_3571.png" alt="纯净"><br>
<img src="/asset/20210131013811773_17529.png" alt="月夜"><br>
<img src="/asset/20210131013855368_1962.png" alt="原素"></p>
 </div>
<p>提示：尽量使用SVG格式的图标，VNote会根据当前主题调整图标颜色，以达到更好的显示效果。</p>
<p>任务同时还可以包含若干个子任务，支持无限层级的嵌套，在菜单栏中展示为多级子菜单。如下是一个<code>Hello Tasks</code>任务，包含三个子任务<code>Hello Cat</code>、<code>Hello Dove</code>和<code>Hello Fish</code>。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Hello Tasks&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;tasks-solid.svg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, T&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;echo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;Hello tasks!&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Hello Cat&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;cat-solid.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, C&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;Hello cat!&quot;</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Hello Dove&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;dove-solid.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, D&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;Hello dove!&quot;</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Hello Fish&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;fish-solid.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, F&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;Hello fish!&quot;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的子任务没有配置<code>command</code>但依然可以执行，这是因为子任务会从父任务中继承大部分常见属性（如<code>type</code>、<code>command</code>、<code>args</code>）。</p>
<p><img src="/asset/20210131143000015_8523.png" alt=""></p>
<p>注意：请尽量不要在包含子任务的任务中配置命令，因为菜单项的点击操作默认实现为展开下一级菜单，从而导致无法通过点击菜单项来触发任务执行，但仍然可以通过快捷键方式执行任务。</p>
<h3 id="特殊字符处理">特殊字符处理<a class="header-anchor" href="#特殊字符处理">#</a></h3>
<p>当命令或参数包含特殊字符（如空格）时通常需要进行特殊的处理，由于不同命令解释器的语法大相径庭，没有统一的处理方法。默认情况下，VNote会进行如下处理。</p>
<p>当满足下面所有条件时，VNote会自动在<strong>参数</strong>两端加上双引号。</p>
<ul>
<li>当不指定<code>type</code>或<code>type</code>为<code>shell</code></li>
<li>同时指定<code>command</code>和<code>args</code></li>
<li>参数中包含空格</li>
</ul>
<p>当满足下面所有条件时，VNote会用空格分隔将命令和参数合并成一个字符串并在两端加上双引号，同时转义内部的双引号。</p>
<ul>
<li>当不指定<code>type</code>或<code>type</code>为<code>shell</code></li>
<li>当<code>shell</code>为<code>bash</code></li>
</ul>
<p>例如在Linux下运行之前的Hello Tasks 示例，命令将被处理成：（可在运行日志中查看）</p>
<p><code>run task &quot;/bin/bash&quot; (&quot;-c&quot;, &quot;echo \\\&quot;Hello tasks!\\\&quot;&quot;)</code></p>
<p><img src="/asset/20210131150114081_29346.png" alt=""></p>
<p>输出结果两端会出现多余的双引号，通过仅指定<code>command</code>或用<code>process</code>方式启动任务可以手动处理特殊字符。</p>
<h3 id="启动外部程序">启动外部程序<a class="header-anchor" href="#启动外部程序">#</a></h3>
<p>默认情况下<code>command</code>会作为shell命令执行（即默认<code>type</code>为<code>shell</code>），通过指定<code>type</code>为<code>process</code>可以将<code>command</code>作为外部程序运行。下面是一个示例，在Typora或VS Code中打开当前文件。其中<code>$&#123;file&#125;</code>是一个变量，会在运行时替换为当前打开的文件路径。关于变量的更多信息，请参考<a href="#%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2">变量替换</a>。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#openexternal-Windows">
                        <i class="fab 
                            fa-windows mr-2"></i>Windows
                    </a>
                   </li><li class="tab ">
                    <a href="#openexternal-Linux">
                        <i class="fab 
                            fa-linux mr-2"></i>Linux
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="openexternal-Windows" class="tab-content "><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;process&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Open File with&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;$&#123;file&#125;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Typora&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;Typora.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;C:\\Programs\\Typora0.9.98\\x64\\Typora.exe&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;VS Code&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;vscode.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;C:\\Users\\tootal\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/asset/20210131161734576_12333.gif" alt="启动Typora和VSCode"></p></div><div id="openexternal-Linux" class="tab-content is-hidden"><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;process&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Open File with&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;$&#123;file&#125;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Typora&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;Typora.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;/usr/bin/typora&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;VS Code&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;vscode.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;/usr/bin/code&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/asset/20210131165036397_2406.gif" alt="在Typora或VSCode打开当前文件"></p></div>
                  </div>
<p>由于VNote默认不包含控制台窗口，因此启动一些命令行程序时可能会出现问题，此时可以通过<code>shell</code>命令启动一个单独的窗口来解决。对于Windows可以用<code>start vim.exe</code>，对于Linux平台可以用<code>gnome-terminal</code>、<code>konsole</code>或<code>xterm</code>等。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Vim&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;vim.svg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;process&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;gnome-terminal&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;--execute&quot;</span>,</span><br><span class="line">        <span class="string">&quot;vim&quot;</span>,</span><br><span class="line">        <span class="string">&quot;$&#123;file&#125;&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/asset/20210131174128746_9517.gif" alt="在VIM打开当前文件"></p>
<h3 id="多语言与多平台">多语言与多平台<a class="header-anchor" href="#多语言与多平台">#</a></h3>
<p>任务配置文件支持针对特定平台进行配置，通过<code>windows</code>、<code>linux</code>或<code>osx</code>属性可以指定Windows、Linux、macOS平台下特定的配置。平台特定配置会对基础配置进覆盖，但<code>tasks</code>配置会进行合并。例如可以将上面的启动外部程序的配置文件合并，使其在Windows平台和Linux平台均能正常工作。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;process&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Open File with&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;$&#123;file&#125;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Typora&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;Typora.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;windows&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;C:\\Programs\\Typora0.9.98\\x64\\Typora.exe&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;linux&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;/usr/bin/typora&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;VS Code&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;vscode.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;windows&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;C:\\Users\\tootal\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;linux&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;/usr/bin/code&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>任务配置文件也支持多语言配置，对于<code>label</code>、<code>command</code>、<code>args</code>属性，除字符串外还可传入一个<code>LocaleString</code>对象。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;label&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;en_US&quot;</span>: <span class="string">&quot;Hello&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;zh_CN&quot;</span>: <span class="string">&quot;你好&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;tasks-solid.svg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;echo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;en_US&quot;</span>: <span class="string">&quot;Cat&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;zh_CN&quot;</span>: <span class="string">&quot;猫&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;cat-solid.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, C&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;args&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;en_US&quot;</span>: <span class="string">&quot;Hello cat!&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;zh_CN&quot;</span>: <span class="string">&quot;你好，猫！&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;en_US&quot;</span>: <span class="string">&quot;Dove&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;zh_CN&quot;</span>: <span class="string">&quot;鸽子&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;dove-solid.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, D&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;args&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;en_US&quot;</span>: <span class="string">&quot;Hello dove!&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;zh_CN&quot;</span>: <span class="string">&quot;你好，鸽子！&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;label&quot;</span>: <span class="string">&quot;Fish&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;icon&quot;</span>: <span class="string">&quot;fish-solid.svg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;shortcut&quot;</span>: <span class="string">&quot;Alt+H, F&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;args&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;en_US&quot;</span>: <span class="string">&quot;Hello fish!&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;zh_CN&quot;</span>: <span class="string">&quot;你好，鱼！&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/asset/20210131171051185_10427.png" alt=""></p>
<p>注意：切换VNote语言后需要重启才能生效。</p>
<h3 id="任务运行出错">任务运行出错<a class="header-anchor" href="#任务运行出错">#</a></h3>
<p>当任务运行出错时，会在输出面板显示错误消息，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Task Typora error occurred with code 0]</span><br></pre></td></tr></table></figure>
<p>其中<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5.12/qprocess.html#ProcessError-enum">错误代码</a>的含义如下：</p>
<table>
<thead>
<tr>
<th>错误代码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>任务启动失败，可能是命令或参数错误。</td>
</tr>
<tr>
<td>1</td>
<td>任务启动成功，但在运行时崩溃了。</td>
</tr>
<tr>
<td>2</td>
<td>任务运行超时。</td>
</tr>
<tr>
<td>3</td>
<td>尝试读取时出现错误。</td>
</tr>
<tr>
<td>4</td>
<td>尝试写入时出现错误。</td>
</tr>
<tr>
<td>5</td>
<td>未知错误。</td>
</tr>
</tbody>
</table>
<h3 id="笔记本任务配置">笔记本任务配置<a class="header-anchor" href="#笔记本任务配置">#</a></h3>
<p>有些任务并不是每个笔记本都需要执行的，例如“通过<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a>渲染预览并发布”通常仅在特定的笔记本需要，此时可以创建一个笔记本层级的任务配置。VNote任务系统支持如下三个层级的配置文件：</p>
<ul>
<li>全局任务配置：配置文件保存在全局配置文件夹中，软件安装时自动添加。例如<code>C:\Users\tootal\AppData\Roaming\VNote\VNote\tasks</code>文件夹下的<code>*.json</code>文件。</li>
<li>用户任务配置：配置文件保存在用户配置文件夹中，由用户自行添加。例如<code>C:\Users\tootal\AppData\Local\VNote\VNote\tasks</code>文件夹下的<code>*.json</code>文件。</li>
<li>笔记本任务配置：配置文件保存在笔记本文件夹中，由用户自行添加。例如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask\vx_notebook\tasks</code>文件夹下的<code>*.json</code>文件。</li>
</ul>
<p>注意：笔记本层级的任务，如果之前不存在<code>tasks</code>文件夹，需要新建一个并刷新笔记本。</p>
<h2 id="任务配置">任务配置<a class="header-anchor" href="#任务配置">#</a></h2>
<p>在VNote启动时会自动加载任务配置文件，配置文件修改后需要重新启动VNote生效。在上述文件夹及其子文件夹下的<code>*.json</code>文件均会被识别为任务配置文件。一个任务可以包含若干个子任务，在界面上显示为多级菜单项。任务配置文件与VSCode的相似而略有不同，一个任务包含如下配置项：</p>
<ul>
<li>[x] <code>version</code>，配置文件版本，默认值为最新版本。</li>
<li>[ ] <code>id</code>，任务标号，用于任务依赖及快捷键设置。</li>
<li>[x] <code>label</code>，任务名称（可翻译），根任务的默认值为文件名，子任务的默认值为<code>command</code>。</li>
<li>[x] <code>type</code>，任务类型，可以是<code>process</code>或<code>shell</code>，表示执行一个单独的程序还是执行一个shell命令，默认值为<code>shell</code>。</li>
<li>[x] <code>command</code>，任务命令（可翻译），需要执行的命令，可选，默认值为空表示不执行。</li>
<li>[x] <code>args</code>，任务参数（可翻译）。</li>
<li>[x] <code>options</code>，任务运行配置。
<ul>
<li>[x] <code>cwd</code>，任务工作目录。缺失时依次尝试下列值：
<ul>
<li>当前笔记本根目录</li>
<li>当前文件所在目录</li>
<li>当前任务配置文件所在目录。</li>
</ul>
</li>
<li>[x] <code>env</code>，任务运行时环境变量。</li>
<li>[x] <code>shell</code>，shell配置，仅当任务类型为<code>shell</code>时生效。
<ul>
<li>[x] <code>executable</code>，shell可执行文件。</li>
<li>[x] <code>args</code>，shell启动参数</li>
</ul>
</li>
</ul>
</li>
<li>[x] <code>tasks</code>，子任务配置。</li>
<li>[x] <code>inputs</code>，输入变量配置。
<ul>
<li>[x] <code>id</code>，输入变量id。【必要】</li>
<li>[x] <code>type</code>，输入变量类型，可以是下列值，默认值为<code>promptString</code>。
<ul>
<li><code>promptString</code>，弹出一个输入框</li>
<li><code>pickString</code>，弹出一个选择框（尚未完全实现）</li>
</ul>
</li>
<li>[x] <code>description</code>，输入变量描述（可翻译）。</li>
<li>[x] <code>default</code>，输入变量默认值 （可翻译），当输入变量类型为<code>pickString</code>时，<code>options</code>需要包含<code>default</code>。</li>
<li>[x] <code>password</code>，输入模式，布尔值，默认值为<code>false</code>，仅当输入变量类型为<code>promptString</code>时生效。</li>
<li>[x] <code>options</code>，输入选项（可翻译），仅当输入变量类型为<code>promptString</code>时生效。</li>
</ul>
</li>
<li>[x] <code>windows</code>，Windows平台特定配置。</li>
<li>[x] <code>linux</code>，Linux平台特定配置。</li>
<li>[x] <code>osx</code>，macOS平台特定配置。</li>
<li>[ ] <code>dependsOn</code>，任务依赖。</li>
<li>[ ] <code>dependsOrder</code>，任务依赖顺序，可以是<code>parallel</code>或<code>sequence</code>，默认值为<code>parallel</code>。</li>
<li>[ ] <code>presentation</code>，输出配置。
<ul>
<li>[ ] <code>reveal</code>，控制输出面板。可以是<code>always</code>（总是显示输出面板），<code>never</code>（从不显示输出面板），<code>silent</code>（仅当有输出时显示），默认值为<code>always</code>。</li>
<li>[ ] <code>clear</code>，控制是否清除之前任务的输出，布尔值，默认值为<code>false</code>。</li>
</ul>
</li>
<li>[ ] <code>runOptions</code>，任务运行时配置。
<ul>
<li>[ ] <code>runOn</code>，任务触发方式，可以是下列值。
<ul>
<li><code>default</code>，手动触发。</li>
<li><code>notebookOpen</code>，打开笔记本时触发（仅支持笔记本级别的任务配置）。</li>
<li><code>notebookClose</code>，关闭笔记本时触发（仅支持笔记本级别的任务配置）。</li>
<li><code>appOpen</code>，打开VNote时触发。</li>
<li><code>appClose</code>，关闭VNote时触发。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>所有配置项除注明【必要】外均为可选，标注有（可翻译）的配置项可以传入一个字符串或一个指定<code>locale</code>的对象。子任务会从父任务中继承除<code>label</code>、<code>inputs</code>和<code>tasks</code>以外的值。平台特定配置中的<code>tasks</code>会进行合并，其余配置会被覆盖。配置项缺失时采用默认值。具体用法可参考下方示例或文章末尾处的完整的配置文件格式。</p>
<p>在不同平台下会使用不同的默认shell，对于Windows平台默认使用<code>PowerShell.exe</code>，Linux和macOS平台则默认使用<code>/bin/bash</code>。对于一些常见的shell提供了默认的启动参数。</p>
<table>
<thead>
<tr>
<th style="text-align:center">Shell</th>
<th style="text-align:center">Shell args</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">cmd.exe</td>
<td style="text-align:center">[“/C”]</td>
</tr>
<tr>
<td style="text-align:center">PowerShell.exe</td>
<td style="text-align:center">[“-Command”]</td>
</tr>
<tr>
<td style="text-align:center">/bin/bash</td>
<td style="text-align:center">[“-c”]</td>
</tr>
</tbody>
</table>
<p>一个配置好的任务可以通过如下方式进行调用：</p>
<ul>
<li>[x] 主界面菜单项。在软件主菜单界面添加一个<strong>任务</strong>菜单项，其下列出一些功能以及通过配置文件定义的任务。触发该菜单项即可运行对应的任务。这也是目前主流的做法。</li>
<li>[x] 快捷键。如果需要频繁运行某个任务，可以为其定义一个快捷键。</li>
<li>[ ] 通用入口。在VNote v2版本中存在的一个功能，类似于VSCode或Sublime Text的快速命令面板，但目前在v3版本尚未迁移。</li>
<li>[ ] 自动调用。默认情况下只有手动触发才能调用工具，但有时在恰当的时机自动运行工具可能会非常方便。例如打开笔记本时自动与云端进行同步，关闭笔记本时自动提交所有修改到版本控制系统。这样不仅缩短了操作流程，还可以避免忘记运行。</li>
</ul>
<h2 id="变量替换">变量替换<a class="header-anchor" href="#变量替换">#</a></h2>
<p>在配置文件中获取当前运行时的一些参数是非常有用的，例如当前打开的笔记本，正在编辑或查看的文件。参考<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/variables-reference">VSCode提供的变量</a>，VNote的任务系统配置同样采用<code>$&#123;variableName&#125;</code>的语法，支持以下类型的变量，</p>
<ul>
<li>[x] 预定义变量，提供上下文信息，如<code>$&#123;notebookFolder&#125;</code>、<code>$&#123;file&#125;</code>。</li>
<li>[x] 幻词变量，如<code>$&#123;magic:datetime&#125;</code>、<code>$&#123;magic:random&#125;</code>。</li>
<li>[x] 环境变量，提供系统环境变量，如<code>$&#123;env:USERNAME&#125;</code>、<code>$&#123;env:JAVA_HOME&#125;</code>。</li>
<li>[x] 配置变量，提供VNote配置信息，如<code>$&#123;config:core.locale&#125;</code>。</li>
<li>[x] 输入变量，提供简单的交互功能，如<code>$&#123;input:who&#125;</code>。</li>
<li>[x] Shell变量，获取Shell命令的结果，如<code>$&#123;shell:&#125;</code>，对于复杂的命令可以使用输出变量。</li>
</ul>
<p>对于同一个配置项中出现的同一个输入变量仅求值一次。暂不支持嵌套变量替换。</p>
<h3 id="预定义变量">预定义变量<a class="header-anchor" href="#预定义变量">#</a></h3>
<p>以如下情况为例。</p>
<ul>
<li>当前笔记本名称为<code>test-task</code>，根目录为<code>C:\Users\tootal\Documents\vnote_notebooks\testtask</code>。</li>
<li>当前打开的文件<code>C:\Users\tootal\Documents\vnote_notebooks\testtask\test2\note.md</code>。</li>
<li>当前选中的文字为第二行的<code>a test</code>。</li>
</ul>
<p><img src="/asset/20210127220155516_27704.png" alt=""></p>
<ul>
<li><code>$&#123;notebookFolder&#125;</code>，当前打开的笔记本文件夹路径，如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask</code>。</li>
<li><code>$&#123;notebookFolderBasename&#125;</code>，当前打开的笔记本文件夹名，如<code>testtask</code>。</li>
<li><code>$&#123;notebookName&#125;</code>，当前打开的笔记本名，如<code>test-task</code>。</li>
<li><code>$&#123;notebookDescription&#125;</code>，当前打开的笔记本描述，如<code>This notebook for task test.</code>。</li>
<li><code>$&#123;file&#125;</code>，当前打开的文件路径，如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask\test2\note.md</code>。</li>
<li><code>$&#123;fileNotebookFolder&#125;</code>，当前打开的文件所在的笔记本文件夹路径，如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask</code>。</li>
<li><code>$&#123;relativeFile&#125;</code>，当前打开的文件相对于<code>$&#123;fileNotebookFolder&#125;</code>的路径，如<code>test2\note.md</code>。</li>
<li><code>$&#123;fileBasename&#125;</code>，当前打开的文件名，如<code>note.md</code>。</li>
<li><code>$&#123;fileBasenameNoExtension&#125;</code>，当前打开的文件名（不含扩展名），如<code>note</code>。</li>
<li><code>$&#123;fileDirname&#125;</code>，当前打开的文件所在的文件夹路径，如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask\test2</code>。</li>
<li><code>$&#123;fileExtname&#125;</code>，当前打开的文件的扩展名（包含点），如<code>.md</code>。</li>
<li><code>$&#123;cwd&#125;</code>，当前任务开始运行时的工作目录，如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask</code>。</li>
<li><code>$&#123;lineNumber&#125;</code>，当前光标所在处的行号，如<code>2</code>。</li>
<li><code>$&#123;selectedText&#125;</code>，当前选中的文本，如<code>a test</code>。</li>
<li><code>$&#123;execPath&#125;</code>， VNote可执行文件的路径，如<code>C:\Programs\vnote3\vnote.exe</code>。</li>
<li><code>$&#123;pathSeparator&#125;</code>，当前操作系统所用的路径分隔符，如<code>\</code>。</li>
<li><code>$&#123;taskFile&#125;</code>，当前正在运行的任务配置文件路径。</li>
<li><code>$&#123;taskDirname&#125;</code>，当前正在运行的任务配置文件所在的文件夹路径。</li>
<li><code>$&#123;notebookTaskFolder&#125;</code>，当前笔记本任务配置文件夹路径，如<code>C:\Users\tootal\Documents\vnote_notebooks\testtask\vx_notebook\tasks</code>。</li>
<li><code>$&#123;userTaskFolder&#125;</code>，VNote用户任务配置文件夹路径，如<code>C:\Users\tootal\AppData\Local\VNote\VNote\tasks</code>。</li>
<li><code>$&#123;appTaskFolder&#125;</code>，VNote全局任务配置文件夹路径，如<code>C:\Users\tootal\AppData\Roaming\VNote\VNote\tasks</code>。</li>
<li><code>$&#123;userThemeFolder&#125;</code>，VNote用户主题文件夹路径，如<code>C:\Users\tootal\AppData\Local\VNote\VNote\themes</code>。</li>
<li><code>$&#123;appThemeFolder&#125;</code>，VNote全局主题文件夹路径，如<code>C:\Users\tootal\AppData\Roaming\VNote\VNote\themes</code>。</li>
<li><code>$&#123;userDocsFolder&#125;</code>，VNote用户文档文件夹路径，如<code>C:\Users\tootal\AppData\Local\VNote\VNote\docs</code>。</li>
<li><code>$&#123;appDocsFolder&#125;</code>，VNote全局文档文件夹路径，如<code>C:\Users\tootal\AppData\Roaming\VNote\VNote\docs</code>。</li>
</ul>
<p>TODO: <code>$&#123;lineNumber&#125;</code>、<code>$&#123;selectedText&#125;</code>尚未实现。</p>
<p>变量基本与VSCode兼容。注意变量替换只在以下配置项中有效：<code>command</code>、<code>args</code>、<code>options.cwd</code>、<code>options.env</code>。如果变量的值不存在，则会被替换为空字符串。注意变量中的路径会使用<strong>平台相关</strong>的路径分隔符。</p>
<h3 id="幻词变量">幻词变量<a class="header-anchor" href="#幻词变量">#</a></h3>
<p>通过<code>$&#123;magic:word&#125;</code>的语法可以引用幻词变量，下面列出了VNote支持的所有幻词及其含义：</p>
<ul>
<li><code>d</code>, the day as number without a leading zero (<code>1</code> to <code>31</code>)</li>
<li><code>dd</code>, the day as number with a leading zero (<code>01</code> to <code>31</code>)</li>
<li><code>ddd</code>, the abbreviated localized day name (e.g. <code>Mon</code> to <code>Sun</code>)</li>
<li><code>dddd</code>, the long localized day name (e.g. <code>Monday</code> to <code>Sunday</code>)</li>
<li><code>M</code>, the month as number without a leading zero (<code>1</code> to <code>12</code>)</li>
<li><code>MM</code>, the month as number with a leading zero (<code>01</code> to <code>12</code>)</li>
<li><code>MMM</code>, the abbreviated localized month name (e.g. <code>Jan</code> to <code>Dec</code>)</li>
<li><code>MMMM</code>, the long localized month name (e.g. <code>January</code> to <code>December</code>)</li>
<li><code>yy</code>, the year as two digit number (<code>00</code> to <code>99</code>)</li>
<li><code>yyyy</code>, the year as four digit number</li>
<li><code>h</code>, the hour without a leading zero (<code>0</code> to <code>23</code> or <code>1</code> to <code>12</code> if AM/PM display)</li>
<li><code>hh</code>, the hour with a leading zero (<code>00</code> to <code>23</code> or <code>01</code> to <code>12</code> if AM/PM display)</li>
<li><code>H</code>, the hour without a leading zero (<code>0</code> to <code>23</code> even with AM/PM display)</li>
<li><code>HH</code>, the hour with a leading zero (<code>00</code> to <code>23</code> even with AM/PM display)</li>
<li><code>m</code>, the minute without a leading zero (<code>0</code> to <code>59</code>)</li>
<li><code>mm</code>, the minute with a leading zero (<code>00</code> to <code>59</code>)</li>
<li><code>s</code>, the second without a leading zero (<code>0</code> to <code>59</code>)</li>
<li><code>ss</code>, the second with a leading zero (<code>00</code> to <code>59</code>)</li>
<li><code>z</code>, the milliseconds without leading zeroes (<code>0</code> to <code>999</code>)</li>
<li><code>zzz</code>, the milliseconds with leading zeroes (<code>000</code> to <code>999</code>)</li>
<li><code>AP</code>, use AM/PM display (<code>AM</code> or <code>PM</code>)</li>
<li><code>A</code>, use AM/PM display (<code>AM</code> or <code>PM</code>)</li>
<li><code>ap</code>, use am/pm display (<code>am</code> or <code>pm</code>)</li>
<li><code>a</code>, use am/pm display (<code>am</code> or <code>pm</code>)</li>
<li><code>t</code>, the timezone (e.g. <code>CEST</code>)</li>
<li><code>random</code>, a random number</li>
<li><code>random_d</code>, dynamic version of <code>random</code></li>
<li><code>date</code>, yyyy-MM-dd,</li>
<li><code>da</code>, yyyyMMdd</li>
<li><code>time</code>, hh:mm:ss</li>
<li><code>datetime</code>, date time</li>
<li><code>dt</code>, da-time</li>
<li><code>note</code>, name of current note</li>
<li><code>no</code>, complete base name of current note</li>
<li><code>att</code>, relative path of current note’s attachment folder</li>
<li><code>w</code>, the week number (<code>1</code> to <code>53</code>)</li>
</ul>
<p>例如：</p>
<ul>
<li><code>$&#123;magic:datetime&#125;</code> → <code>2021-01-29 12:59:03</code></li>
<li><code>$&#123;magic:random&#125;</code> → <code>56</code></li>
</ul>
<p>TODO: <code>att</code>、<code>random_d</code>尚未实现。</p>
<h3 id="环境变量">环境变量<a class="header-anchor" href="#环境变量">#</a></h3>
<p>可以用<code>$&#123;env:Name&#125;</code>的语法引用系统定义的环境变量。</p>
<p>一些常见的环境变量如下所示：</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#envsample-Windows">
                        Windows
                    </a>
                   </li><li class="tab ">
                    <a href="#envsample-Linux">
                        Linux
                    </a>
                   </li><li class="tab ">
                    <a href="#envsample-MacOS">
                        MacOS
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="envsample-Windows" class="tab-content "><ul>
<li><code>${env:ComSpec}</code> → <code>C:\Windows\system32\cmd.exe</code></li>
<li><code>${env:NUMBER_OF_PROCESSORS}</code> → <code>6</code></li>
<li><code>${env:TEMP}</code> → <code>C:\Users\tootal\AppData\Local\Temp</code></li>
</ul></div><div id="envsample-Linux" class="tab-content is-hidden"><ul>
<li>HOME</li>
<li>LOGNAME</li>
<li>SHELL</li>
</ul></div><div id="envsample-MacOS" class="tab-content is-hidden"><ul>
<li>PATH</li>
</ul></div>
                  </div>
<h3 id="配置变量">配置变量<a class="header-anchor" href="#配置变量">#</a></h3>
<p>用<code>$&#123;config:core.locale&#125;</code>的语法引用VNote的配置变量。以下面的配置文件为例：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;core&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;locale&quot;</span>: <span class="string">&quot;en_US&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;metadata&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;3.0.0-beta.6&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><code>$&#123;config:core.locale&#125;</code> → <code>en_US</code></li>
<li><code>$&#123;config:metadata.version&#125;</code> → <code>3.0.0-beta.6</code></li>
</ul>
<p>配置变量只能返回字符串类型的值，对于<code>Array</code>和<code>Object</code>返回空字符串、其余类型返回字符串结果。仅支持<code>object.key</code>的语法，不支持<code>object[&quot;key&quot;]</code>，对于数组类型，支持<code>array[0]</code>的语法。</p>
<h3 id="输入变量">输入变量<a class="header-anchor" href="#输入变量">#</a></h3>
<p>上面的变量在一般情况下已经足够使用，但它们无法在运行时动态调整参数。例如要求在运行<code>git commit</code>时手动输入一些信息。参考<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/variables-reference#_input-variables">VSCode Tasks的Input variables</a>，VNote同样提供类似的功能。通过<code>$&#123;input:varid&#125;</code>的语法可以引用一个输入变量。</p>
<p>如下任务配置文件<code>prompt.json</code>可以弹出一个输入框，并将输入的内容在输出面板输出。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;echo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;args&quot;</span>: [<span class="string">&quot;$&#123;input:what&#125;&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;inputs&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;what&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;promptString&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Type something, it will show in output panel.&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行效果如下图所示：</p>
<p><img src="/asset/20210129144746219_987.gif" alt="VNote任务输入变量"></p>
<h3 id="Shell变量">Shell变量<a class="header-anchor" href="#Shell变量">#</a></h3>
<p>通过<code>$&#123;shell:commandString&#125;</code>可以获取一些简单的Shell命令的结果，执行时会先通过系统默认的shell执行 <code>commandString</code> ，将结果作为变量值进行替换。对于较复杂的命令，请使用输出变量。</p>
<p>例如：</p>
<ul>
<li><code>$&#123;shell:git rev-parse --abbrev-ref HEAD&#125;</code> → <code>master</code></li>
<li><code>$&#123;shell:whoami&#125;</code> → <code>tootal</code></li>
<li><code>$&#123;shell:dig github.com -4 +short&#125;</code> → <code>52.69.186.44</code></li>
</ul>
<p>shell的工作目录与任务工作目录相同。变量解析超过1秒后，会中断任务的执行。</p>
<h2 id="输入输出">输入输出<a class="header-anchor" href="#输入输出">#</a></h2>
<p>任务运行结果及错误信息可以通过输出面板进行查看，目前输出面板会依次尝试使用下列编码来显示输出：</p>
<ul>
<li><code>UTF-8</code></li>
<li><code>System</code></li>
<li><code>UTF-16</code></li>
<li><code>GB18030</code></li>
</ul>
<p>虽然有了输入变量可以进行一定程度的交互，但仍然不能很好的处理一些特殊情况。例如一些任务运行时需要进行多次输入确认、一些任务需要在后台保持运行等。VNote任务系统没有内置相关功能，但仍然可以通过启动一个额外的命令窗口来解决这些问题。下面以两个简单的示例来说明如何运行需要交互输入和后台运行的任务。</p>
<h3 id="交互输入">交互输入<a class="header-anchor" href="#交互输入">#</a></h3>
<p>下面是一个用C++编写的猜数小游戏，接下来将通过任务配置在VNote中编译、运行。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> low = <span class="number">1</span>, high = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Guess a number between &quot;</span></span><br><span class="line">         &lt;&lt; low &lt;&lt; <span class="string">&quot; and &quot;</span> &lt;&lt; high &lt;&lt; <span class="string">&quot;.\n&quot;</span>;</span><br><span class="line">    srand(time(<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">int</span> num = rand() % <span class="number">20</span> + <span class="number">1</span>, x;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span> (x &gt; num) <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;It&#x27;s too high.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; num) <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;It&#x27;s too low\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;It is just fine\n&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新建一个任务配置文件<code>run.json</code>，内容如下：</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#interactive-Windows">
                        Windows
                    </a>
                   </li><li class="tab ">
                    <a href="#interactive-Linux">
                        Linux
                    </a>
                   </li><li class="tab ">
                    <a href="#interactive-macOS">
                        macOS
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="interactive-Windows" class="tab-content "><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;g++ \&quot;$&#123;file&#125;\&quot; -o \&quot;$&#123;fileBasenameNoExtension&#125;\&quot;; if ($?) &#123; start cmd \&quot;/c `\&quot;$&#123;fileBasenameNoExtension&#125;`\&quot; &amp; pause\&quot; &#125;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意尽管命令较长，但不能将其拆分成<code>command</code>和<code>args</code>，否则可能由于转义字符导致任务执行失败。运行效果如下图所示：</p>
<p><img src="/asset/20210129141938465_12914.gif" alt="VNote任务交互输入"></p></div><div id="interactive-Linux" class="tab-content is-hidden"><p>TODO</p></div><div id="interactive-macOS" class="tab-content is-hidden"><p>TODO</p></div>
                  </div>
<h3 id="后台运行">后台运行<a class="header-anchor" href="#后台运行">#</a></h3>
<p>下面的例子演示了如何在笔记本根目录启动一个http服务器，并打开浏览器访问。</p>
<p>若笔记本根目录下没有<code>index.html</code>文件，可以新建一个，内容如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>VNote Task<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>HTTP server start successfully.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>新建一个任务配置文件<code>http.json</code>，内容如下：</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#background-Windows">
                        Windows
                    </a>
                   </li><li class="tab ">
                    <a href="#background-Linux">
                        Linux
                    </a>
                   </li><li class="tab ">
                    <a href="#background-macOS">
                        macOS
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="background-Windows" class="tab-content "><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;command&quot;</span>: <span class="string">&quot;start cmd.exe \&quot;/c python -m http.server\&quot; ; start http://localhost:8000&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行效果如下图所示：</p>
<p><img src="/asset/20210129141434261_32283.gif" alt="VNote任务后台运行"></p></div><div id="background-Linux" class="tab-content is-hidden"><p>TODO</p></div><div id="background-macOS" class="tab-content is-hidden"><p>TODO</p></div>
                  </div>
<!--
### 交互命令

上面两种方式虽然可以在一定程度上解决问题，但无法调用一些VNote已有的功能，通过交互命令可以在运行过程中于VNote进行沟通。


目前支持以下交互命令：

* `::show-message title={title}::{info}`
* `::show-question title={title}::{question}`

-->
<h2 id="任务示例">任务示例<a class="header-anchor" href="#任务示例">#</a></h2>
<p>前面展示的一些任务示例较为简单，下面包含四个较完善的任务示例，用来解决文章开头的四个问题。</p>
<ul>
<li>[x] 通过<a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a>进行笔记的版本控制</li>
<li>[ ] 将多个终端的笔记通过<a target="_blank" rel="noopener" href="https://help.jianguoyun.com/?p=2064">坚果云</a>进行同步</li>
<li>[ ] 将写好的Markdown文档通过<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a>渲染预览并发布</li>
<li>[ ] 调用外部编辑器如<a target="_blank" rel="noopener" href="https://typora.io/">Typora</a>或是<a target="_blank" rel="noopener" href="https://code.visualstudio.com/">VS Code</a>进行进一步编辑</li>
</ul>
<p>所有任务均支持多语言与多平台。</p>
<h3 id="Git">Git<a class="header-anchor" href="#Git">#</a></h3>
<p>通过Git进行版本控制是目前主流的选择，利用任务可以将一些Git的常用操作（如初始化、提交、上传、下载、查看日志）集成到VNote内部，大大方便了日常使用。如果目前笔记本尚未进行Git版本控制，需要先进行初始化，相当于命令<code>git init</code>。默认的分支名为<code>main</code>。</p>
<p><img src="/asset/20210206221845368_28581.png" alt="Git初始化"></p>
<p>查看当前状态，相当于命令<code>git status</code>。</p>
<p><img src="/asset/20210206220301577_17552.png" alt="Git状态"></p>
<p>提示：查看状态时，中文文件名可能会显示为十六进制，这是由于Git默认会对值大于<code>0x80</code>的字符进行转义，可以使用<code>git config --global core.quotepath false</code>关闭转义，详细信息可参考<a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-corequotePath">core.quotePath</a>。</p>
<p>提交可以把所有文件加入版本库中并生成一个记录，类似于命令<code>git add .</code> 与<code>git commit</code>同时执行。此时会弹出窗口请求输入提交信息，默认的提交信息是：<code>更新笔记于 $&#123;magic:datetime&#125;</code>，后面的变量表示当前时间。也可使用快捷键<code>Alt+G, Alt+C</code>执行提交。</p>
<p><img src="/asset/20210206220626228_15337.png" alt="Git提交"></p>
<p><img src="/asset/20210206220644016_25187.png" alt="Git提交结果"></p>
<p>提交后需要手动配置云端库如Github等（利用<code>git remote</code>命令），便可使用快捷的菜单命令进行上传下载，相当于执行<code>git push</code>与<code>git pull</code>命令，默认的<code>merge</code>策略是<code>rebase</code>。通过日志可以查看目前的版本记录。</p>
<p><img src="/asset/20210206220942154_25617.png" alt=""></p>
<p>任务代码可在<a target="_blank" rel="noopener" href="https://github.com/tootal/vnote-task-git">Github</a>上查看。</p>
<h2 id="常见问题">常见问题<a class="header-anchor" href="#常见问题">#</a></h2>
<article class="message message-immersive is-warning">
<div class="message-body">
<i class="fas 
                        fa-question-circle mr-2"></i>为何不采用系统环境变量<code>ComSpec</code>或<code>SHELL</code>的值作为默认shell？
</div>
</article>
<p>默认shell可以很大程度地减小配置文件的大小，大部分任务配置也会按照默认的shell语法来书写。系统环境变量可能会被用户或其它程序在不经意间修改，从而导致大量已有的任务配置失效。</p>
<h2 id="配置格式">配置格式<a class="header-anchor" href="#配置格式">#</a></h2>
<p>参考<a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/editor/tasks-appendix">VSCode Task的配置格式</a>，定义VNote任务系统配置文件的格式如下。目前还在开发过程中，因此格式还在逐步调整。</p>
<div class="control">
                    <div class="select">
                        <select>
                            <option  data-id="taskconfig-v0.1.0">
                        v0.1.0
                    </option><option  data-id="taskconfig-v0.1.1">
                        v0.1.1
                    </option><option  data-id="taskconfig-v0.1.2">
                        v0.1.2
                    </option><option  data-id="taskconfig-v0.1.3">
                        v0.1.3
                    </option><option  data-id="taskconfig-v0.1.4">
                        v0.1.4
                    </option><option  data-id="taskconfig-v0.1.5">
                        v0.1.5
                    </option><option  data-id="taskconfig-v0.1.6">
                        v0.1.6
                    </option><option selected data-id="taskconfig-v0.1.7">
                        v0.1.7
                    </option>
                        </select>
                    </div>
                </div><div class="selects-content">
                        <div class="select-content is-hidden" id="taskconfig-v0.1.0">
                            <h3 id="v0-1-0">v0.1.0<a class="header-anchor" href="#v0-1-0">#</a></h3>
<p>根task的默认label就是文件名，子label默认用数字从0开始编号。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration <span class="keyword">extends</span> TaskDescription &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  version: <span class="string">&#x27;0.1.0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> TaskDescription &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">   * command.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  command: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The task&#x27;s name. Can be omitted.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  label?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  tasks?: TaskDescription[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div><div class="select-content is-hidden" id="taskconfig-v0.1.1">
                            <p>没有新增内容，规定一下默认值的处理方法：</p>
<p>version，不指定则采用最新的version。<br>
command，不指定则不运行。<br>
label，默认采用文件名，子task采用数字编号（0-index）<br>
tasks，指定子task。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration <span class="keyword">extends</span> TaskDescription &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  version?: <span class="string">&#x27;0.1.1&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> TaskDescription &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">   * command.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  command?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The task&#x27;s name. Can be omitted.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  label?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  tasks?: TaskDescription[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div><div class="select-content is-hidden" id="taskconfig-v0.1.2">
                            <h3 id="v0-1-2">v0.1.2<a class="header-anchor" href="#v0-1-2">#</a></h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration <span class="keyword">extends</span> TaskDescription &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    version?: <span class="string">&#x27;0.1.2&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> TaskDescription &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The type of a custom task. Tasks of type &quot;shell&quot; are executed</span></span><br><span class="line"><span class="comment">     * inside a shell (e.g. bash, cmd, powershell, ...)</span></span><br><span class="line"><span class="comment">     * If omitted `shell` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;shell&#x27;</span> | <span class="string">&#x27;process&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">     * command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    command?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The arguments passed to the command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    args?: <span class="built_in">string</span>[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s name.</span></span><br><span class="line"><span class="comment">     * If root label omitted the file name is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    label?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * The command options used when the command is executed. Can be omitted.</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    options?: CommandOptions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    tasks?: TaskDescription[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Options to be passed to the external program or shell</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> CommandOptions &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The current working directory of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted try the following valus in turn.</span></span><br><span class="line"><span class="comment">     * - the current notebook&#x27;s root</span></span><br><span class="line"><span class="comment">     * - the directory of current file</span></span><br><span class="line"><span class="comment">     * - the directory of executing task file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    cwd?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The environment of the executed program or shell. If omitted</span></span><br><span class="line"><span class="comment">     * the parent process&#x27; environment is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    env?: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configuration of the shell when task type is `shell`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shell?: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The shell to use. </span></span><br><span class="line"><span class="comment">         * If omitted, the OS-specific shell is used.</span></span><br><span class="line"><span class="comment">         * - `cmd.exe` for windows</span></span><br><span class="line"><span class="comment">         * - `/bin/bash` for linux or macOS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        executable: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The arguments to be passed to the shell executable to run in command mode.</span></span><br><span class="line"><span class="comment">         * If omitted, the default value is used.</span></span><br><span class="line"><span class="comment">         * - [&#x27;/D&#x27;, &#x27;/S&#x27;, &#x27;/C&#x27;] for `cmd.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-c&#x27;] for `/bin/bash`</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        args?: <span class="built_in">string</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div><div class="select-content is-hidden" id="taskconfig-v0.1.3">
                            <h3 id="v0-1-3">v0.1.3<a class="header-anchor" href="#v0-1-3">#</a></h3>
<p>支持了翻译、平台相关配置。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">     * If omitted latest version is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    version?: <span class="string">&#x27;0.1.3&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Windows specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    windows?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * macOS specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    osx?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Linux specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    linux?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The type of a custom task. Tasks of type &quot;shell&quot; are executed</span></span><br><span class="line"><span class="comment">     * inside a shell (e.g. bash, cmd, powershell, ...)</span></span><br><span class="line"><span class="comment">     * If omitted, the parent type is used</span></span><br><span class="line"><span class="comment">     * If no parent specific, the `shell` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;shell&#x27;</span> | <span class="string">&#x27;process&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">     * command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    command?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The arguments passed to the command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    args?: <span class="built_in">string</span>[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s name.</span></span><br><span class="line"><span class="comment">     * If task has no parent, the file name is used.</span></span><br><span class="line"><span class="comment">     * If task has command, the command is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    label?: <span class="built_in">string</span> | TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * The command options used when the command is executed. Can be omitted.</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    options?: CommandOptions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">     * Tasks will not be inherited.</span></span><br><span class="line"><span class="comment">     * Tasks in OS-specific will be merged.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    tasks?: TaskConfiguration[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Options to be passed to the external program or shell</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> CommandOptions &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The current working directory of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted try the following valus in turn.</span></span><br><span class="line"><span class="comment">     * - the parent task working dir</span></span><br><span class="line"><span class="comment">     * - the current notebook&#x27;s root</span></span><br><span class="line"><span class="comment">     * - the directory of current file</span></span><br><span class="line"><span class="comment">     * - the directory of executing task file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    cwd?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The environment of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted the parent process&#x27; environment is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    env?: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configuration of the shell when task type is `shell`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shell?: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The shell to use. </span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the OS-specific shell is used.</span></span><br><span class="line"><span class="comment">         * - `PowerShell.exe` for windows</span></span><br><span class="line"><span class="comment">         * - `/bin/bash` for linux or macOS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        executable: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The arguments to be passed to the shell executable to run in command mode.</span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the default value is used.</span></span><br><span class="line"><span class="comment">         * - [&#x27;/D&#x27;, &#x27;/S&#x27;, &#x27;/C&#x27;] for `cmd.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-Command&#x27;] for `PowerShell.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-c&#x27;] for `/bin/bash`</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        args?: <span class="built_in">string</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Localization</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> TranslatableString &#123;</span><br><span class="line">    en_US?: <span class="built_in">string</span>,</span><br><span class="line">    zh_CN?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div><div class="select-content is-hidden" id="taskconfig-v0.1.4">
                            <h3 id="v0-1-4">v0.1.4<a class="header-anchor" href="#v0-1-4">#</a></h3>
<p>支持输入变量</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">     * If omitted latest version is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    version?: <span class="string">&#x27;0.1.4&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Windows specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    windows?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * macOS specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    osx?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Linux specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    linux?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The type of a custom task. Tasks of type &quot;shell&quot; are executed</span></span><br><span class="line"><span class="comment">     * inside a shell (e.g. bash, cmd, powershell, ...)</span></span><br><span class="line"><span class="comment">     * If omitted, the parent type is used</span></span><br><span class="line"><span class="comment">     * If no parent specific, the `shell` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;shell&#x27;</span> | <span class="string">&#x27;process&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">     * command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    command?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The arguments passed to the command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    args?: <span class="built_in">string</span>[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s name.</span></span><br><span class="line"><span class="comment">     * If task has no parent, the file name is used.</span></span><br><span class="line"><span class="comment">     * If task has command, the command is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    label?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * The command options used when the command is executed. Can be omitted.</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    options?: CommandOptions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">     * Tasks will not be inherited.</span></span><br><span class="line"><span class="comment">     * Tasks in OS-specific will be merged.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    tasks?: TaskConfiguration[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the input variables.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    inputs?: InputConfiguration[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Options to be passed to the external program or shell</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> CommandOptions &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The current working directory of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted try the following valus in turn.</span></span><br><span class="line"><span class="comment">     * - the parent task working dir</span></span><br><span class="line"><span class="comment">     * - the current notebook&#x27;s root</span></span><br><span class="line"><span class="comment">     * - the directory of current file</span></span><br><span class="line"><span class="comment">     * - the directory of executing task file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    cwd?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The environment of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted the parent process&#x27; environment is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    env?: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configuration of the shell when task type is `shell`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shell?: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The shell to use. </span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the OS-specific shell is used.</span></span><br><span class="line"><span class="comment">         * - `PowerShell.exe` for windows</span></span><br><span class="line"><span class="comment">         * - `/bin/bash` for linux or macOS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        executable: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The arguments to be passed to the shell executable to run in command mode.</span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the default value is used.</span></span><br><span class="line"><span class="comment">         * - [&#x27;/D&#x27;, &#x27;/S&#x27;, &#x27;/C&#x27;] for `cmd.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-Command&#x27;] for `PowerShell.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-c&#x27;] for `/bin/bash`</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        args?: <span class="built_in">string</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Localization</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> LocaleString &#123;</span><br><span class="line">    en_US?: <span class="built_in">string</span>,</span><br><span class="line">    zh_CN?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TranslatableString = <span class="built_in">string</span> | LocaleString;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configuration of input variables</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> InputConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Input variable id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    id: <span class="built_in">string</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * the type of input variable</span></span><br><span class="line"><span class="comment">     * if omitted, `promptString` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;promptString&#x27;</span> | <span class="string">&#x27;pickString&#x27;</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Provides context for the input.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    description?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default value that will be used if the user doesn&#x27;t enter something else.</span></span><br><span class="line"><span class="comment">     * If type is pickString, it must be one of the option values.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span>?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is promptString</span></span><br><span class="line"><span class="comment">     * Set to true to input with a password prompt that will not show the typed value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    password?: <span class="built_in">boolean</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is pickString</span></span><br><span class="line"><span class="comment">     * An array of options for the user to pick from.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    options?: TranslatableString[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
                           </div><div class="select-content is-hidden" id="taskconfig-v0.1.5">
                            <h3 id="v0-1-5">v0.1.5<a class="header-anchor" href="#v0-1-5">#</a></h3>
<p>支持可翻译的命令字符串及参数。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">     * If omitted latest version is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    version?: <span class="string">&#x27;0.1.5&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Windows specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    windows?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * macOS specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    osx?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Linux specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    linux?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The type of a custom task. Tasks of type &quot;shell&quot; are executed</span></span><br><span class="line"><span class="comment">     * inside a shell (e.g. bash, cmd, powershell, ...)</span></span><br><span class="line"><span class="comment">     * If omitted, the parent type is used</span></span><br><span class="line"><span class="comment">     * If no parent specific, the `shell` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;shell&#x27;</span> | <span class="string">&#x27;process&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">     * command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    command?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The arguments passed to the command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    args?: TranslatableString[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s name.</span></span><br><span class="line"><span class="comment">     * If task has no parent, the file name is used.</span></span><br><span class="line"><span class="comment">     * If task has command, the command is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    label?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * The command options used when the command is executed. Can be omitted.</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    options?: CommandOptions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">     * Tasks will not be inherited.</span></span><br><span class="line"><span class="comment">     * Tasks in OS-specific will be merged.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    tasks?: TaskConfiguration[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the input variables.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    inputs?: InputConfiguration[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Options to be passed to the external program or shell</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> CommandOptions &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The current working directory of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted try the following valus in turn.</span></span><br><span class="line"><span class="comment">     * - the parent task working dir</span></span><br><span class="line"><span class="comment">     * - the current notebook&#x27;s root</span></span><br><span class="line"><span class="comment">     * - the directory of current file</span></span><br><span class="line"><span class="comment">     * - the directory of executing task file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    cwd?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The environment of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted the parent process&#x27; environment is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    env?: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configuration of the shell when task type is `shell`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shell?: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The shell to use. </span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the OS-specific shell is used.</span></span><br><span class="line"><span class="comment">         * - `PowerShell.exe` for windows</span></span><br><span class="line"><span class="comment">         * - `/bin/bash` for linux or macOS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        executable: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The arguments to be passed to the shell executable to run in command mode.</span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the default value is used.</span></span><br><span class="line"><span class="comment">         * - [&#x27;/D&#x27;, &#x27;/S&#x27;, &#x27;/C&#x27;] for `cmd.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-Command&#x27;] for `PowerShell.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-c&#x27;] for `/bin/bash`</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        args?: <span class="built_in">string</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Localization</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> LocaleString &#123;</span><br><span class="line">    en_US?: <span class="built_in">string</span>,</span><br><span class="line">    zh_CN?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TranslatableString = <span class="built_in">string</span> | LocaleString;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configuration of input variables</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> InputConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Input variable id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    id: <span class="built_in">string</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * the type of input variable</span></span><br><span class="line"><span class="comment">     * if omitted, `promptString` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;promptString&#x27;</span> | <span class="string">&#x27;pickString&#x27;</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Provides context for the input.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    description?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default value that will be used if the user doesn&#x27;t enter something else.</span></span><br><span class="line"><span class="comment">     * If type is pickString, it must be one of the option values.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span>?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is promptString</span></span><br><span class="line"><span class="comment">     * Set to true to input with a password prompt that will not show the typed value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    password?: <span class="built_in">boolean</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is pickString</span></span><br><span class="line"><span class="comment">     * An array of options for the user to pick from.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    options?: TranslatableString[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div><div class="select-content is-hidden" id="taskconfig-v0.1.6">
                            <h3 id="v0-1-6">v0.1.6<a class="header-anchor" href="#v0-1-6">#</a></h3>
<p>支持了图标<code>icon</code>和快捷键<code>shortcut</code>。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">     * If omitted latest version is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    version?: <span class="string">&#x27;0.1.6&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Windows specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    windows?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * macOS specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    osx?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Linux specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    linux?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The type of a custom task. Tasks of type &quot;shell&quot; are executed</span></span><br><span class="line"><span class="comment">     * inside a shell (e.g. bash, cmd, powershell, ...)</span></span><br><span class="line"><span class="comment">     * If omitted, the parent type is used</span></span><br><span class="line"><span class="comment">     * If no parent specific, the `shell` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;shell&#x27;</span> | <span class="string">&#x27;process&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">     * command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    command?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The arguments passed to the command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    args?: TranslatableString[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s name.</span></span><br><span class="line"><span class="comment">     * If task has no parent, the file name is used.</span></span><br><span class="line"><span class="comment">     * If task has command, the command is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    label?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s icon.</span></span><br><span class="line"><span class="comment">     * task icon will not be inherited</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    icon?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s shortcut.</span></span><br><span class="line"><span class="comment">     * task icon will not be inherited</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shortcut?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * The command options used when the command is executed. Can be omitted.</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    options?: CommandOptions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">     * Tasks will not be inherited.</span></span><br><span class="line"><span class="comment">     * Tasks in OS-specific will be merged.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    tasks?: TaskConfiguration[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the input variables.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    inputs?: InputConfiguration[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Options to be passed to the external program or shell</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> CommandOptions &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The current working directory of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted try the following valus in turn.</span></span><br><span class="line"><span class="comment">     * - the parent task working dir</span></span><br><span class="line"><span class="comment">     * - the current notebook&#x27;s root</span></span><br><span class="line"><span class="comment">     * - the directory of current file</span></span><br><span class="line"><span class="comment">     * - the directory of executing task file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    cwd?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The environment of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted the parent process&#x27; environment is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    env?: &#123; [key: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configuration of the shell when task type is `shell`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shell?: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The shell to use. </span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the OS-specific shell is used.</span></span><br><span class="line"><span class="comment">         * - `PowerShell.exe` for windows</span></span><br><span class="line"><span class="comment">         * - `/bin/bash` for linux or macOS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        executable: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The arguments to be passed to the shell executable to run in command mode.</span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the default value is used.</span></span><br><span class="line"><span class="comment">         * - [&#x27;/D&#x27;, &#x27;/S&#x27;, &#x27;/C&#x27;] for `cmd.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-Command&#x27;] for `PowerShell.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-c&#x27;] for `/bin/bash`</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        args?: <span class="built_in">string</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Localization</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> LocaleString &#123;</span><br><span class="line">    en_US?: <span class="built_in">string</span>,</span><br><span class="line">    zh_CN?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TranslatableString = <span class="built_in">string</span> | LocaleString;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configuration of input variables</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> InputConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Input variable id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    id: <span class="built_in">string</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * the type of input variable</span></span><br><span class="line"><span class="comment">     * if omitted, `promptString` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;promptString&#x27;</span> | <span class="string">&#x27;pickString&#x27;</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Provides context for the input.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    description?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default value that will be used if the user doesn&#x27;t enter something else.</span></span><br><span class="line"><span class="comment">     * If type is pickString, it must be one of the option values.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span>?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is promptString</span></span><br><span class="line"><span class="comment">     * Set to true to input with a password prompt that will not show the typed value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    password?: <span class="built_in">boolean</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is pickString</span></span><br><span class="line"><span class="comment">     * An array of options for the user to pick from.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    options?: TranslatableString[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div><div class="select-content " id="taskconfig-v0.1.7">
                            <h3 id="v0-1-7">v0.1.7<a class="header-anchor" href="#v0-1-7">#</a></h3>
<p>支持环境变量多语言。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> TaskConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration&#x27;s version number</span></span><br><span class="line"><span class="comment">     * If omitted latest version is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    version?: <span class="string">&#x27;0.1.7&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Windows specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    windows?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * macOS specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    osx?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Linux specific task configuration</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    linux?: TaskConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The type of a custom task. Tasks of type &quot;shell&quot; are executed</span></span><br><span class="line"><span class="comment">     * inside a shell (e.g. bash, cmd, powershell, ...)</span></span><br><span class="line"><span class="comment">     * If omitted, the parent type is used</span></span><br><span class="line"><span class="comment">     * If no parent specific, the `shell` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;shell&#x27;</span> | <span class="string">&#x27;process&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The command to be executed. Can be an external program or a shell</span></span><br><span class="line"><span class="comment">     * command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    command?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The arguments passed to the command. Can be omitted.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    args?: TranslatableString[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s name.</span></span><br><span class="line"><span class="comment">     * If task has no parent, the file name is used.</span></span><br><span class="line"><span class="comment">     * If task has command, the command is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    label?: TranslatableString;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s icon.</span></span><br><span class="line"><span class="comment">     * task icon will not be inherited</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    icon?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The task&#x27;s shortcut.</span></span><br><span class="line"><span class="comment">     * task icon will not be inherited</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shortcut?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * The command options used when the command is executed. Can be omitted.</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    options?: CommandOptions;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the available tasks.</span></span><br><span class="line"><span class="comment">     * Tasks will not be inherited.</span></span><br><span class="line"><span class="comment">     * Tasks in OS-specific will be merged.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    tasks?: TaskConfiguration[];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The configuration of the input variables.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    inputs?: InputConfiguration[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Options to be passed to the external program or shell</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> CommandOptions &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The current working directory of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted try the following valus in turn.</span></span><br><span class="line"><span class="comment">     * - the parent task working dir</span></span><br><span class="line"><span class="comment">     * - the current notebook&#x27;s root</span></span><br><span class="line"><span class="comment">     * - the directory of current file</span></span><br><span class="line"><span class="comment">     * - the directory of executing task file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    cwd?: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The environment of the executed program or shell.</span></span><br><span class="line"><span class="comment">     * If omitted the parent process&#x27; environment is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    env?: &#123; [key: <span class="built_in">string</span>]: TranslatableString &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Configuration of the shell when task type is `shell`</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    shell?: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The shell to use. </span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the OS-specific shell is used.</span></span><br><span class="line"><span class="comment">         * - `PowerShell.exe` for windows</span></span><br><span class="line"><span class="comment">         * - `/bin/bash` for linux or macOS</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        executable: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * The arguments to be passed to the shell executable to run in command mode.</span></span><br><span class="line"><span class="comment">         * If omitted, the parent shell is used</span></span><br><span class="line"><span class="comment">         * If no parent specific, the default value is used.</span></span><br><span class="line"><span class="comment">         * - [&#x27;/D&#x27;, &#x27;/S&#x27;, &#x27;/C&#x27;] for `cmd.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-Command&#x27;] for `PowerShell.exe`</span></span><br><span class="line"><span class="comment">         * - [&#x27;-c&#x27;] for `/bin/bash`</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        args?: <span class="built_in">string</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Localization</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> LocaleString &#123;</span><br><span class="line">    en_US?: <span class="built_in">string</span>,</span><br><span class="line">    zh_CN?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> TranslatableString = <span class="built_in">string</span> | LocaleString;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configuration of input variables</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> InputConfiguration &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Input variable id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    id: <span class="built_in">string</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * the type of input variable</span></span><br><span class="line"><span class="comment">     * if omitted, `promptString` is used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">type</span>?: <span class="string">&#x27;promptString&#x27;</span> | <span class="string">&#x27;pickString&#x27;</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Provides context for the input.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    description?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default value that will be used if the user doesn&#x27;t enter something else.</span></span><br><span class="line"><span class="comment">     * If type is pickString, it must be one of the option values.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span>?: TranslatableString,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is promptString</span></span><br><span class="line"><span class="comment">     * Set to true to input with a password prompt that will not show the typed value.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    password?: <span class="built_in">boolean</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Only avaliable when type is pickString</span></span><br><span class="line"><span class="comment">     * An array of options for the user to pick from.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    options?: TranslatableString[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                           </div>
                     </div></div><div class="article-licensing box"><div class="licensing-title"><p>给VNote添加任务系统</p><p><a href="https://blog.tootal.xyz/posts/vnote-task/">https://blog.tootal.xyz/posts/vnote-task/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>黄智权</p></div></div><div class="level-item is-narrow"><div><h6>本文发布于</h6><p>2021-01-28</p></div></div><div class="level-item is-narrow"><div><h6>本文更新于</h6><p>2021-01-29</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/C/">C++</a><a class="link-muted mr-2" rel="tag" href="/tags/Qt/">Qt</a><a class="link-muted mr-2" rel="tag" href="/tags/VNote/">VNote</a><a class="link-muted mr-2" rel="tag" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="http://afdian.net/@tootal" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/asset/alipay.webp" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/asset/wechat_pay.webp" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/leetcode-template/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">LeetCode链表与二叉树模板总结</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/interview-2year/"><span class="level-item">怎样花两年时间去面试一个人</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo@1.2.0/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'tootal-6g2y019v6b37e4be',
      region: 'ap-guangzhou',
      path: "'/posts/vnote-task/'",
      katex: {
        delimiters: 
        [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false}
        ],
        throwOnError: false
      }
    });</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#相关介绍"><span class="level-left"><span class="level-item">相关介绍</span></span></a></li><li><a class="level is-mobile" href="#下载开发版本"><span class="level-left"><span class="level-item">下载开发版本</span></span></a></li><li><a class="level is-mobile" href="#快速上手"><span class="level-left"><span class="level-item">快速上手</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Hello-World"><span class="level-left"><span class="level-item">Hello World</span></span></a></li><li><a class="level is-mobile" href="#自定义菜单项"><span class="level-left"><span class="level-item">自定义菜单项</span></span></a></li><li><a class="level is-mobile" href="#特殊字符处理"><span class="level-left"><span class="level-item">特殊字符处理</span></span></a></li><li><a class="level is-mobile" href="#启动外部程序"><span class="level-left"><span class="level-item">启动外部程序</span></span></a></li><li><a class="level is-mobile" href="#多语言与多平台"><span class="level-left"><span class="level-item">多语言与多平台</span></span></a></li><li><a class="level is-mobile" href="#任务运行出错"><span class="level-left"><span class="level-item">任务运行出错</span></span></a></li><li><a class="level is-mobile" href="#笔记本任务配置"><span class="level-left"><span class="level-item">笔记本任务配置</span></span></a></li></ul></li><li><a class="level is-mobile" href="#任务配置"><span class="level-left"><span class="level-item">任务配置</span></span></a></li><li><a class="level is-mobile" href="#变量替换"><span class="level-left"><span class="level-item">变量替换</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#预定义变量"><span class="level-left"><span class="level-item">预定义变量</span></span></a></li><li><a class="level is-mobile" href="#幻词变量"><span class="level-left"><span class="level-item">幻词变量</span></span></a></li><li><a class="level is-mobile" href="#环境变量"><span class="level-left"><span class="level-item">环境变量</span></span></a></li><li><a class="level is-mobile" href="#配置变量"><span class="level-left"><span class="level-item">配置变量</span></span></a></li><li><a class="level is-mobile" href="#输入变量"><span class="level-left"><span class="level-item">输入变量</span></span></a></li><li><a class="level is-mobile" href="#Shell变量"><span class="level-left"><span class="level-item">Shell变量</span></span></a></li></ul></li><li><a class="level is-mobile" href="#输入输出"><span class="level-left"><span class="level-item">输入输出</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#交互输入"><span class="level-left"><span class="level-item">交互输入</span></span></a></li><li><a class="level is-mobile" href="#后台运行"><span class="level-left"><span class="level-item">后台运行</span></span></a></li></ul></li><li><a class="level is-mobile" href="#任务示例"><span class="level-left"><span class="level-item">任务示例</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Git"><span class="level-left"><span class="level-item">Git</span></span></a></li></ul></li><li><a class="level is-mobile" href="#常见问题"><span class="level-left"><span class="level-item">常见问题</span></span></a></li><li><a class="level is-mobile" href="#配置格式"><span class="level-left"><span class="level-item">配置格式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#v0-1-0"><span class="level-left"><span class="level-item">v0.1.0</span></span></a></li><li><a class="level is-mobile" href="#v0-1-2"><span class="level-left"><span class="level-item">v0.1.2</span></span></a></li><li><a class="level is-mobile" href="#v0-1-3"><span class="level-left"><span class="level-item">v0.1.3</span></span></a></li><li><a class="level is-mobile" href="#v0-1-4"><span class="level-left"><span class="level-item">v0.1.4</span></span></a></li><li><a class="level is-mobile" href="#v0-1-5"><span class="level-left"><span class="level-item">v0.1.5</span></span></a></li><li><a class="level is-mobile" href="#v0-1-6"><span class="level-left"><span class="level-item">v0.1.6</span></span></a></li><li><a class="level is-mobile" href="#v0-1-7"><span class="level-left"><span class="level-item">v0.1.7</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">头头博客</a><p class="is-size-7"><span>&copy; 2021 黄智权</span><span>&nbsp;&nbsp; 由 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>&nbsp;&&nbsp;<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a> 驱动</span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span><br><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">赣ICP备20007667号-1</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="View on GitHub" href="https://github.com/tootal/tootal.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/mhchem.js" defer></script><script>
    var katex_config = {
      delimiters: 
      [
        {left: "$$", right: "$$", display: true},
        {left: "$", right: "$", display: false}
      ],
      strict: false,
      throwOnError: false
    };
    window.addEventListener("load", function() {
      document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
        renderMathInElement(element, katex_config);
      });
      document.querySelectorAll('#toc .level-item').forEach(function(element) {
        renderMathInElement(element, katex_config);
      });
    });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>