<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>2020 年「计算机科学与工程学院」新生赛总结 - 头头博客</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#fff"><meta name="application-name" content="头头博客"><meta name="msapplication-TileImage" content="/asset/favicon144.png"><meta name="msapplication-TileColor" content="#fff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="头头博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="96x96" href="/asset/favicon96.png"><link rel="apple-touch-icon" sizes="144x144" href="/asset/favicon144.png"><link rel="apple-touch-icon" sizes="192x192" href="/asset/favicon192.png"><meta name="description" content="第一次作为出题人参与一场算法竞赛，感受还是很不同的。相比与参赛者，少了一些紧张刺激新鲜感，当然也少了一些自闭。 比赛在SCUT CODE上举行，总体而言这个系统做的还是挺不错的，响应迅速，功能齐全。唯一要吐槽的就是题目竟然只能添加不能删除！添加比赛需要一些玄之又玄的操作。还有Special Judge也是非常难配置，还缺少了交互功能。第一场由于没有放特别简单的签到题导致大量选手爆0，导致第二场人数"><meta property="og:type" content="blog"><meta property="og:title" content="2020 年「计算机科学与工程学院」新生赛总结"><meta property="og:url" content="https://blog.tootal.xyz/posts/scutpc2020-summary/"><meta property="og:site_name" content="头头博客"><meta property="og:description" content="第一次作为出题人参与一场算法竞赛，感受还是很不同的。相比与参赛者，少了一些紧张刺激新鲜感，当然也少了一些自闭。 比赛在SCUT CODE上举行，总体而言这个系统做的还是挺不错的，响应迅速，功能齐全。唯一要吐槽的就是题目竟然只能添加不能删除！添加比赛需要一些玄之又玄的操作。还有Special Judge也是非常难配置，还缺少了交互功能。第一场由于没有放特别简单的签到题导致大量选手爆0，导致第二场人数"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.tootal.xyz/asset/scutpc2020-summary.cover.webp"><meta property="article:published_time" content="2020-11-23T09:54:01.000Z"><meta property="article:modified_time" content="2020-11-23T09:54:01.000Z"><meta property="article:author" content="黄智权"><meta property="article:tag" content="ACM"><meta property="article:tag" content="算法"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/asset/scutpc2020-summary.cover.webp"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tootal.xyz/posts/scutpc2020-summary/"},"headline":"头头博客","image":[],"datePublished":"2020-11-23T09:54:01.000Z","dateModified":"2020-11-23T09:54:01.000Z","author":{"@type":"Person","name":"黄智权"},"description":"第一次作为出题人参与一场算法竞赛，感受还是很不同的。相比与参赛者，少了一些紧张刺激新鲜感，当然也少了一些自闭。 比赛在SCUT CODE上举行，总体而言这个系统做的还是挺不错的，响应迅速，功能齐全。唯一要吐槽的就是题目竟然只能添加不能删除！添加比赛需要一些玄之又玄的操作。还有Special Judge也是非常难配置，还缺少了交互功能。第一场由于没有放特别简单的签到题导致大量选手爆0，导致第二场人数"}</script><link rel="canonical" href="https://blog.tootal.xyz/posts/scutpc2020-summary/"><link rel="icon" href="/asset/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?a0752fdc3e7a9d538e1cb45af25201a4";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="头头博客" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">头头博客</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">存档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" target="_blank" rel="noopener" href="https://note.tootal.xyz">笔记</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="View on GitHub" href="https://github.com/tootal/tootal.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/asset/scutpc2020-summary.cover.webp" alt="2020 年「计算机科学与工程学院」新生赛总结"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-11-23T09:54:01.000Z" title="2020-11-23T09:54:01.000Z">2020-11-23</time>发表</span><span class="level-item"><time dateTime="2020-11-23T09:54:01.000Z" title="2020-11-23T09:54:01.000Z">2020-11-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a><span> / </span><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B/">算法竞赛</a></span><span class="level-item">1 小时读完 (大约9902个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span><span class="level-item"><a target="_blank" rel="noopener" href="https://github.com/tootal/blog/edit/master/source/_posts/scutpc2020-summary.md"><i class="far fa-edit"></i></a></span></div></div><h1 class="title is-3 is-size-4-mobile">2020 年「计算机科学与工程学院」新生赛总结</h1><div class="content"><p>第一次作为出题人参与一场算法竞赛，感受还是很不同的。相比与参赛者，少了一些紧张刺激新鲜感，当然也少了一些自闭。</p>
<p>比赛在<a target="_blank" rel="noopener" href="https://scut.online">SCUT CODE</a>上举行，总体而言这个系统做的还是挺不错的，响应迅速，功能齐全。唯一要吐槽的就是题目竟然只能添加不能删除！添加比赛需要一些玄之又玄的操作。还有Special Judge也是非常难配置，还缺少了交互功能。第一场由于没有放特别简单的签到题导致大量选手爆0，导致第二场人数锐减。。。不过第二场比赛的题目最后经过调整还是简单了许多的。下面按难度总结一下这次比赛的题目，目前题目已经全部开放了，可以在题库中找到提交。</p>
<p><a target="_blank" rel="noopener" href="https://scut.online/contest/106">第一场比赛链接</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/contest/99">第二场比赛链接</a></p>
<a id="more"></a>
<p>所有相关题目的题库链接：</p>
<p><a target="_blank" rel="noopener" href="https://scut.online/p/658">658. 垃圾邮件</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/661">661. 一个小游戏</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/662">662. Overload</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/663">663. 乒乓球</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/664">664. 超人高中生的基建计划</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/665">665. 灰之魔女的旅行</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/666">666. 艾尔奇亚的国王</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/667">667. umi炒饭</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/668">668. Dirichlet卷积</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/669">669. 1-2 心与心之间的距离，永不点亮的音乐会</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/670">670. 序列构造</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/671">671. 爆炸就是艺术</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/672">672. Tree</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/673">673. 猪灵的胜利之舞</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/674">674. Merge Stone</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/675">675. 学园都市的神秘代码</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/676">676. 世界棋盘</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/677">677. 谜拟Q plus</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/678">678. 射击训练</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/679">679. 小斯巴达们的历练</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/680">680. 主人和雷姆拉姆的秘密</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/682">682. 爆炸就是艺术2</a><br>
<a target="_blank" rel="noopener" href="https://scut.online/p/683">683. 乒乓球2</a></p>
<h2 id="射击训练"><a target="_blank" rel="noopener" href="https://scut.online/p/678">射击训练</a><a class="header-anchor" href="#射击训练">#</a></h2>
<p>题意：统计有多少个点在圆内。</p>
<p>利用距离公式计算即可，浮点数可以直接输出。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p678-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p678-Python">
                        Python
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p678-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">sqr</span><span class="params">(<span class="keyword">double</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b, r, n, cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; r &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">double</span> x, y;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        <span class="keyword">if</span> (sqr(x-a)+sqr(y-b) &lt;= sqr(r)) cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="keyword">double</span>(cnt)/n &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p678-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a, b, r = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">cnt = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    x, y = <span class="built_in">map</span>(<span class="built_in">float</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    <span class="keyword">if</span> (x-a)**<span class="number">2</span>+(y-b)**<span class="number">2</span>&lt;=r*r: cnt += <span class="number">1</span></span><br><span class="line">print(cnt/n)</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="Overload"><a target="_blank" rel="noopener" href="https://scut.online/p/662">Overload</a><a class="header-anchor" href="#Overload">#</a></h2>
<p>题意：一颗以1为根的树，给定每个节点到父亲节点的距离，求到根节点的最大距离。</p>
<p>用dfs或bfs将树遍历一遍即可，也可以用带权并查集计算。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p662-C++ (DFS)">
                        C++ (DFS)
                    </a>
                   </li><li class="tab ">
                    <a href="#p662-C++ (BFS)">
                        C++ (BFS)
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p662-C++ (DFS)" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, fa;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; G(n+<span class="number">1</span>);</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">d</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; fa &gt;&gt; d[i];</span><br><span class="line">        G[fa].push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    function&lt;<span class="keyword">void</span>(<span class="keyword">int</span>)&gt; dfs=[&amp;](<span class="keyword">int</span> u) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : G[u]) &#123;</span><br><span class="line">            d[v] += d[u];</span><br><span class="line">            dfs(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *max_element(d.begin(), d.end()) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p662-C++ (BFS)" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, fa;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; G(n+<span class="number">1</span>);</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">d</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; fa &gt;&gt; d[i];</span><br><span class="line">        G[fa].push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Q.push(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (!Q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = Q.front();</span><br><span class="line">        Q.pop();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : G[u]) &#123;</span><br><span class="line">            d[v] += d[u];</span><br><span class="line">            Q.push(v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *max_element(d.begin(), d.end()) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="乒乓球">乒乓球<a class="header-anchor" href="#乒乓球">#</a></h2>
<h3 id="乒乓球-2"><a target="_blank" rel="noopener" href="https://scut.online/p/663">乒乓球</a><a class="header-anchor" href="#乒乓球-2">#</a></h3>
<article class="message message-immersive is-warning">
<div class="message-body">
此题未加入比赛，<a target="_blank" rel="noopener" href="https://scut.online/p/683">乒乓球2</a>为本题的简化版本。
</div>
</article>
<p>题意：求<span role="math">$\prod\frac{p_i}{100} \mod 1000000007$</span>。</p>
<p>在模意义下求值，利用<a target="_blank" rel="noopener" href="https://oi-wiki.org/math/fermat/#_1">费马小定理</a>与<a target="_blank" rel="noopener" href="https://oi-wiki.org/math/quick-pow/">快速幂算法</a>计算。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p663-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p663-Python">
                        Python
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p663-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll M = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">qpow</span><span class="params">(ll x, ll y)</span> </span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) ans = ans * x % M;</span><br><span class="line">        x = x * x % M;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        ll x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        ans = ans * x % M;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans*qpow(100, n*(M-2))%M &lt;&lt; &#x27;\n&#x27;;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p663-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">n, m = <span class="built_in">int</span>(<span class="built_in">input</span>()), <span class="number">10</span>**<span class="number">9</span>+<span class="number">7</span></span><br><span class="line">a = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>)))</span><br><span class="line">x = reduce((<span class="keyword">lambda</span> x,y:x*y%m), a)</span><br><span class="line">print(x*<span class="built_in">pow</span>(<span class="number">100</span>,n*(m-<span class="number">2</span>),m)%m)</span><br></pre></td></tr></table></figure>
<p>python自带的pow（注意不是math.pow）第三个参数可以传mod，复杂度为快速幂复杂度。</p></div>
                  </div>
<h3 id="乒乓球2"><a target="_blank" rel="noopener" href="https://scut.online/p/683">乒乓球2</a><a class="header-anchor" href="#乒乓球2">#</a></h3>
<p>题意就是输出一列数的最小值和最大值。</p>
<p>这应该是整场比赛中最简单的题目了，只要能熟练掌握一种编程语言（C/C++/Java/Python）都应该能写出这题。</p>
<p>具体实现细节可以参考代码。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p683-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p683-Python">
                        Python
                    </a>
                   </li><li class="tab ">
                    <a href="#p683-Java">
                        Java
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p683-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, Min = <span class="number">100001</span>, Max = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span> (x &gt; Max) Max = x;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; Min) Min = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Min &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; Max &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p683-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">input</span>()</span><br><span class="line">a = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()))</span><br><span class="line">print(<span class="built_in">min</span>(a), <span class="built_in">max</span>(a))</span><br></pre></td></tr></table></figure></div><div id="p683-Java" class="tab-content is-hidden"><p>注：在算法竞赛中Java通常要使用优化的读入方法，但为了简单起见，这里直接用Scanner类读入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> n = sc.nextInt(), min = <span class="number">100001</span>, max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = sc.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (x &gt; max) max = x;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; min) min = x;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.printf(<span class="string">&quot;%d %d\n&quot;</span>, min, max);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<p>从比赛中提交的代码来看，没有通过此题大多数情况是由于<strong>没有初始化变量</strong>。</p>
<h2 id="学园都市的神秘代码"><a target="_blank" rel="noopener" href="https://scut.online/p/675">学园都市的神秘代码</a><a class="header-anchor" href="#学园都市的神秘代码">#</a></h2>
<p>题意：简化下面的代码。</p>
<figure class="highlight cpp"><figcaption><span>点击展开代码 >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> j = <span class="number">1</span>; j &lt;= n / i; ++j) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> k = <span class="number">1</span>; k &lt;= j; ++k) &#123;</span><br><span class="line">                <span class="keyword">long</span> <span class="keyword">long</span> temp = k;</span><br><span class="line">                <span class="keyword">while</span> (!(j % temp == <span class="number">0</span> &amp;&amp; k % temp == <span class="number">0</span>)) &#123;</span><br><span class="line">                    temp--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (temp == <span class="number">1</span>) &#123;</span><br><span class="line">                    ans = (ans + <span class="number">1</span>) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>做出这题不难，只需要把题目中的代码输入到电脑中，运行<strong>找找规律</strong>就能发现答案是n×(n+1)/2。</p>
<p>小技巧：在模意义下除2不用求逆元，可以转换成<span role="math">$(mod+1)/2$</span>。</p>
<p>常见出错原因：<code>n%mod*(n+1)%mod</code>导致溢出！</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p675-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p675-Python">
                        Python
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p675-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> ll=<span class="keyword">long</span> <span class="keyword">long</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        ll n;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        n %= mod;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n*(n+<span class="number">1</span>)%mod*((mod+<span class="number">1</span>)/<span class="number">2</span>)%mod &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p675-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(<span class="built_in">input</span>())):</span><br><span class="line">    n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    print(n*(n+<span class="number">1</span>)//<span class="number">2</span>%<span class="number">998244353</span>)</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="一个小游戏"><a target="_blank" rel="noopener" href="https://scut.online/p/661">一个小游戏</a><a class="header-anchor" href="#一个小游戏">#</a></h2>
<p>题意：一个n×m的01矩阵，每次可以选择以（1，1）为左上角，（x，y）为右下角的矩形翻转，（x，y）必须为1。L先手M后手，无法翻转的人输。</p>
<p>可以发现，每一步无论如何选择，（1，1）是必定要被翻转的。最终局面全0为必败态，反推可知（1，1）处为1是必胜态，为0是必败态。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p661-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p661-Python">
                        Python
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p661-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x &gt;&gt; x &gt;&gt; x;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (x ? <span class="string">&quot;Laurent&quot;</span> : <span class="string">&quot;Makoto&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p661-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">input</span>()</span><br><span class="line">print(<span class="string">&#x27;Laurent&#x27;</span> <span class="keyword">if</span> <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>)[<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;Makoto&#x27;</span>)</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="垃圾邮件"><a target="_blank" rel="noopener" href="https://scut.online/p/658">垃圾邮件</a><a class="header-anchor" href="#垃圾邮件">#</a></h2>
<p>题意：给一个长度为n的字符串s，有q次询问。每次临时将下标p的字符改为c，比较区间<span role="math">$[L_1, R_1]$</span>和<span role="math">$[L_2, R_2]$</span>的子串是否相同。</p>
<article class="message message-immersive is-warning">
<div class="message-body">
此题数据较弱，导致有一些假做法。
</div>
</article>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p658-C++（字符串哈希）">
                        C++（字符串哈希）
                    </a>
                   </li><li class="tab ">
                    <a href="#p658-C++（string）">
                        C++（string）
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p658-C++（字符串哈希）" class="tab-content "><p>期望的做法是使用<a target="_blank" rel="noopener" href="https://oi-wiki.org/string/hash/">字符串哈希</a>，每次询问可以做到<code>O(1)</code>。</p>
<p><span role="math">$hs[n]$</span>表示字符串<span role="math">$s[1…n]$</span>的哈希值，<span role="math">$bn[n]$</span>表示<span role="math">$base^n$</span>，均采用<code>unsigned long long</code>自然溢出。</p>
<p>子串<span role="math">$s[l…r]$</span>的哈希值为<span role="math">$hs[r]-hs[l-1]\times bn[r-l+1]$</span>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> base = <span class="number">131</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="function">ull <span class="title">tr</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123; <span class="keyword">return</span> c-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> n, q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    vector&lt;ull&gt; hs(n+1), bn(n+1);</span><br><span class="line">    bn[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bn[i] = bn[i<span class="number">-1</span>]*base;</span><br><span class="line">        hs[i] = hs[i<span class="number">-1</span>]*base+tr(s[i<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> l1, r1, l2, r2, p;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; l1 &gt;&gt; r1 &gt;&gt; l2 &gt;&gt; r2 &gt;&gt; p &gt;&gt; c;</span><br><span class="line">        ull h1 = hs[r1]-hs[l1<span class="number">-1</span>]*bn[r1-l1+<span class="number">1</span>];</span><br><span class="line">        ull h2 = hs[r2]-hs[l2<span class="number">-1</span>]*bn[r2-l2+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (l1 &lt;= p &amp;&amp; p &lt;= r1) h1 += (tr(c)-tr(s[p<span class="number">-1</span>])) * bn[r1-p];</span><br><span class="line">        <span class="keyword">if</span> (l2 &lt;= p &amp;&amp; p &lt;= r2) h2 += (tr(c)-tr(s[p<span class="number">-1</span>])) * bn[r2-p];</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; (h1 == h2 ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p658-C++（string）" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> n, q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="keyword">int</span> l1, r1, l2, r2, p;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; l1 &gt;&gt; r1 &gt;&gt; l2 &gt;&gt; r2 &gt;&gt; p &gt;&gt; c;</span><br><span class="line">        swap(c, s[p<span class="number">-1</span>]);</span><br><span class="line">        <span class="keyword">if</span> (s.substr(l1<span class="number">-1</span>, r1-l1+<span class="number">1</span>)==s.substr(l2<span class="number">-1</span>, r2-l2+<span class="number">1</span>)) </span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;yes\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;no\n&quot;</span>;</span><br><span class="line">        swap(c, s[p<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="超人高中生的基建计划"><a target="_blank" rel="noopener" href="https://scut.online/p/664">超人高中生的基建计划</a><a class="header-anchor" href="#超人高中生的基建计划">#</a></h2>
<p>题意：n个点，i、j边权为i|j(i位或j），求最小生成树。<br>
分析：显然边权不可能小于本身点的编号。对于奇数点，与1连最划算，边权为本身。剩下的点中除了<span role="math">$(10000)_2$</span>这种的，都可以做到边权为本身。用log2统计这类点的数量。</p>
<p>答案就是<span role="math">$\frac{n\times (n+1)}{2}-1+\lfloor\log_2n\rfloor$</span></p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p664-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p664-Python">
                        Python
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p664-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> n;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; n*(n+<span class="number">1</span>)/<span class="number">2</span><span class="number">-1</span>+(<span class="keyword">int</span>)log2(n) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p664-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> log2</span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">print(n*(n+<span class="number">1</span>)//<span class="number">2</span>-<span class="number">1</span>+<span class="built_in">int</span>(log2(n)))</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="灰之魔女的旅行"><a target="_blank" rel="noopener" href="https://scut.online/p/665">灰之魔女的旅行</a><a class="header-anchor" href="#灰之魔女的旅行">#</a></h2>
<p>题意：一颗以1为根的树，每次可以选则一个未访问的点，访问该点及其子节点。先选择1节点，问最多能选择几次。</p>
<article class="message message-immersive is-warning">
<div class="message-body">
本题输入数据量较大，可以使用<code>ios::sync_with_stdio(false), cin.tie(0);</code>关闭流同步以加速cin输入。或者使用scanf/getchar/fread等方法。
</div>
</article>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p665-树形DP">
                        树形DP
                    </a>
                   </li><li class="tab ">
                    <a href="#p665-自底向上贪心">
                        自底向上贪心
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p665-树形DP" class="tab-content "><p>树形DP入门题，类似题目：<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1352">P1352 没有上司的舞会</a>。</p>
<p>设<span role="math">$f[i][0]$</span>表示不选择节点<span role="math">$i$</span>的最大答案，<span role="math">$f[i][1]$</span>表示选择节点<span role="math">$i$</span>的最大答案。<br>
转移：<span role="math">$f[i][0]=\sum max(f[i.son][1], f[i.son][0])$</span><br>
<span role="math">$f[i][1]=\sum f[i.son][0]$</span></p>
<p>初始值<span role="math">$f[i][1]=1$</span>，答案为<span role="math">$f[1][1]$</span>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> n; <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; G(n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v; <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].push_back(v), G[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">array</span>&lt;<span class="keyword">int</span>, 2&gt;&gt; f(n+<span class="number">1</span>);</span><br><span class="line">    function&lt;<span class="keyword">void</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)&gt; dfs=[&amp;](<span class="keyword">int</span> u, <span class="keyword">int</span> p) &#123;</span><br><span class="line">        f[u][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : G[u]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (v == p) <span class="keyword">continue</span>;</span><br><span class="line">            dfs(v, u);</span><br><span class="line">            f[u][<span class="number">0</span>] += max(f[v][<span class="number">0</span>], f[v][<span class="number">1</span>]);</span><br><span class="line">            f[u][<span class="number">1</span>] += f[v][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f[<span class="number">1</span>][<span class="number">1</span>] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p665-自底向上贪心" class="tab-content is-hidden"><p>由于输入保证为一棵树，即有子节点数目大于等于父节点数目，因此从叶子节点往上贪心选择可以保证最优。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; G(n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].push_back(v);</span><br><span class="line">        G[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; <span class="title">vis</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> v : G[<span class="number">1</span>]) vis[v] = <span class="literal">true</span>;</span><br><span class="line">    function&lt;<span class="keyword">void</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)&gt; dfs=[&amp;](<span class="keyword">int</span> u, <span class="keyword">int</span> fa) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v : G[u]) <span class="keyword">if</span> (v != fa) dfs(v, u);</span><br><span class="line">        <span class="keyword">if</span> (!vis[u]) vis[u] = vis[fa] = <span class="literal">true</span>, ans++;</span><br><span class="line">    &#125;;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="merge-stone"><a target="_blank" rel="noopener" href="https://scut.online/p/674">merge stone</a><a class="header-anchor" href="#merge-stone">#</a></h2>
<p>分析：【多叉哈夫曼树】【贪心】</p>
<p>参考代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt; //pb_ds库</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long </span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    LL w,h;</span><br><span class="line">    node(LL W, LL H)&#123;</span><br><span class="line">        w=W,h=H;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(node a, node b)&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.w!=b.w) <span class="keyword">return</span> a.w&gt;b.w; </span><br><span class="line">    <span class="keyword">return</span> a.h&gt;b.h;  <span class="comment">//如果长度相等，高度小的优先</span></span><br><span class="line">&#125; <span class="comment">//构造小根堆的操作。</span></span><br><span class="line">__gnu_pbds::<span class="built_in">priority_queue</span> &lt;node, <span class="built_in">std</span>::less&lt;node&gt;, __gnu_pbds::pairing_heap_tag&gt; q; <span class="comment">//优先队列</span></span><br><span class="line"><span class="keyword">int</span> n,k,cnt;</span><br><span class="line">LL temp,maxh,ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    k = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;temp);</span><br><span class="line">        q.push(node(temp,<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>((n<span class="number">-1</span>)%(k<span class="number">-1</span>) != <span class="number">0</span>) cnt=k<span class="number">-1</span>-(n<span class="number">-1</span>)%(k<span class="number">-1</span>);  <span class="comment">//判断是否要补空节点</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=cnt; i++)</span><br><span class="line">        q.push(node(<span class="number">0</span>,<span class="number">1</span>)); <span class="comment">//补空节点</span></span><br><span class="line">    cnt+=n;     <span class="comment">//cnt为根节点个数(最初每个根节点都为其本身）</span></span><br><span class="line">    <span class="keyword">while</span>(cnt&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        temp=maxh=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)&#123;</span><br><span class="line">            temp+=q.top().w;</span><br><span class="line">            maxh=max(maxh,q.top().h);</span><br><span class="line">            q.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        ans+=temp; <span class="comment">//维护带权路径长度之和</span></span><br><span class="line">        q.push(node(temp, maxh+<span class="number">1</span>)); <span class="comment">//合并，高度为最高子树高度+1</span></span><br><span class="line">        cnt-=k<span class="number">-1</span>; <span class="comment">//减少根节点</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<h2 id="心与心之间的距离，永不点亮的音乐会"><a target="_blank" rel="noopener" href="https://scut.online/p/669">心与心之间的距离，永不点亮的音乐会</a><a class="header-anchor" href="#心与心之间的距离，永不点亮的音乐会">#</a></h2>
<article class="message message-immersive is-warning">
<div class="message-body">
此题因为数据原因未加入正赛，放在了热身赛。
</div>
</article>
<p>题意：问两颗二叉搜索树上是否存在两个和为x的值。（分别位于两棵树上）</p>
<p>分析：【双指针】期望复杂度O(n)，然而用set就可以过。。</p>
<p>参考代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(linker, “/STACK:1024000000,1024000000”)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S 100000</span></span><br><span class="line"><span class="keyword">char</span> bf[S], *p1 = bf, *p2 = bf;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> nc() (p1==p2&amp;&amp;(p2=(p1=bf)+fread(bf,1,S,stdin),p2==p1)?-1:*p1++)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ll x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = nc();</span><br><span class="line">    <span class="keyword">for</span> (; (ch &lt; <span class="string">&#x27;0&#x27;</span> || ch &gt; <span class="string">&#x27;9&#x27;</span>) &amp;&amp; (ch != <span class="string">&#x27;-&#x27;</span>); ch = nc());</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>)ch = nc(), f = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; ch &lt;= <span class="string">&#x27;9&#x27;</span> &amp;&amp; ch &gt;= <span class="string">&#x27;0&#x27;</span>; x = x * <span class="number">10</span> + ch - <span class="number">48</span>, ch = nc());</span><br><span class="line">    <span class="keyword">return</span> f * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 500050</span></span><br><span class="line"><span class="keyword">int</span> t[N][<span class="number">2</span>], n, m, tot;</span><br><span class="line">ll val[N], a[N], b[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x][<span class="number">0</span>] &gt; <span class="number">0</span>)dfs(t[x][<span class="number">0</span>]);</span><br><span class="line">    a[++tot] = x;</span><br><span class="line">    <span class="keyword">if</span> (t[x][<span class="number">1</span>] &gt; <span class="number">0</span>)dfs(t[x][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x][<span class="number">0</span>] &gt; <span class="number">0</span>)dfs2(t[x][<span class="number">0</span>]);</span><br><span class="line">    b[++tot] = x;</span><br><span class="line">    <span class="keyword">if</span> (t[x][<span class="number">1</span>] &gt; <span class="number">0</span>)dfs2(t[x][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    n = read(), m = read();</span><br><span class="line">    ll x = read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        val[i] = read();</span><br><span class="line">        t[i][<span class="number">0</span>] = read(), t[i][<span class="number">1</span>] = read();</span><br><span class="line">    &#125;</span><br><span class="line">    tot = <span class="number">0</span>, dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)a[i] = val[a[i]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        val[i] = read();</span><br><span class="line">        t[i][<span class="number">0</span>] = read(), t[i][<span class="number">1</span>] = read();</span><br><span class="line">    &#125;</span><br><span class="line">    tot = <span class="number">0</span>, dfs2(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)b[i] = val[b[i]];</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">1</span>, r = m;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= n &amp;&amp; r &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (a[l] + b[r] &gt; x &amp;&amp; r &gt;= <span class="number">1</span>)--r;</span><br><span class="line">        <span class="keyword">if</span> (a[l] + b[r] == x &amp;&amp; r &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++l;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(flag ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;./data/10.in&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--)solve();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="convolution"><a target="_blank" rel="noopener" href="https://scut.online/p/668">convolution</a><a class="header-anchor" href="#convolution">#</a></h2>
<p>【Dirichlet卷积】</p>
<p>参考代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">qpow</span><span class="params">(ll x, ll y)</span> </span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) ans = ans * x % M;</span><br><span class="line">        x = x * x % M;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// freopen(&quot;data.in&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">// freopen(&quot;data.out&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="keyword">int</span> m;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; m;</span><br><span class="line">        ll ans = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            ll p, q;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; p &gt;&gt; q;</span><br><span class="line">            ans = ans * ((p + p * q % M - q + M) % M * qpow(p, q - <span class="number">1</span>) % M) % M;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="小斯巴达们的历练"><a target="_blank" rel="noopener" href="https://scut.online/p/679">小斯巴达们的历练</a><a class="header-anchor" href="#小斯巴达们的历练">#</a></h2>
<p>分析：<br>
【最短路】【Dijkstra算法】</p>
<p>参考代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 201000 </span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">qnode</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> x;LL c;</span><br><span class="line">	qnode(<span class="keyword">int</span> _x=<span class="number">0</span>,<span class="keyword">int</span> _c=<span class="number">0</span>):x(_x),c(_c)&#123;&#125;</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> qnode &amp;y) <span class="keyword">const</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> c&gt;y.c;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;qnode&gt; q;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> y,nt;LL c;</span><br><span class="line">&#125;a[maxn*<span class="number">2</span>];<span class="keyword">int</span> len,first[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,LL c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	len++;a[len].y=y;a[len].c=c;</span><br><span class="line">	a[len].nt=first[x];first[x]=len;</span><br><span class="line">&#125;</span><br><span class="line">LL d[<span class="number">4</span>][maxn];<span class="keyword">int</span> c[maxn];<span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function">LL <span class="title">mymin</span><span class="params">(LL x,LL y)</span></span>&#123;<span class="keyword">return</span> (x&lt;y)?x:y;&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> S,<span class="keyword">int</span> tt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(d[tt],<span class="number">-1</span>,<span class="keyword">sizeof</span>(d[tt]));</span><br><span class="line">	<span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis)); </span><br><span class="line">	d[tt][S]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (!q.empty()) q.pop();</span><br><span class="line">	q.push(qnode(S,<span class="number">0</span>));</span><br><span class="line">	vis[S]=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">while</span> (!q.empty())</span><br><span class="line">	&#123;</span><br><span class="line">		qnode now = q.top();</span><br><span class="line">		q.pop();</span><br><span class="line">		<span class="keyword">int</span> x=now.x;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> k=first[x];k!=<span class="number">-1</span>;k=a[k].nt)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> y=a[k].y;</span><br><span class="line">			<span class="keyword">if</span> (d[tt][y]==<span class="number">-1</span> || d[tt][y]&gt;=d[tt][x]+a[k].c)</span><br><span class="line">			&#123;</span><br><span class="line">				d[tt][y]=d[tt][x]+a[k].c;</span><br><span class="line">				<span class="keyword">if</span> (tt&gt;<span class="number">0</span> &amp;&amp; c[y]&lt;<span class="number">3</span>) <span class="keyword">continue</span>;</span><br><span class="line">				<span class="keyword">if</span> (!vis[y])</span><br><span class="line">				&#123;</span><br><span class="line">					q.push(qnode(y,d[tt][y]));</span><br><span class="line">					vis[y]=<span class="literal">true</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		vis[x]=<span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; qans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//freopen(&quot;01.in&quot;,&quot;r&quot;,stdin);</span></span><br><span class="line">	<span class="comment">//freopen(&quot;01.out&quot;,&quot;w&quot;,stdout);</span></span><br><span class="line">	<span class="keyword">int</span> n,m,i,t,x,y,s[<span class="number">4</span>];LL ans,z;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">	t=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;c[i]);</span><br><span class="line">		<span class="keyword">if</span> (c[i]==<span class="number">1</span>) t=i;</span><br><span class="line">	&#125;</span><br><span class="line">	len=<span class="number">0</span>;<span class="built_in">memset</span>(first,<span class="number">-1</span>,<span class="keyword">sizeof</span>(first));</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%lld&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">		ins(x,y,z);ins(y,x,z);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s[i]);</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++) </span><br><span class="line">	&#123;</span><br><span class="line">		dfs(s[i],i);</span><br><span class="line">		<span class="comment">/*for (int j=1;j&lt;=n;j++)</span></span><br><span class="line"><span class="comment">		 printf(&quot;%d &quot;,d[i][j]);</span></span><br><span class="line"><span class="comment">		printf(&quot;\n&quot;);*/</span> </span><br><span class="line">	&#125;</span><br><span class="line">	dfs(t,<span class="number">0</span>);</span><br><span class="line">	<span class="comment">/*for (int j=1;j&lt;=n;j++)</span></span><br><span class="line"><span class="comment">	  printf(&quot;%d &quot;,d[0][j]);</span></span><br><span class="line"><span class="comment">	printf(&quot;\n&quot;);*/</span></span><br><span class="line">	ans=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> (!qans.empty()) qans.pop();</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (d[<span class="number">0</span>][i]==<span class="number">-1</span> || d[<span class="number">1</span>][i]==<span class="number">-1</span> || d[<span class="number">2</span>][i]==<span class="number">-1</span> || d[<span class="number">3</span>][i]==<span class="number">-1</span>) <span class="keyword">continue</span>; </span><br><span class="line">		<span class="keyword">if</span> (ans==<span class="number">-1</span> || ans&gt;d[<span class="number">0</span>][i]+d[<span class="number">1</span>][i]+d[<span class="number">2</span>][i]+d[<span class="number">3</span>][i]) </span><br><span class="line">		&#123;</span><br><span class="line">			ans=d[<span class="number">0</span>][i]+d[<span class="number">1</span>][i]+d[<span class="number">2</span>][i]+d[<span class="number">3</span>][i];</span><br><span class="line">			<span class="keyword">while</span> (!qans.empty()) qans.pop();</span><br><span class="line">			qans.push(i);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (ans==d[<span class="number">0</span>][i]+d[<span class="number">1</span>][i]+d[<span class="number">2</span>][i]+d[<span class="number">3</span>][i]) qans.push(i);</span><br><span class="line">		<span class="comment">//printf(&quot;%d %d\n&quot;,i,ans); </span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">	<span class="comment">//while (!qans.empty()) &#123;printf(&quot;%d &quot;,qans.front());qans.pop();&#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">5 6</span></span><br><span class="line"><span class="comment">3 3 3 3 1</span></span><br><span class="line"><span class="comment">1 4 2</span></span><br><span class="line"><span class="comment">1 5 1</span></span><br><span class="line"><span class="comment">2 4 4</span></span><br><span class="line"><span class="comment">2 5 3</span></span><br><span class="line"><span class="comment">3 4 1</span></span><br><span class="line"><span class="comment">4 5 2</span></span><br><span class="line"><span class="comment">1 2 3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">5 5</span></span><br><span class="line"><span class="comment">3 3 3 2 1</span></span><br><span class="line"><span class="comment">1 5 1</span></span><br><span class="line"><span class="comment">2 4 4</span></span><br><span class="line"><span class="comment">2 5 3</span></span><br><span class="line"><span class="comment">3 4 1</span></span><br><span class="line"><span class="comment">4 5 2</span></span><br><span class="line"><span class="comment">1 2 3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">6 11</span></span><br><span class="line"><span class="comment">3 1 3 2 3 3</span></span><br><span class="line"><span class="comment">1 2 3</span></span><br><span class="line"><span class="comment">1 3 1</span></span><br><span class="line"><span class="comment">1 4 2</span></span><br><span class="line"><span class="comment">1 5 4</span></span><br><span class="line"><span class="comment">2 3 4</span></span><br><span class="line"><span class="comment">2 4 1</span></span><br><span class="line"><span class="comment">2 6 4</span></span><br><span class="line"><span class="comment">3 4 2</span></span><br><span class="line"><span class="comment">4 5 3</span></span><br><span class="line"><span class="comment">4 6 3</span></span><br><span class="line"><span class="comment">5 6 1</span></span><br><span class="line"><span class="comment">3 5 6</span></span><br><span class="line"><span class="comment">*/</span> </span><br></pre></td></tr></table></figure>
<h2 id="序列构造"><a target="_blank" rel="noopener" href="https://scut.online/p/670">序列构造</a><a class="header-anchor" href="#序列构造">#</a></h2>
<p>题意：构造一个长度为 n 的整数序列，使得该序列的和与积相等，且恰好等于 n。</p>
<h3 id="构造法">构造法<a class="header-anchor" href="#构造法">#</a></h3>
<p>参考证明：<a target="_blank" rel="noopener" href="http://lanqi.org/everyday/25568/">每日一题【1050】和积相等</a></p>
<p><strong>情形一</strong>　 n=4k+1 时，可以分成 2k 个 −1，2k 个 1，1 个 4k+1．<br>
<strong>情形二</strong>　n=8k 时，可以分成 2k 个 −1，6k−2 个 1，1 个 2，1 个 4k．<br>
<strong>情形三</strong>　 n=8k+12 时，可以分成 2k+1 个 −1，6k+9 个 1，1 个 −2，1 个 4k+6．<br>
<strong>情形四</strong>　 n=4 时，|ai|∈{1,2,4}，其中 i=1,2,3,4，且只有可能取 1 个 4 或 2 个 2，容易验证都不可行．<br>
<strong>情形五</strong>　n=4k+2 时，由于a1⋅a2⋯an≡2(mod4),于是 a1,a2,⋯,an 为 1 个偶数和 4k+1 个奇数，它们的和为奇数，矛盾．<br>
<strong>情形六</strong>　 n=4k+3 时，a1,a2,⋯,an 为 4k+3 个奇数，设其中模 4 余 1 的有 m 个，模 4 余 3 的有 4k+3−m 个，因此a1+a2+⋯+an≡m−(4k+3−m)≡2m+1≡3(mod4),于是 m 为奇数，进而a1⋅a2⋯an≡<span role="math">$1^m⋅(−1)^{4k+3−m}$</span>≡1(mod4),矛盾．<br>
综上所述，所有具有性质 Q 的正整数构成的集合为{x∣x≡0,1,4,5(mod8),x≠4,x∈N∗}.</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p670构造-C++">
                        C++
                    </a>
                   </li><li class="tab ">
                    <a href="#p670构造-Python">
                        Python
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p670构造-C++" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> t, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (t--) <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> nm = n % <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">4</span>||nm==<span class="number">2</span>||nm==<span class="number">3</span>||nm==<span class="number">6</span>||nm==<span class="number">7</span>) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;no\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;yes\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">4</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> k = n / <span class="number">4</span>;</span><br><span class="line">        print(<span class="number">2</span>*k, <span class="number">-1</span>);</span><br><span class="line">        print(<span class="number">2</span>*k, <span class="number">1</span>);</span><br><span class="line">        print(<span class="number">1</span>, <span class="number">4</span>*k+<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n % <span class="number">8</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> k = n / <span class="number">8</span>;</span><br><span class="line">        print(<span class="number">2</span>*k, <span class="number">-1</span>);</span><br><span class="line">        print(<span class="number">6</span>*k<span class="number">-2</span>, <span class="number">1</span>);</span><br><span class="line">        print(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        print(<span class="number">1</span>, <span class="number">4</span>*k);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n % <span class="number">8</span> == <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> k = (n<span class="number">-12</span>)/<span class="number">8</span>;</span><br><span class="line">        print(<span class="number">2</span>*k+<span class="number">1</span>, <span class="number">-1</span>);</span><br><span class="line">        print(<span class="number">6</span>*k+<span class="number">9</span>, <span class="number">1</span>);</span><br><span class="line">        print(<span class="number">1</span>, <span class="number">-2</span>);</span><br><span class="line">        print(<span class="number">1</span>, <span class="number">4</span>*k+<span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p670构造-Python" class="tab-content is-hidden"><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">4</span> <span class="keyword">or</span> n%<span class="number">8</span> <span class="keyword">in</span> [<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">7</span>]:</span><br><span class="line">    print(<span class="string">&#x27;no&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">&#x27;yes&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> n % <span class="number">4</span> == <span class="number">1</span>:</span><br><span class="line">        k = n // <span class="number">4</span></span><br><span class="line">        print(<span class="string">&#x27;1 -1 &#x27;</span>*(<span class="number">2</span>*k), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        print(<span class="number">4</span>*k+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> n % <span class="number">8</span> == <span class="number">0</span>:</span><br><span class="line">        k = n // <span class="number">8</span></span><br><span class="line">        print(<span class="string">&#x27;1 &#x27;</span>*(<span class="number">6</span>*k-<span class="number">2</span>), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        print(<span class="string">&#x27;-1 &#x27;</span>*(<span class="number">2</span>*k), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        print(<span class="number">2</span>, <span class="number">4</span>*k)</span><br><span class="line">    <span class="keyword">elif</span> n % <span class="number">8</span> == <span class="number">4</span>:</span><br><span class="line">        k = (n-<span class="number">12</span>)//<span class="number">8</span></span><br><span class="line">        print(<span class="string">&#x27;1 &#x27;</span>*(<span class="number">6</span>*k+<span class="number">9</span>), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        print(<span class="string">&#x27;-1 &#x27;</span>*(<span class="number">2</span>*k+<span class="number">1</span>), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        print(-<span class="number">2</span>, <span class="number">4</span>*k+<span class="number">6</span>)</span><br></pre></td></tr></table></figure></div>
                  </div>
<h3 id="搜索法">搜索法<a class="header-anchor" href="#搜索法">#</a></h3>
<p>由<span role="math">$\lfloor\log_210^5\rfloor=16$</span>可知，序列中最多有16个绝对值大于1的数，剩下的数用1或-1填充。</p>
<p>于是可以考虑搜索，<code>dfs(num, target)</code>尝试用target个大于1的数构造一个乘积为num的序列，满足乘积后<code>check</code>检查是否能通过填充1或-1来满足和也为n。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n, cnt, yinshu[maxn];</span><br><span class="line"><span class="keyword">bool</span> found;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++) sum += yinshu[i];</span><br><span class="line">    <span class="keyword">int</span> need = n - sum;</span><br><span class="line">    <span class="keyword">int</span> remain = n - cnt;</span><br><span class="line">    <span class="keyword">if</span> (remain &gt;= need &amp;&amp; ((remain - need) % <span class="number">4</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        found = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;yes\n&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> xx = (remain - need) / <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= xx; i++) <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;-1 -1 1 1 &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= need; i++) <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;1 &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; cnt; i++) <span class="built_in">cout</span> &lt;&lt; yinshu[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; yinshu[cnt] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (found) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (cnt == target - <span class="number">1</span>) &#123;</span><br><span class="line">        yinshu[++cnt] = num;</span><br><span class="line">        check();</span><br><span class="line">        <span class="keyword">if</span> (!found) cnt--;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">2</span>; x * x &lt;= num; x++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (num % x) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> y = num / x;</span><br><span class="line">        yinshu[++cnt] = x;</span><br><span class="line">        dfs(y, target);</span><br><span class="line">        <span class="keyword">if</span> (found) <span class="keyword">return</span>; <span class="keyword">else</span> cnt--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    found = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">16</span>; i++) &#123;</span><br><span class="line">        cnt = <span class="number">0</span>;</span><br><span class="line">        dfs(n, i);</span><br><span class="line">        <span class="keyword">if</span> (found) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (found == <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;no\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="爆炸就是艺术">爆炸就是艺术<a class="header-anchor" href="#爆炸就是艺术">#</a></h2>
<h3 id="爆炸就是艺术2"><a target="_blank" rel="noopener" href="https://scut.online/p/682">爆炸就是艺术2</a><a class="header-anchor" href="#爆炸就是艺术2">#</a></h3>
<p>题意：给n个TNT的坐标，一个TNT可以引爆上下左右<strong>以及本身位置</strong>的TNT。点燃代价为到原点距离，求最小代价。</p>
<p>判断点是否存在可以用map/set/hash，找连通块可以用bfs/dfs/dsu，做法非常多。注意实现细节，<strong>有重复的点</strong>。</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p682-map+dsu">
                        map+dsu
                    </a>
                   </li><li class="tab ">
                    <a href="#p682-数据生成器">
                        数据生成器
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p682-map+dsu" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n; <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; p(n);</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;, <span class="keyword">int</span>&gt; st;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; <span class="title">w</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p[i].first &gt;&gt; p[i].second;</span><br><span class="line">        st[p[i]] = i;</span><br><span class="line">        w[i] = <span class="number">1l</span>l*p[i].first*p[i].first+<span class="number">1l</span>l*p[i].second*p[i].second;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">f</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) f[i] = i;</span><br><span class="line">    function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; Find = [&amp;](<span class="keyword">int</span> x) &#123; <span class="keyword">return</span> x == f[x] ? x : f[x] = Find(f[x]); &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> dx[]&#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, dy[]&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">auto</span> pos = st.find(&#123;p[i].first+dx[j], p[i].second+dy[j]&#125;);</span><br><span class="line">            <span class="keyword">if</span> (pos == st.end()) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> a = Find(pos-&gt;second), b = Find(i);</span><br><span class="line">            <span class="keyword">if</span> (a != b) &#123;</span><br><span class="line">                f[a] = b;</span><br><span class="line">                w[b] = min(w[b], w[a]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">if</span> (i == Find(i)) ans += (<span class="keyword">long</span> <span class="keyword">long</span>)<span class="built_in">sqrt</span>(w[i]);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T; <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p682-数据生成器" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;testlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> testIndex = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nextTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    testIndex++;</span><br><span class="line">    freopen((<span class="string">&quot;data/&quot;</span>+to_string(testIndex)+<span class="string">&quot;.in&quot;</span>).c_str(), <span class="string">&quot;w&quot;</span>, <span class="built_in">stdout</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">randTest</span><span class="params">(<span class="keyword">int</span> mint=<span class="number">1</span>, <span class="keyword">int</span> maxt=<span class="number">10</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">              <span class="keyword">int</span> minn=<span class="number">1</span>, <span class="keyword">int</span> maxn=<span class="number">1e5</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">              <span class="keyword">int</span> minx=<span class="number">-1e9</span>, <span class="keyword">int</span> maxx=<span class="number">1e9</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">              <span class="keyword">int</span> miny=<span class="number">-1e9</span>, <span class="keyword">int</span> maxy=<span class="number">1e9</span>)</span> </span>&#123;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="keyword">int</span> T = rnd.next(mint, maxt);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; T &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n = rnd.next(minn, maxn);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; rnd.next(minx, maxx) &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; rnd.next(miny, maxy) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    registerGen(argc, argv, <span class="number">1</span>);</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">3</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">8</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="number">0</span> &lt;&lt;  <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (<span class="keyword">int</span>)<span class="number">1e9</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; (<span class="keyword">int</span>)<span class="number">1e9</span> &lt;&lt;  <span class="built_in">endl</span>;</span><br><span class="line">    randTest(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1e2</span>, <span class="number">1</span>, <span class="number">1e4</span>, <span class="number">1</span>, <span class="number">1e4</span>);</span><br><span class="line">    randTest(<span class="number">1</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">1e4</span>, <span class="number">-1e5</span>, <span class="number">1e5</span>, <span class="number">-1e5</span>, <span class="number">1e5</span>);</span><br><span class="line">    randTest(<span class="number">10</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">1e4</span>, <span class="number">-1e5</span>, <span class="number">1e5</span>, <span class="number">-1e5</span>, <span class="number">1e5</span>);</span><br><span class="line">    randTest();</span><br><span class="line">    randTest();</span><br><span class="line">    randTest(<span class="number">10</span>, <span class="number">10</span>, <span class="number">1e5</span>, <span class="number">1e5</span>, <span class="number">-10</span>, <span class="number">10</span>, <span class="number">-1e9</span>, <span class="number">1e9</span>);</span><br><span class="line">    randTest(<span class="number">10</span>, <span class="number">10</span>, <span class="number">1e5</span>, <span class="number">1e5</span>, <span class="number">-1e9</span>, <span class="number">1e9</span>, <span class="number">-10</span>, <span class="number">10</span>);</span><br><span class="line">    randTest(<span class="number">10</span>, <span class="number">10</span>, <span class="number">1e5</span>, <span class="number">1e5</span>, <span class="number">-10</span>, <span class="number">10</span>, <span class="number">-10</span>, <span class="number">10</span>);</span><br><span class="line">    randTest(<span class="number">10</span>, <span class="number">10</span>, <span class="number">1e5</span>, <span class="number">1e5</span>, <span class="number">1e9</span>, <span class="number">1e9</span>, <span class="number">-1e9</span>, <span class="number">-1e9</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<h3 id="爆炸就是艺术-2"><a target="_blank" rel="noopener" href="https://scut.online/p/671">爆炸就是艺术</a><a class="header-anchor" href="#爆炸就是艺术-2">#</a></h3>
<article class="message message-immersive is-warning">
<div class="message-body">
此题未加入比赛，<a target="_blank" rel="noopener" href="https://scut.online/p/682">爆炸就是艺术2</a>为本题的简化版本。
</div>
</article>
<p>题意：给出平面上n个点的坐标，点i爆炸的代价为i到原点的距离（向下取整），点i爆炸会同时让与点i距离小于等于7的点爆炸。问爆炸所有点的最小代价。<br>
分析：类似平面最近点对的方法建图。然后用并查集缩点。</p>
<p>对每个点扫描半径7以内的其他点的做法容易被卡。（虽然已经开到3s了）<br>
建图具体做法参考：<a target="_blank" rel="noopener" href="https://oi-wiki.org/geometry/nearest-points/#_6">平面最近点对——非分治算法</a></p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p671-最近点对建图+dsu">
                        最近点对建图+dsu
                    </a>
                   </li><li class="tab ">
                    <a href="#p671-fread+hash+dsu">
                        fread+hash+dsu
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p671-最近点对建图+dsu" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> K = <span class="number">7</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y, i;</span><br><span class="line">    Point(<span class="keyword">int</span> x = <span class="number">0</span>, <span class="keyword">int</span> y = <span class="number">0</span>, <span class="keyword">int</span> i = <span class="number">0</span>) : x(x), y(y), i(i) &#123;&#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Point &amp;o) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x &lt; o.x || (x == o.x &amp;&amp; y &lt; o.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Point &amp;o) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x == o.x &amp;&amp; y == o.y &amp;&amp; i == o.i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cmpy</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> Point &amp;a, <span class="keyword">const</span> Point &amp;b)</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> a.y &lt; b.y; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">ll <span class="title">dis2</span><span class="params">(<span class="keyword">const</span> Point &amp;a, <span class="keyword">const</span> Point &amp;b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (ll)(a.x - b.x) * (a.x - b.x) + (ll)(a.y - b.y) * (a.y - b.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;Point&gt; <span class="title">p</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p[i].x &gt;&gt; p[i].y;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p.begin(), p.end());</span><br><span class="line">    p.erase(unique(p.begin(), p.end()), p.end());</span><br><span class="line">    n = (<span class="keyword">int</span>)p.size();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) p[i].i = i;</span><br><span class="line">    <span class="built_in">multiset</span>&lt;Point, cmpy&gt; s;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">par</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;ll&gt; <span class="title">w</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        w[i] = (ll)p[i].x * p[i].x + (ll)p[i].y * p[i].y;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) par[i] = i;</span><br><span class="line">    function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; Find = [&amp;](<span class="keyword">int</span> x) &#123;</span><br><span class="line">        <span class="keyword">return</span> x == par[x] ? x : par[x] = Find(par[x]);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, l = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; i &amp;&amp; p[i].x - p[l].x &gt; K) s.erase(s.find(p[l++]));</span><br><span class="line">        <span class="keyword">auto</span> lowy = s.lower_bound(Point(p[i].x, p[i].y - K));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = lowy; it != s.end() &amp;&amp; it-&gt;y - p[i].y &lt;= K; it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis2(*it, p[i]) &lt;= K * K) &#123;</span><br><span class="line">                <span class="keyword">int</span> u = p[i].i, v = it-&gt;i;</span><br><span class="line">                <span class="keyword">int</span> fu = Find(u), fv = Find(v);</span><br><span class="line">                <span class="keyword">if</span> (fu != fv) &#123;</span><br><span class="line">                    w[fv] = min(w[fv], w[fu]);</span><br><span class="line">                    par[fu] = fv;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        s.insert(p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">if</span> (Find(i) == i) ans += (ll)<span class="built_in">sqrt</span>(w[i]);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p671-fread+hash+dsu" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">In</span> &#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">5e7</span>;</span><br><span class="line">    <span class="keyword">char</span> s[N], *p;</span><br><span class="line">    <span class="keyword">size_t</span> c;</span><br><span class="line">    In() &#123; c = fread(s, <span class="number">1</span>, N, <span class="built_in">stdin</span>), p = s; &#125;</span><br><span class="line">&#125; in;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">In&amp; <span class="keyword">operator</span>&gt;&gt;(In &amp;i, T &amp;x) &#123;</span><br><span class="line">    <span class="keyword">char</span> *&amp;p = i.p;</span><br><span class="line">    <span class="keyword">while</span> (*p != <span class="string">&#x27;-&#x27;</span> &amp;&amp; (*p &lt; <span class="string">&#x27;0&#x27;</span> || *p &gt; <span class="string">&#x27;9&#x27;</span>)) p++;</span><br><span class="line">    <span class="keyword">if</span> (p == i.s + i.c) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">bool</span> sgn = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (*p == <span class="string">&#x27;-&#x27;</span>) sgn = <span class="literal">true</span>, p++;</span><br><span class="line">    <span class="keyword">for</span> (x = <span class="number">0</span>; *p &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; *p &lt;= <span class="string">&#x27;9&#x27;</span>; p++) x = x * <span class="number">10</span> + *p - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (sgn) x = -x;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">hash_tables</span> &#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> sz = <span class="number">1000037</span>;</span><br><span class="line">    <span class="keyword">int</span> head[sz], nxt[sz], mark, tmmark[sz], key2[sz], len;</span><br><span class="line">    ll key[sz];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">        mark++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(ll s, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> val = s % sz;</span><br><span class="line">        <span class="keyword">if</span> (val &lt; <span class="number">0</span>) val += sz;</span><br><span class="line">        <span class="keyword">if</span> (tmmark[val] != mark) tmmark[val] = mark, head[val] = <span class="number">-1</span>;</span><br><span class="line">        nxt[len] = head[val], head[val] = len, key[len] = s, key2[len] = v;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">(ll s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> val = s % sz;</span><br><span class="line">        <span class="keyword">if</span>(val &lt; <span class="number">0</span>) val += sz;</span><br><span class="line">        <span class="keyword">if</span>(tmmark[val] != mark) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = head[val]; j != <span class="number">-1</span>; j = nxt[j]) <span class="keyword">if</span>(key[j] == s) <span class="keyword">return</span> key2[j];</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;g;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100005</span>;</span><br><span class="line"><span class="keyword">int</span> par[maxn], x[maxn], y[maxn]; ll w[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> x==par[x]?x:par[x]=find(par[x]);&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; v;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    g.clear();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> dx=<span class="number">-7</span>;dx&lt;=<span class="number">7</span>;++dx) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> dy=<span class="number">0</span>;dy&lt;=<span class="number">7</span>;++dy) &#123;</span><br><span class="line">            <span class="keyword">if</span>(dx*dx+dy*dy&lt;=<span class="number">49</span>) v.push_back(&#123;dx,dy&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    in &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        in &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) par[i]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) &#123;</span><br><span class="line">            in &gt;&gt; x[i] &gt;&gt; y[i];</span><br><span class="line">            g.add(y[i]^((ll)x[i]&lt;&lt;<span class="number">32</span>), i);</span><br><span class="line">            w[i]=<span class="number">1l</span>l*x[i]*x[i]+<span class="number">1l</span>l*y[i]*y[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;p:v) &#123;</span><br><span class="line">                <span class="keyword">int</span> xx=x[i]+p.first,yy=y[i]+p.second;</span><br><span class="line">                ull id = yy^((ll)xx&lt;&lt;<span class="number">32</span>);</span><br><span class="line">                <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>((tmp=g.count(id))) &#123;</span><br><span class="line">                    <span class="keyword">int</span> a=find(tmp),b=find(i);</span><br><span class="line">                    <span class="keyword">if</span>(a!=b) par[a]=b, w[b]=min(w[b],w[a]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ll ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) <span class="keyword">if</span>(i==find(i)) ans+=(ll)<span class="built_in">sqrt</span>(w[i]);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        g.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="tree"><a target="_blank" rel="noopener" href="https://scut.online/p/672">tree</a><a class="header-anchor" href="#tree">#</a></h2>
<p>【树形dp】</p>
<p>参考代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e4</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">int</span> ca[maxn], dis[<span class="number">2</span>][<span class="number">3</span>][maxn], son[<span class="number">2</span>][<span class="number">2</span>][maxn]; </span><br><span class="line"><span class="comment">// ca[i] = 0 代表i节点属于A类，ca[i] = 1代表i节点属于B类 </span></span><br><span class="line"><span class="comment">// dis[i][j][k] </span></span><br><span class="line"><span class="comment">// i: 0, 1 分别代表A和B </span></span><br><span class="line"><span class="comment">// j: 0, 1, 2 分别代表最远距离和次远距离，以及不经过以k为根节点的子树，但经过其父节点的最长路径</span></span><br><span class="line"><span class="comment">// k: 代表当前节点的编号</span></span><br><span class="line"><span class="comment">// dis[0][0][k] 代表节点k到其子树中最远的A类节点的距离</span></span><br><span class="line"><span class="comment">// dis[1][1][k] 代表节点k到其子树中次远的B类节点的距离</span></span><br><span class="line"><span class="comment">// son[1][0][k] 代表节点k到其子树中最远的B类节点的路上经过的儿子</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v, w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; e[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        ca[i] = <span class="number">0</span>;</span><br><span class="line">        e[i].clear();</span><br><span class="line">        dis[<span class="number">0</span>][<span class="number">0</span>][i] = dis[<span class="number">0</span>][<span class="number">1</span>][i] = dis[<span class="number">1</span>][<span class="number">0</span>][i] = dis[<span class="number">1</span>][<span class="number">1</span>][i] = <span class="number">0</span>;</span><br><span class="line">        dis[<span class="number">0</span>][<span class="number">2</span>][i] = dis[<span class="number">1</span>][<span class="number">2</span>][i] = <span class="number">0</span>; </span><br><span class="line">        son[<span class="number">0</span>][<span class="number">0</span>][i] = son[<span class="number">0</span>][<span class="number">1</span>][i] = son[<span class="number">1</span>][<span class="number">0</span>][i] = son[<span class="number">1</span>][<span class="number">1</span>][i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_ca</span><span class="params">(<span class="keyword">int</span> val, <span class="keyword">int</span> num)</span></span>&#123; </span><br><span class="line">    <span class="keyword">int</span> index; </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; index;</span><br><span class="line">        ca[index] = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">    e[u].push_back(&#123;v, w&#125;);</span><br><span class="line">    e[v].push_back(&#123;u, w&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i: e[u])&#123;</span><br><span class="line">        <span class="keyword">int</span> v = i.v, w = i.w, tmp_son, d;</span><br><span class="line">        <span class="keyword">if</span>(v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfs1(v, u);</span><br><span class="line">        <span class="comment">//A类 </span></span><br><span class="line">        tmp_son = v;</span><br><span class="line">        <span class="keyword">if</span>(dis[<span class="number">0</span>][<span class="number">0</span>][v] == <span class="number">0</span>) </span><br><span class="line">            d = (ca[v] == <span class="number">0</span>) * w;</span><br><span class="line">        <span class="keyword">else</span> d = dis[<span class="number">0</span>][<span class="number">0</span>][v] + w;</span><br><span class="line">        <span class="keyword">if</span>(d &gt; dis[<span class="number">0</span>][<span class="number">0</span>][u])&#123;</span><br><span class="line">            swap(d, dis[<span class="number">0</span>][<span class="number">0</span>][u]);</span><br><span class="line">            swap(tmp_son, son[<span class="number">0</span>][<span class="number">0</span>][u]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(d &gt; dis[<span class="number">0</span>][<span class="number">1</span>][u])&#123;</span><br><span class="line">            swap(d, dis[<span class="number">0</span>][<span class="number">1</span>][u]);</span><br><span class="line">            swap(tmp_son, son[<span class="number">0</span>][<span class="number">1</span>][u]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//B类</span></span><br><span class="line">       tmp_son = v;</span><br><span class="line">        <span class="keyword">if</span>(dis[<span class="number">1</span>][<span class="number">0</span>][v] == <span class="number">0</span>) </span><br><span class="line">            d = (ca[v] == <span class="number">1</span>) * w;</span><br><span class="line">        <span class="keyword">else</span> d = dis[<span class="number">1</span>][<span class="number">0</span>][v] + w;</span><br><span class="line">        <span class="keyword">if</span>(d &gt; dis[<span class="number">1</span>][<span class="number">0</span>][u])&#123;</span><br><span class="line">            swap(d, dis[<span class="number">1</span>][<span class="number">0</span>][u]);</span><br><span class="line">            swap(tmp_son, son[<span class="number">1</span>][<span class="number">0</span>][u]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(d &gt; dis[<span class="number">1</span>][<span class="number">1</span>][u])&#123;</span><br><span class="line">            swap(d, dis[<span class="number">1</span>][<span class="number">1</span>][u]);</span><br><span class="line">            swap(tmp_son, son[<span class="number">1</span>][<span class="number">1</span>][u]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i: e[u])&#123;</span><br><span class="line">        <span class="keyword">int</span> v = i.v, w = i.w;</span><br><span class="line">        <span class="keyword">if</span>(v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="comment">//A类</span></span><br><span class="line">        <span class="keyword">if</span>(v == son[<span class="number">0</span>][<span class="number">0</span>][u])</span><br><span class="line">            dis[<span class="number">0</span>][<span class="number">2</span>][v] = max(dis[<span class="number">0</span>][<span class="number">1</span>][u], dis[<span class="number">0</span>][<span class="number">2</span>][u]) + w;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            dis[<span class="number">0</span>][<span class="number">2</span>][v] = max(dis[<span class="number">0</span>][<span class="number">0</span>][u], dis[<span class="number">0</span>][<span class="number">2</span>][u]) + w;</span><br><span class="line">        <span class="comment">//B类</span></span><br><span class="line">         <span class="keyword">if</span>(v == son[<span class="number">1</span>][<span class="number">0</span>][u])</span><br><span class="line">            dis[<span class="number">1</span>][<span class="number">2</span>][v] = max(dis[<span class="number">1</span>][<span class="number">1</span>][u], dis[<span class="number">1</span>][<span class="number">2</span>][u]) + w;</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            dis[<span class="number">1</span>][<span class="number">2</span>][v] = max(dis[<span class="number">1</span>][<span class="number">0</span>][u], dis[<span class="number">1</span>][<span class="number">2</span>][u]) + w;</span><br><span class="line">        dfs2(v, u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;num)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> in;<span class="keyword">bool</span> IsN=<span class="literal">false</span>;</span><br><span class="line">    in=getchar();</span><br><span class="line">    <span class="keyword">if</span>(in==EOF) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span>(in!=<span class="string">&#x27;-&#x27;</span>&amp;&amp;(in&lt;<span class="string">&#x27;0&#x27;</span>||in&gt;<span class="string">&#x27;9&#x27;</span>)) in=getchar();</span><br><span class="line">    <span class="keyword">if</span>(in==<span class="string">&#x27;-&#x27;</span>)&#123; IsN=<span class="literal">true</span>;num=<span class="number">0</span>;&#125;</span><br><span class="line">    <span class="keyword">else</span> num=in-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">while</span>(in=getchar(),in&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;in&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">        num*=<span class="number">10</span>,num+=in-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(IsN) num=-num;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;game.in&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">// freopen(&quot;game.out&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, m, u, v, w;</span><br><span class="line">        read(n), read(m);</span><br><span class="line">        init(n + m);</span><br><span class="line">        get_ca(<span class="number">0</span>, n);</span><br><span class="line">        get_ca(<span class="number">1</span>, m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m - <span class="number">1</span>; i++)&#123;</span><br><span class="line">            read(u), read(v), read(w);</span><br><span class="line">            add_edge(u, v, w);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs1(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        dfs2(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        ll da = <span class="number">0</span>, db = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(ca[i] == <span class="number">0</span>) </span><br><span class="line">                da += max(dis[<span class="number">0</span>][<span class="number">0</span>][i], dis[<span class="number">0</span>][<span class="number">2</span>][i]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                db += max(dis[<span class="number">1</span>][<span class="number">0</span>][i], dis[<span class="number">1</span>][<span class="number">2</span>][i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(da &gt; db) <span class="built_in">printf</span>(<span class="string">&quot;A\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (da == db) <span class="built_in">printf</span>(<span class="string">&quot;T\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;B\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 20200</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SS 100000</span></span><br><span class="line"><span class="keyword">char</span> bf[SS], *p1 = bf, *p2 = bf;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> nc() (p1==p2&amp;&amp;(p2=(p1=bf)+fread(bf,1,SS,stdin),p2==p1)?-1:*p1++)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = nc();</span><br><span class="line">    <span class="keyword">for</span> (; (ch &lt; <span class="string">&#x27;0&#x27;</span> || ch &gt; <span class="string">&#x27;9&#x27;</span>) &amp;&amp; (ch != <span class="string">&#x27;-&#x27;</span>); ch = nc());</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;-&#x27;</span>)ch = nc(), f = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; ch &lt;= <span class="string">&#x27;9&#x27;</span> &amp;&amp; ch &gt;= <span class="string">&#x27;0&#x27;</span>; x = x * <span class="number">10</span> + ch - <span class="number">48</span>, ch = nc());</span><br><span class="line">    <span class="keyword">return</span> f * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, cnt, last[N], sz[N], fa[N], son[N], top[N], dep[N], Dep, who, x[N], y[N], id[N], a1, b1, a2, b2;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, next, w;</span><br><span class="line">&#125; e[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">    e[++cnt] = &#123;v, last[u], w&#125;, last[u] = cnt;</span><br><span class="line">    e[++cnt] = &#123;u, last[v], w&#125;, last[v] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa, <span class="keyword">int</span> d, <span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line">    dep[x] = d;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = last[x], y; i; i = e[i].next)</span><br><span class="line">        <span class="keyword">if</span> ((y = e[i].to) != fa)dfs(y, x, d + e[i].w, f);</span><br><span class="line">    <span class="keyword">if</span> (id[x] == f)<span class="keyword">if</span> (Dep &lt; dep[x])Dep = dep[x], who = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    sz[x] = <span class="number">1</span>, dep[x] = d;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = last[x], y; i; i = e[i].next)</span><br><span class="line">        <span class="keyword">if</span> ((y = e[i].to) != fa[x]) &#123;</span><br><span class="line">            fa[y] = x, dfs1(y, d + e[i].w), sz[x] += sz[y];</span><br><span class="line">            <span class="keyword">if</span> (sz[son[x]] &lt; sz[y])son[x] = y;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    top[x] = d;</span><br><span class="line">    <span class="keyword">if</span> (son[x])dfs2(son[x], d);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = last[x], y; i; i = e[i].next)<span class="keyword">if</span> ((y = e[i].to) != fa[x] &amp;&amp; y != son[x])dfs2(y, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l == r)<span class="keyword">return</span> l;</span><br><span class="line">    <span class="keyword">for</span> (; top[l] != top[r]; dep[top[l]] &lt; dep[top[r]] ? r = fa[top[r]] : l = fa[top[l]]);</span><br><span class="line">    <span class="keyword">return</span> dep[l] &lt; dep[r] ? l : r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">dis</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; <span class="keyword">return</span> dep[l] + dep[r] - (dep[lca(l, r)] &lt;&lt; <span class="number">1</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    n = read(), m = read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + m; ++i)last[i] = sz[i] = fa[i] = son[i] = top[i] = dep[i] = cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)x[i] = read(), id[x[i]] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)y[i] = read(), id[y[i]] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n + m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = read(), v = read(), w = read();</span><br><span class="line">        add(u, v, w);</span><br><span class="line">    &#125;</span><br><span class="line">    Dep = <span class="number">0</span>, dep[<span class="number">0</span>] = <span class="number">0</span>, dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>), b1 = who;</span><br><span class="line">    Dep = <span class="number">0</span>, dep[<span class="number">0</span>] = <span class="number">0</span>, dfs(b1, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>), a1 = who;</span><br><span class="line">    Dep = <span class="number">0</span>, dep[<span class="number">0</span>] = <span class="number">0</span>, dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>), b2 = who;</span><br><span class="line">    Dep = <span class="number">0</span>, dep[<span class="number">0</span>] = <span class="number">0</span>, dfs(b2, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>), a2 = who;</span><br><span class="line">    dep[<span class="number">0</span>] = <span class="number">0</span>, dfs1(<span class="number">1</span>, <span class="number">0</span>), dfs2(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    ll da = <span class="number">0</span>, db = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) da += max(dis(a1, x[i]), dis(b1, x[i]));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) db += max(dis(a2, y[i]), dis(b2, y[i]));</span><br><span class="line">    <span class="keyword">if</span> (da &gt; db) <span class="built_in">puts</span>(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (da &lt; db) <span class="built_in">puts</span>(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">&quot;T&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="猪灵的胜利之舞"><a target="_blank" rel="noopener" href="https://scut.online/p/673">猪灵的胜利之舞</a><a class="header-anchor" href="#猪灵的胜利之舞">#</a></h2>
<p>题意：<span role="math">$f[3]=4, f[4]=7, f[n]=f[n-1]+f[n-2]$</span>，求<span role="math">$\frac{f[n]}{2^n}$</span></p>
<h3 id="十进制快速幂">十进制快速幂<a class="header-anchor" href="#十进制快速幂">#</a></h3>
<p>二进制快速幂与十进制快速幂的对比（伪代码）</p>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#fpow-cmp-十进制">
                        十进制
                    </a>
                   </li><li class="tab ">
                    <a href="#fpow-cmp-二进制">
                        二进制
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="fpow-cmp-十进制" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ans = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> (y != <span class="number">0</span>) &#123;</span><br><span class="line">    ans = ans * <span class="built_in">pow</span>(x, y%<span class="number">10</span>);</span><br><span class="line">    x = <span class="built_in">pow</span>(x, <span class="number">10</span>);</span><br><span class="line">    y = y / <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="fpow-cmp-二进制" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ans = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> (y != <span class="number">0</span>) &#123;</span><br><span class="line">    ans = ans * <span class="built_in">pow</span>(x, y%<span class="number">2</span>);</span><br><span class="line">    x = <span class="built_in">pow</span>(x, <span class="number">2</span>);</span><br><span class="line">    y = y / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<p>十进制快速幂和二进制快速幂在原理上是一样的，不过二进制快速幂通常实现为位运算，而十进制则用字符串来处理。</p>
<h3 id="循环节">循环节<a class="header-anchor" href="#循环节">#</a></h3>
<blockquote>
<p>斐波那契数列在1e9+7下循环节为2e9+16，这题答案就是斐波那契数列的第n项加上n-2项。</p>
</blockquote>
<p>循环节可以通过如下程序暴力找出：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">1</span>, m = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        a = (a + b) % m;</span><br><span class="line">        swap(a, b);</span><br><span class="line">        <span class="keyword">if</span> (a == <span class="number">1</span> &amp;&amp; b== <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; cnt &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; <span class="string">&quot;Time: &quot;</span> &lt;&lt; (<span class="keyword">double</span>)clock()/CLOCKS_PER_SEC &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2000000016</span><br><span class="line">Time: 6.851</span><br></pre></td></tr></table></figure>
<h3 id="参考代码">参考代码<a class="header-anchor" href="#参考代码">#</a></h3>
<div class="tabs is-boxed my-3">
                <ul class="nav-tabs mx-0 my-0"><li class="tab is-active">
                    <a href="#p673-十进制快速幂">
                        十进制快速幂
                    </a>
                   </li><li class="tab ">
                    <a href="#p673-循环节">
                        循环节
                    </a>
                   </li><li class="tab ">
                    <a href="#p673-数据生成器">
                        数据生成器
                    </a>
                   </li></ul>
              </div><div class="tabs-content">
                    <div id="p673-十进制快速幂" class="tab-content "><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="keyword">long</span> <span class="keyword">long</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> ll M = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">using</span> Mat = <span class="built_in">array</span>&lt;<span class="built_in">array</span>&lt;ll, <span class="number">2</span>&gt;, <span class="number">2</span>&gt;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FOR(i, n) for(int i = 0; i &lt; n; i++)</span></span><br><span class="line"><span class="built_in">string</span> n;</span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line">Mat <span class="keyword">operator</span>*(<span class="keyword">const</span> Mat &amp;a, <span class="keyword">const</span> Mat &amp;b) &#123;</span><br><span class="line">    Mat c&#123;&#125;;</span><br><span class="line">    FOR(i, <span class="number">2</span>) FOR(j, <span class="number">2</span>) FOR(k, <span class="number">2</span>)</span><br><span class="line">        c[i][j] = (c[i][j] + a[i][k] * b[k][j]) % M;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Mat <span class="title">Pow</span><span class="params">(Mat x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    Mat ans&#123;&#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;&#125;;</span><br><span class="line">    FOR(t, y) ans = ans * x;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Pow</span><span class="params">(ll x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    FOR(t, y) ans = ans * x % M;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Pow</span><span class="params">(ll x, ll y)</span> </span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1</span>) ans = ans * x % M;</span><br><span class="line">        x = x * x % M;</span><br><span class="line">        y &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Mat <span class="title">Pow</span><span class="params">(Mat x)</span> </span>&#123;</span><br><span class="line">    Mat ans&#123;&#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;&#125;;</span><br><span class="line">    FOR(i, len) &#123;</span><br><span class="line">        ans = ans*Pow(x, n[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        x = Pow(x, <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Pow</span><span class="params">(ll x)</span> </span>&#123;</span><br><span class="line">    ll ans = <span class="number">1</span>;</span><br><span class="line">    FOR(i, len) &#123;</span><br><span class="line">        ans = ans*Pow(x, n[i]-<span class="string">&#x27;0&#x27;</span>)%M;</span><br><span class="line">        x = Pow(x, <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    len = (<span class="keyword">int</span>)n.length();</span><br><span class="line">    reverse(n.begin(), n.end());</span><br><span class="line">    Mat A = Pow(Mat&#123;&#123;&#123;<span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;&#125;&#125;);</span><br><span class="line">    A = A * Mat&#123;&#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">2</span>, <span class="number">0</span>&#125;&#125;&#125;;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; A[<span class="number">1</span>][<span class="number">0</span>] * Pow(Pow(<span class="number">2l</span>l), M<span class="number">-2</span>) % M;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p673-循环节" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> T = <span class="number">2e9</span>+<span class="number">16</span>;</span><br><span class="line">inline pair&lt;ll,ll&gt; read() &#123;</span><br><span class="line">    <span class="keyword">char</span> c=getchar();ll x=<span class="number">0</span>,y=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c&lt;<span class="string">&#x27;0&#x27;</span>||c&gt;<span class="string">&#x27;9&#x27;</span>) c=getchar();</span><br><span class="line">    <span class="keyword">while</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>)x=(x*<span class="number">10</span>+c-<span class="string">&#x27;0&#x27;</span>)%T,y=(y*<span class="number">10</span>+c-<span class="string">&#x27;0&#x27;</span>)%(mod<span class="number">-1</span>),c=getchar();</span><br><span class="line">    <span class="keyword">return</span> &#123;x,y&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">fpow</span><span class="params">(ll a,ll b)</span></span>&#123;ll r=<span class="number">1</span>;<span class="keyword">for</span>(a%=mod;b;b&gt;&gt;=<span class="number">1</span>)&#123;<span class="keyword">if</span>(b&amp;<span class="number">1</span>)r=r*a%mod;a=a*a%mod;&#125;<span class="keyword">return</span> r;&#125;</span><br><span class="line"><span class="function">ll <span class="title">fib</span><span class="params">(ll n)</span> </span>&#123;</span><br><span class="line">    function&lt;ll(ll,ll,ll,ll,ll)&gt; f = [&amp;](ll a,ll b,ll p,ll q,ll n) -&gt; ll &#123;</span><br><span class="line">        <span class="keyword">if</span>(!n) <span class="keyword">return</span> b;</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>) <span class="keyword">return</span> f((b*q+a*q+a*p)%mod,(b*p+a*q)%mod,p,q,n<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">return</span> f(a,b,(p*p+q*q)%mod,(q*q+<span class="number">2</span>*q*p)%mod,n/<span class="number">2</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> f(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">pair</span>&lt;ll,ll&gt; p=read();</span><br><span class="line">    ll n=p.first+T,n2=p.second;</span><br><span class="line">    cout&lt;&lt;(fib(n+1)+fib(n-1))%mod*fpow((mod+1)/2,n2)%mod&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="p673-数据生成器" class="tab-content is-hidden"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;testlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> testIndex = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nextTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    testIndex++;</span><br><span class="line">    freopen((<span class="string">&quot;data/&quot;</span>+to_string(testIndex)+<span class="string">&quot;.in&quot;</span>).c_str(), <span class="string">&quot;w&quot;</span>, <span class="built_in">stdout</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    registerGen(argc, argv, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">        nextTest();</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;1,10&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;10,100&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;100,1000&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;1000,10000&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;10000,100000&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;100000,999999&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;[1-9][0-9]&#123;999999&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    nextTest();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; rnd.next(<span class="string">&quot;1[0]&#123;1000000&#125;&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
                  </div>
<h2 id="艾尔奇亚的国王"><a target="_blank" rel="noopener" href="https://scut.online/p/666">艾尔奇亚的国王</a><a class="header-anchor" href="#艾尔奇亚的国王">#</a></h2>
<p>题意：A有 n 个筹码，可以从<span role="math">$[l_1, r_1]$</span>区间随机选整数。<br>
B有 m 个筹码，可以从<span role="math">$[l_2, r_2]$</span>区间随机选整数。</p>
<p>数字大的人拿走数字小的人的筹码，（数字相同算平局），没有筹码的人算输。</p>
<p>求A、B赢的概率。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;bits/stdc++.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">double</span> p,k,q,sum;</span><br><span class="line"><span class="keyword">double</span> f[maxn];</span><br><span class="line"><span class="keyword">int</span> n,l1,r1,m,l2,r2;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getf</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">double</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(pos==n+m) f[pos]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> tx=p/(<span class="number">1</span>-k-q*x);</span><br><span class="line">        getf(pos+<span class="number">1</span>,tx);</span><br><span class="line">        f[pos]=tx*f[pos+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d%d&quot;</span>,&amp;n,&amp;l1,&amp;r1,&amp;m,&amp;l2,&amp;r2)==<span class="number">6</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        p=k=q=sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=l1;i&lt;=r1;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=l2;j&lt;=r2;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i&gt;j) p+=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(i==j) k+=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> q+=<span class="number">1</span>;</span><br><span class="line">                sum+=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        p/=sum;k/=sum;q/=sum;</span><br><span class="line">        getf(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.3f %.3f\n&quot;</span>,f[n],<span class="number">1.0</span>-f[n]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="umi炒饭"><a target="_blank" rel="noopener" href="https://scut.online/p/667">umi炒饭</a><a class="header-anchor" href="#umi炒饭">#</a></h2>
<p>题意：给n个点的坐标以及权值，问一个长w宽h的矩形内的点权值之和的最大值。</p>
<p>前置知识：线段树、扫描线</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;bits/stdc++.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e4</span>+<span class="number">7</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x,y,val;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;tmp) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(y==tmp.y) <span class="keyword">return</span> x&lt;tmp.x;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> y&lt;tmp.y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Node node[maxn&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> n,w,h,cnt;</span><br><span class="line"><span class="keyword">int</span> tx[maxn&lt;&lt;<span class="number">1</span>],ty[maxn&lt;&lt;<span class="number">1</span>],tree[maxn&lt;&lt;<span class="number">2</span>],lazy[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> root,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r)</span><br><span class="line">    &#123;</span><br><span class="line">        tree[root]=<span class="number">0</span>;</span><br><span class="line">        lazy[root]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> lrt=root&lt;&lt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> rrt=lrt+<span class="number">1</span>;</span><br><span class="line">    build(lrt,l,mid);</span><br><span class="line">    build(rrt,mid+<span class="number">1</span>,r);</span><br><span class="line">    tree[root]=<span class="number">0</span>;</span><br><span class="line">    lazy[root]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(lazy[root])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> lrt=root&lt;&lt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> rrt=lrt+<span class="number">1</span>;</span><br><span class="line">        lazy[lrt]+=lazy[root];</span><br><span class="line">        lazy[rrt]+=lazy[root];</span><br><span class="line">        tree[lrt]+=lazy[root];</span><br><span class="line">        tree[rrt]+=lazy[root];</span><br><span class="line">        lazy[root]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> ql,<span class="keyword">int</span> qr,<span class="keyword">int</span> val,<span class="keyword">int</span> root,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=ql&amp;&amp;r&lt;=qr)</span><br><span class="line">    &#123;</span><br><span class="line">        tree[root]+=val;</span><br><span class="line">        lazy[root]+=val;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pushdown(root);</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> lrt=root&lt;&lt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> rrt=lrt+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(qr&lt;=mid) add(ql,qr,val,lrt,l,mid);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ql&gt;mid) add(ql,qr,val,rrt,mid+<span class="number">1</span>,r);</span><br><span class="line">    <span class="keyword">else</span> add(ql,qr,val,lrt,l,mid),add(ql,qr,val,rrt,mid+<span class="number">1</span>,r);</span><br><span class="line">    tree[root]=max(tree[lrt],tree[rrt]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> ql,<span class="keyword">int</span> qr,<span class="keyword">int</span> root,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=ql&amp;&amp;r&lt;=qr)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> tree[root];</span><br><span class="line">    &#125;</span><br><span class="line">    pushdown(root);</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> lrt=root&lt;&lt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> rrt=lrt+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(qr&lt;=mid) <span class="keyword">return</span> query(ql,qr,lrt,l,mid);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ql&gt;mid) <span class="keyword">return</span> query(ql,qr,rrt,mid+<span class="number">1</span>,r);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(ql,qr,lrt,l,mid)+query(ql,qr,rrt,mid+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;w,&amp;h)==<span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;node[i].x,&amp;node[i].y,&amp;node[i].val);</span><br><span class="line">            tx[++cnt]=node[i].x;</span><br><span class="line">            ty[cnt]=node[i].y;</span><br><span class="line"></span><br><span class="line">            node[i+n].x=node[i].x;</span><br><span class="line">            node[i+n].y=node[i].y+h+<span class="number">1</span>;</span><br><span class="line">            node[i+n].val=-node[i].val;</span><br><span class="line">            tx[++cnt]=node[i+n].x;</span><br><span class="line">            ty[cnt]=node[i+n].y;</span><br><span class="line">        &#125;</span><br><span class="line">        sort(node+<span class="number">1</span>,node+<span class="number">1</span>+n+n);</span><br><span class="line">        sort(tx+<span class="number">1</span>,tx+<span class="number">1</span>+cnt);</span><br><span class="line">        sort(ty+<span class="number">1</span>,ty+<span class="number">1</span>+cnt);</span><br><span class="line">        <span class="keyword">int</span> cx=unique(tx+<span class="number">1</span>,tx+<span class="number">1</span>+cnt)-tx<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> cy=unique(ty+<span class="number">1</span>,ty+<span class="number">1</span>+cnt)-ty<span class="number">-1</span>;</span><br><span class="line">        build(<span class="number">1</span>,<span class="number">1</span>,cx);</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">1</span>;i&lt;=cy;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(j&lt;=<span class="number">2</span>*n&amp;&amp;node[j].y&lt;=ty[i])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> ql=lower_bound(tx+<span class="number">1</span>,tx+<span class="number">1</span>+cx,node[j].x)-tx;</span><br><span class="line">                <span class="keyword">int</span> qr=upper_bound(tx+<span class="number">1</span>,tx+<span class="number">1</span>+cx,node[j].x+w)-tx<span class="number">-1</span>;</span><br><span class="line">                add(ql,qr,node[j].val,<span class="number">1</span>,<span class="number">1</span>,cx);</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            ans=max(ans,tree[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#pragma GCC optimize(2)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//#include&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span><br><span class="line"><span class="comment">//#include&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span><br><span class="line"><span class="comment">//#include&lt;ext/pb_ds/hash_policy.hpp&gt;</span></span><br><span class="line"><span class="comment">//#include&lt;ext/pb_ds/trie_policy.hpp&gt;</span></span><br><span class="line"><span class="comment">//#include&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span><br><span class="line"><span class="comment">//#include&lt;ext/rope&gt;</span></span><br><span class="line"><span class="comment">//using namespace __gnu_cxx;</span></span><br><span class="line"><span class="comment">//using namespace __gnu_pbds;</span></span><br><span class="line"><span class="comment">//void err(istream_iterator&lt;string&gt; it)&#123;cerr&lt;&lt;endl;&#125;</span></span><br><span class="line"><span class="comment">//template&lt;typename T, typename... Args&gt;void err(istream_iterator&lt;string&gt; it, T a, Args... args)&#123;cerr &lt;&lt; *it &lt;&lt; &quot; = &quot; &lt;&lt; a &lt;&lt; &quot; , &quot;;err(++it, args...);&#125;</span></span><br><span class="line"><span class="comment">//#define error(args...) &#123; string _s = #args; replace(_s.begin(), _s.end(), &#x27;,&#x27;, &#x27; &#x27;); stringstream _ss(_s); istream_iterator&lt;string&gt; _it(_ss); err(_it, args); &#125;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(a,b) memset((a),b,sizeof((a)))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fpre(x) cout&lt;&lt;fixed&lt;&lt;setprecision(x)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(v) (v).clear()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int,int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pdd pair<span class="meta-string">&lt;double,double&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pli pair<span class="meta-string">&lt;ll,int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pll pair<span class="meta-string">&lt;ll,ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> eb emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ld long double</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ull unsigned long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uint unsigned int</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ushort unsigned short</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IOS ios::sync_with_stdio(0);cin.tie(0);cout.tie(0)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(i) (i&amp;(-i))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson (rt&lt;&lt;1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson lson|1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">const</span> ld eps=<span class="number">1e-10</span>;</span><br><span class="line"><span class="keyword">const</span> ld pi=<span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">dcmp</span><span class="params">(ld x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;-eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//-----------------------------------------------head</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> t[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> lzy[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    t[rt]=lzy[rt]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(l,m,lson);</span><br><span class="line">    build(m+<span class="number">1</span>,r,rson);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> rt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(lzy[rt])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> v=lzy[rt];</span><br><span class="line">        t[lson]+=v;</span><br><span class="line">        t[rson]+=v;</span><br><span class="line">        lzy[lson]+=v;</span><br><span class="line">        lzy[rson]+=v;</span><br><span class="line">        lzy[rt]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">upd</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> v,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l&amp;&amp;r&lt;=R)</span><br><span class="line">    &#123;</span><br><span class="line">        t[rt]+=v;</span><br><span class="line">        lzy[rt]+=v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pd(rt);</span><br><span class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(m&gt;=L)</span><br><span class="line">        upd(L,R,v,l,m,lson);</span><br><span class="line">    <span class="keyword">if</span>(m&lt;R)</span><br><span class="line">        upd(L,R,v,m+<span class="number">1</span>,r,rson);</span><br><span class="line">    t[rt]=max(t[lson],t[rson]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">pair</span>&lt;pii,ll&gt;a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,w,h;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w&gt;&gt;h)</span><br><span class="line">    &#123;</span><br><span class="line">        assert(n&gt;=<span class="number">0</span>&amp;&amp;n&lt;=<span class="number">10000</span>);</span><br><span class="line">        assert(w&gt;=<span class="number">1</span>&amp;&amp;w&lt;=<span class="number">20000</span>);</span><br><span class="line">        assert(h&gt;=<span class="number">1</span>&amp;&amp;w&lt;=<span class="number">20000</span>);</span><br><span class="line">        build(<span class="number">1</span>,<span class="number">1e5</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;a[i].fi.fi&gt;&gt;a[i].fi.se&gt;&gt;a[i].se;</span><br><span class="line">            assert(a[i].fi.fi&gt;=<span class="number">-1e4</span>&amp;&amp;a[i].fi.fi&lt;=<span class="number">1e4</span>);</span><br><span class="line">            assert(a[i].fi.se&gt;=<span class="number">-1e4</span>&amp;&amp;a[i].fi.se&lt;=<span class="number">1e4</span>);</span><br><span class="line">            assert(a[i].se&gt;=<span class="number">1</span>&amp;&amp;a[i].se&lt;=<span class="number">1e5</span>);</span><br><span class="line">            a[i].fi.fi+=<span class="number">3e4</span>+<span class="number">1</span>;</span><br><span class="line">            a[i].fi.se+=<span class="number">3e4</span>+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sort(a,a+n);</span><br><span class="line">        <span class="keyword">int</span> mx=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;n;++i)</span><br><span class="line">        &#123;</span><br><span class="line">            upd(a[i].fi.se-h,a[i].fi.se,a[i].se,<span class="number">1</span>,<span class="number">1e5</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">while</span>(a[i].fi.fi-w&gt;a[j].fi.fi)</span><br><span class="line">            &#123;</span><br><span class="line">                upd(a[j].fi.se-h,a[j].fi.se,-a[j].se,<span class="number">1</span>,<span class="number">1e5</span>,<span class="number">1</span>);</span><br><span class="line">                ++j;</span><br><span class="line">            &#125;</span><br><span class="line">            mx=max(mx,t[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;mx&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="谜拟Q-plus"><a target="_blank" rel="noopener" href="https://scut.online/p/677">谜拟Q plus</a><a class="header-anchor" href="#谜拟Q-plus">#</a></h2>
<p>分析：【贪心】【dp】【二分】</p>
<p>参考代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n,Q,num1,num2;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[N],rem[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Tp1</span>&#123;</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> a,b;</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Tp1 &amp;op)<span class="keyword">const</span>&#123; <span class="keyword">return</span> (a==op.a)?b&gt;op.b:a&lt;op.a; &#125;</span><br><span class="line">&#125;tp1[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Tp2</span>&#123;</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> a,b;</span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Tp2 &amp;op)<span class="keyword">const</span>&#123; <span class="keyword">return</span> (b==op.b)?a&lt;op.a:b&gt;op.b; &#125;</span><br><span class="line">&#125;tp2[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">hh</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> x,id,ans;</span><br><span class="line">&#125;q[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(hh a,hh b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.x&lt;b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(hh a,hh b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.id&lt;b.id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> l,r,mid,ret=<span class="number">0</span>;</span><br><span class="line">	l=<span class="number">1</span>;r=num2;</span><br><span class="line">	<span class="keyword">while</span>(l&lt;=r)</span><br><span class="line">	&#123;</span><br><span class="line">		mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(dp[mid]&lt;=x) ret=max(ret,mid),l=mid+<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> r=mid<span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> x,y; <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">		<span class="keyword">if</span>(x&lt;=y) tp1[++num1]=(Tp1)&#123;x,y&#125;;</span><br><span class="line">		<span class="keyword">else</span> tp2[++num2]=(Tp2)&#123;x,y&#125;; </span><br><span class="line">	&#125;</span><br><span class="line">	sort(tp1+<span class="number">1</span>,tp1+num1+<span class="number">1</span>); sort(tp2+<span class="number">1</span>,tp2+num2+<span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">memset</span>(dp,<span class="number">127</span>/<span class="number">3</span>,<span class="keyword">sizeof</span>(dp)); dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=num2;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=num2-i+<span class="number">1</span>;j&gt;=<span class="number">1</span>;j--)&#123;</span><br><span class="line">			<span class="keyword">if</span>(dp[j<span class="number">-1</span>]&gt;tp2[i].b) dp[j]=min(dp[j],dp[j<span class="number">-1</span>]-tp2[i].b+tp2[i].a);</span><br><span class="line">			<span class="keyword">else</span> dp[j]=min(dp[j],<span class="number">1</span>+tp2[i].a);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;Q);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=Q;i++)</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;q[i].x,q[i].id=i,q[i].ans=<span class="number">-1</span>;</span><br><span class="line">	sort(q+<span class="number">1</span>,q+<span class="number">1</span>+Q,cmp);</span><br><span class="line">	<span class="keyword">int</span> pos,x,tans;</span><br><span class="line">	pos=x=tans=<span class="number">0</span>;</span><br><span class="line">	pos=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=num1;i++)</span><br><span class="line">		rem[i]=rem[i<span class="number">-1</span>]-tp1[i].a+tp1[i].b;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=num1;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//cout&lt;&lt;&quot;___&quot;&lt;&lt;q[pos].x&lt;&lt;&quot;  &quot;&lt;&lt;tp1[i].a-x&lt;&lt;endl;</span></span><br><span class="line">		<span class="keyword">while</span>(pos&lt;=Q&amp;&amp;q[pos].x&lt;=tp1[i].a-x) q[pos++].ans=tans;</span><br><span class="line">		x+=-tp1[i].a+tp1[i].b;tans++;</span><br><span class="line">		<span class="comment">//cout&lt;&lt;i&lt;&lt;&quot;*&quot;&lt;&lt;x&lt;&lt;&quot; &quot;&lt;&lt;pos&lt;&lt;&quot;    &quot;&lt;&lt;tp1[i].a&lt;&lt;&quot; &quot;&lt;&lt;tp1[i].b&lt;&lt;endl;</span></span><br><span class="line">		<span class="keyword">if</span>(pos&gt;Q) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=Q;i++)</span><br><span class="line">		<span class="keyword">if</span>(q[i].ans==<span class="number">-1</span>) q[i].ans=num1;</span><br><span class="line">	sort(q+<span class="number">1</span>,q+<span class="number">1</span>+Q,cmp2);</span><br><span class="line">	<span class="comment">/*for(int i=1;i&lt;=Q;i++)</span></span><br><span class="line"><span class="comment">		cout&lt;&lt;q[i].ans&lt;&lt;&quot; &quot;;cout&lt;&lt;endl; </span></span><br><span class="line"><span class="comment">	for(int i=1;i&lt;=num2;i++)</span></span><br><span class="line"><span class="comment">		cout&lt;&lt;dp[i]&lt;&lt;&quot; &quot;;cout&lt;&lt;endl; */</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=Q;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,q[i].ans+find(rem[q[i].ans]+q[i].x));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="世界棋盘"><a target="_blank" rel="noopener" href="https://scut.online/p/676">世界棋盘</a><a class="header-anchor" href="#世界棋盘">#</a></h2>
<p>分析【min25筛法】【杜教筛】</p>
<p>参考代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line">ll n, k, sqr, nsqr;</span><br><span class="line"><span class="keyword">int</span> p[maxn], cntp;</span><br><span class="line">ll prep[maxn];</span><br><span class="line"><span class="keyword">bool</span> np[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sieve</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= x; ++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!np[i])&#123;</span><br><span class="line">            p[++cntp] = i;</span><br><span class="line">            prep[cntp] = prep[cntp - <span class="number">1</span>] + i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cntp &amp;&amp; i * p[j] &lt;= x; ++j)&#123;</span><br><span class="line">            np[i * p[j]] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(i % p[j] == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ll w[maxn], cntw, h[maxn], s[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ID</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &lt;= nsqr ? cntw - x + <span class="number">1</span> : n / x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">calw</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cntw = sqr + nsqr - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= sqr; ++i)&#123;</span><br><span class="line">        w[i] = n / i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = sqr + <span class="number">1</span>; i &lt;= cntw; ++i)&#123;</span><br><span class="line">        w[i] = w[i - <span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cntw; ++i)&#123;</span><br><span class="line">        h[i] = w[i] * (w[i] + <span class="number">1</span>) / <span class="number">2</span> - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cntp; ++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cntw &amp;&amp; <span class="number">1l</span>l * p[i] * p[i] &lt;= w[j]; ++j)&#123;</span><br><span class="line">            h[j] -= p[i] * (h[ID(w[j] / p[i])] - prep[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = cntp; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= cntw &amp;&amp; <span class="number">1l</span>l * p[i] * p[i] &lt;= w[j]; ++j) &#123;</span><br><span class="line">            <span class="keyword">for</span> (ll k = p[i]; <span class="number">1l</span>l * k * p[i] &lt;= w[j]; k *= p[i]) &#123;</span><br><span class="line">                s[j] += s[ID(w[j] / k)] + h[ID(w[j] / k)] - prep[i - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">S</span><span class="params">(ll x, ll k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x &lt;= <span class="number">2</span> || p[k] &gt; x)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt;= cntp &amp;&amp; <span class="number">1l</span>l * p[i] * p[i] &lt;= x; ++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j = p[i];<span class="number">1l</span>l * j * p[i] &lt;= x; j *= p[i])&#123;</span><br><span class="line">            ans = (ans + h[ID(x / j)] - prep[i - <span class="number">1</span>] + S(x / j, i + <span class="number">1</span>)) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">ll g[maxn];</span><br><span class="line"><span class="function">ll <span class="title">G</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> id = ID(x);</span><br><span class="line">    <span class="keyword">if</span>(g[id])&#123;</span><br><span class="line">        <span class="keyword">return</span> g[id];</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = (<span class="number">1</span> + s[id] + h[id]) % mod;</span><br><span class="line">    <span class="keyword">for</span>(ll l = <span class="number">2</span>, r; l &lt;= x; l = r + <span class="number">1</span>)&#123;</span><br><span class="line">        r = x / (x / l);</span><br><span class="line">        ans = (ans - (r - l + <span class="number">1</span>) * G(x / l) % mod + mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> g[id] = ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">    sqr = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    nsqr = n / sqr;</span><br><span class="line">    sieve(sqr);</span><br><span class="line">    calw();</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll l = <span class="number">1</span>, r; l &lt;= n; l = r + <span class="number">1</span>)&#123;</span><br><span class="line">        r = n / (n / l);</span><br><span class="line">        ans = (ans + (n / l) * (n / l) % mod * (G(r) - G(l - <span class="number">1</span>) + mod) % mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(), (x).end()</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">power_mod</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> r = !!a;</span><br><span class="line">	<span class="keyword">for</span>(; b; b &gt;&gt;= <span class="number">1</span>, a = (ll) a * a % mod)</span><br><span class="line">		<span class="keyword">if</span>(b &amp; <span class="number">1</span>) r = (ll) r * a % mod;</span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bitset</span>&lt;N&gt; np;</span><br><span class="line"><span class="keyword">int</span> p[N&gt;&gt;<span class="number">2</span>], pn;</span><br><span class="line">ll pg[N&gt;&gt;<span class="number">2</span>], ph[N&gt;&gt;<span class="number">2</span>]; <span class="comment">// pg(n) = \sum_&#123;i=1&#125;^n g[p[i]]</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sieve</span><span class="params">(<span class="keyword">int</span> sz)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= sz; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span>(!np[i]) &#123;</span><br><span class="line">			++pn;</span><br><span class="line">			p[pn] = i;</span><br><span class="line">			pg[pn] = (pg[pn - <span class="number">1</span>] + <span class="number">1</span>) % mod;</span><br><span class="line">			ph[pn] = (ph[pn - <span class="number">1</span>] + i) % mod;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= pn &amp;&amp; i * p[j] &lt;= sz; j++) &#123;</span><br><span class="line">			np[i * p[j]] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span>(i % p[j] == <span class="number">0</span>) &#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _id[N*<span class="number">2</span>], m;</span><br><span class="line">ll n;</span><br><span class="line">ll w[N * <span class="number">2</span>];</span><br><span class="line">ll Pg[N * <span class="number">2</span>], Ph[N * <span class="number">2</span>]; <span class="comment">// Pg(n) = \sum_&#123;i=1&#125;^&#123;w[n]&#125; g[i] [i in Prime ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">id</span><span class="params">(ll x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x &lt; N ? x : n / x + N;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Id</span><span class="params">(ll x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> _id[id(x)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __int128 i16;</span><br><span class="line"></span><br><span class="line">ll G[N * <span class="number">2</span>], H[N * <span class="number">2</span>];</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">*** G(n) = \sum_&#123;i = 1&#125;^&#123;w[n]&#125; -mu[i]</span></span><br><span class="line"><span class="comment">*** H(n) = \sum_&#123;i = 1&#125;^&#123;w[n]&#125; -mu[i] * minp[i]</span></span><br><span class="line"><span class="comment">        G(n, j) = \sum_&#123;i = 1&#125;^n [minp[i] &gt;= p[j] and i not in Prime] -mu[i] = G(n, j + 1) + mu[p[j]] * (G(n / p[j], j + 1) + Pg(n / p[j]) - pg(j - 1))</span></span><br><span class="line"><span class="comment">        H(n, j) = \sum_&#123;i = 1&#125;^n [minp[i] &gt;= p[j] and i not in Prime] -mu[i]*minp[i] = H(n, j + 1) - p[j] * (G(n / p[j], j + 1) + Pg(n / p[j]) - pg(j - 1))</span></span><br><span class="line"><span class="comment">*** ans = \sum_&#123;i = 1&#125;^n (n/i)^2 * mu[i] * (1 - minp[i])</span></span><br><span class="line"><span class="comment">                = \sum_&#123;i = 1&#125;^n (n/i)^2 * (H(n) - G(n))</span></span><br><span class="line"><span class="comment">***/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> sz)</span> </span>&#123;</span><br><span class="line">	sieve(sz);</span><br><span class="line">	m = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(ll l = <span class="number">1</span>, r; l &lt;= n; l = r + <span class="number">1</span>) &#123;</span><br><span class="line">		r = n / (n / l);</span><br><span class="line">		w[++m] = n / l;</span><br><span class="line">		_id[id(w[m])] = m;</span><br><span class="line">		Pg[m] = (w[m] - <span class="number">1</span>) % mod;</span><br><span class="line">		Ph[m] = ((i16) w[m] * (w[m] + <span class="number">1</span>) / <span class="number">2</span> - <span class="number">1</span>) % mod;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= pn; j++) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m &amp;&amp; (ll) p[j] * p[j] &lt;= w[i]; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> k = Id(w[i] / p[j]);</span><br><span class="line">			Pg[i] = (Pg[i] - (Pg[k] - pg[j - <span class="number">1</span>])) % mod;</span><br><span class="line">			Ph[i] = (Ph[i] - p[j] * (Ph[k] - ph[j - <span class="number">1</span>])) % mod;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j = pn; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m &amp;&amp; (ll) p[j] * p[j] &lt;= w[i]; i++) &#123;</span><br><span class="line">			<span class="keyword">int</span> k = Id(w[i] / p[j]);</span><br><span class="line">			G[i] = (G[i] - (G[k] + Pg[k] - pg[j])) % mod;</span><br><span class="line">			H[i] = (H[i] - p[j] * (G[k] + Pg[k] - pg[j])) % mod;</span><br><span class="line"><span class="comment">//			cout &lt;&lt; w[i] &lt;&lt; &#x27; &#x27; &lt;&lt; p[j] &lt;&lt; &#x27; &#x27; &lt;&lt; G[i] &lt;&lt; &quot; ha &quot; &lt;&lt; endl;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">		G[i] = (G[i] + Pg[i] - <span class="number">1</span>) % mod;</span><br><span class="line">		H[i] = (H[i] + Ph[i]) % mod;</span><br><span class="line">		<span class="keyword">if</span>(G[i] &lt; <span class="number">0</span>) G[i] += mod;</span><br><span class="line">		<span class="keyword">if</span>(H[i] &lt; <span class="number">0</span>) H[i] += mod;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	cout &lt;&lt; m &lt;&lt; &quot; JDH  &quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">	for(int i = 1; i &lt;= m; i++) &#123;</span></span><br><span class="line"><span class="comment">	  cout &lt;&lt; w[i] &lt;&lt; &#x27; &#x27; &lt;&lt; G[i] &lt;&lt; &#x27; &#x27; &lt;&lt; H[i] &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*** \sum_&#123;i=1&#125;^n \sum_&#123;d|i&#125; mu[d] * maxp[i / d] = sum_&#123;i=1&#125;^n mu[i] * (1 - minp[i]) ***/</span></span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">Muf</span><span class="params">(ll n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> k = Id(n);</span><br><span class="line">	ll ret = H[k] - G[k];</span><br><span class="line">	<span class="keyword">if</span>(ret &lt; <span class="number">0</span>) ret += mod;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> local</span></span><br><span class="line">	freopen(<span class="string">&quot;in.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">	<span class="built_in">cin</span>.tie(<span class="number">0</span>), <span class="built_in">cout</span>.tie(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	ll B = <span class="built_in">sqrt</span>(n) + <span class="number">10</span>;</span><br><span class="line">	init(B);</span><br><span class="line">	ll ret = <span class="number">0</span>, last = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(ll l = <span class="number">1</span>, r; l &lt;= n; l = r + <span class="number">1</span>) &#123;</span><br><span class="line">		r = n / (n / l);</span><br><span class="line">		ll cur = Muf(r);</span><br><span class="line">		ret = (ret + (i16) (n / l) * (n / l) % mod * (cur - last)) % mod;</span><br><span class="line">		last = cur;</span><br><span class="line"><span class="comment">//		cout &lt;&lt; l &lt;&lt; &#x27; &#x27; &lt;&lt; r &lt;&lt; &#x27; &#x27; &lt;&lt; ret &lt;&lt; endl;</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	for(int i = 1; i &lt;= m; i++) &#123;</span></span><br><span class="line"><span class="comment">	  cout &lt;&lt; w[i] &lt;&lt; &#x27; &#x27; &lt;&lt; Muf(w[i]) &lt;&lt; &#x27; &#x27; &lt;&lt; Pg[i] &lt;&lt; &#x27; &#x27; &lt;&lt; Ph[i] &lt;&lt; endl;;</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">	<span class="keyword">if</span>(ret &lt; <span class="number">0</span>) ret += mod;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; ret &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="article-licensing box"><div class="licensing-title"><p>2020 年「计算机科学与工程学院」新生赛总结</p><p><a href="https://blog.tootal.xyz/posts/scutpc2020-summary/">https://blog.tootal.xyz/posts/scutpc2020-summary/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>黄智权</p></div></div><div class="level-item is-narrow"><div><h6>本文发布于</h6><p>2020-11-23</p></div></div><div class="level-item is-narrow"><div><h6>本文更新于</h6><p>2020-11-23</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/ACM/">ACM</a><a class="link-muted mr-2" rel="tag" href="/tags/%E7%AE%97%E6%B3%95/">算法</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="http://afdian.net/@tootal" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/asset/alipay.webp" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/asset/wechat_pay.webp" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/fibonacci-summary/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">斐波那契数列总结</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/pdf-table/"><span class="level-item">给PDF文件添加目录</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo@1.2.0/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'tootal-6g2y019v6b37e4be',
      region: 'ap-guangzhou',
      path: "'/posts/scutpc2020-summary/'",
      katex: {
        delimiters: 
        [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false}
        ],
        throwOnError: false
      }
    });</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#射击训练"><span class="level-left"><span class="level-item">射击训练</span></span></a></li><li><a class="level is-mobile" href="#Overload"><span class="level-left"><span class="level-item">Overload</span></span></a></li><li><a class="level is-mobile" href="#乒乓球"><span class="level-left"><span class="level-item">乒乓球</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#乒乓球-2"><span class="level-left"><span class="level-item">乒乓球</span></span></a></li><li><a class="level is-mobile" href="#乒乓球2"><span class="level-left"><span class="level-item">乒乓球2</span></span></a></li></ul></li><li><a class="level is-mobile" href="#学园都市的神秘代码"><span class="level-left"><span class="level-item">学园都市的神秘代码</span></span></a></li><li><a class="level is-mobile" href="#一个小游戏"><span class="level-left"><span class="level-item">一个小游戏</span></span></a></li><li><a class="level is-mobile" href="#垃圾邮件"><span class="level-left"><span class="level-item">垃圾邮件</span></span></a></li><li><a class="level is-mobile" href="#超人高中生的基建计划"><span class="level-left"><span class="level-item">超人高中生的基建计划</span></span></a></li><li><a class="level is-mobile" href="#灰之魔女的旅行"><span class="level-left"><span class="level-item">灰之魔女的旅行</span></span></a></li><li><a class="level is-mobile" href="#merge-stone"><span class="level-left"><span class="level-item">merge stone</span></span></a></li><li><a class="level is-mobile" href="#心与心之间的距离，永不点亮的音乐会"><span class="level-left"><span class="level-item">心与心之间的距离，永不点亮的音乐会</span></span></a></li><li><a class="level is-mobile" href="#convolution"><span class="level-left"><span class="level-item">convolution</span></span></a></li><li><a class="level is-mobile" href="#小斯巴达们的历练"><span class="level-left"><span class="level-item">小斯巴达们的历练</span></span></a></li><li><a class="level is-mobile" href="#序列构造"><span class="level-left"><span class="level-item">序列构造</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#构造法"><span class="level-left"><span class="level-item">构造法</span></span></a></li><li><a class="level is-mobile" href="#搜索法"><span class="level-left"><span class="level-item">搜索法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#爆炸就是艺术"><span class="level-left"><span class="level-item">爆炸就是艺术</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#爆炸就是艺术2"><span class="level-left"><span class="level-item">爆炸就是艺术2</span></span></a></li><li><a class="level is-mobile" href="#爆炸就是艺术-2"><span class="level-left"><span class="level-item">爆炸就是艺术</span></span></a></li></ul></li><li><a class="level is-mobile" href="#tree"><span class="level-left"><span class="level-item">tree</span></span></a></li><li><a class="level is-mobile" href="#猪灵的胜利之舞"><span class="level-left"><span class="level-item">猪灵的胜利之舞</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#十进制快速幂"><span class="level-left"><span class="level-item">十进制快速幂</span></span></a></li><li><a class="level is-mobile" href="#循环节"><span class="level-left"><span class="level-item">循环节</span></span></a></li><li><a class="level is-mobile" href="#参考代码"><span class="level-left"><span class="level-item">参考代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#艾尔奇亚的国王"><span class="level-left"><span class="level-item">艾尔奇亚的国王</span></span></a></li><li><a class="level is-mobile" href="#umi炒饭"><span class="level-left"><span class="level-item">umi炒饭</span></span></a></li><li><a class="level is-mobile" href="#谜拟Q-plus"><span class="level-left"><span class="level-item">谜拟Q plus</span></span></a></li><li><a class="level is-mobile" href="#世界棋盘"><span class="level-left"><span class="level-item">世界棋盘</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">头头博客</a><p class="is-size-7"><span>&copy; 2021 黄智权</span><span>&nbsp;&nbsp; 由 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>&nbsp;&&nbsp;<a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a> 驱动</span><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span><br><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">赣ICP备20007667号-1</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="View on GitHub" href="https://github.com/tootal/tootal.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/mhchem.js" defer></script><script>
    var katex_config = {
      delimiters: 
      [
        {left: "$$", right: "$$", display: true},
        {left: "$", right: "$", display: false}
      ],
      strict: false,
      throwOnError: false
    };
    window.addEventListener("load", function() {
      document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
        renderMathInElement(element, katex_config);
      });
      document.querySelectorAll('#toc .level-item').forEach(function(element) {
        renderMathInElement(element, katex_config);
      });
    });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>